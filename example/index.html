<html>
    <head>
        <script src="../dist/biojsvispsicquic.js"></script>
    </head>
    <body></body>
    <script>
        
        // Intercept elements before rendering in order to set property type based on intTypes
        var intercept = function(elements){
            for (i = 0, len = elements.edges.length; i < len; i++) { 
                elements.edges[i].data.type = elements.edges[i].data.intTypes[0].value;
                console.log(elements.edges[i].data.type);
            }
            return elements;
        };
        
        var cyopts = {
            
            ready: function(){ 
                console.log('rendering finished.') 
            },
            headless: false,
            renderer: {
                name: 'canvas'
            },
          style: cytoscape.stylesheet()
            .selector('node')
              .css({
                'height': 80,
                'width': 80,
                'content': 'data(id)',
                'text-valign': 'center',
                'color': 'white',
                'border-color': '#000',
                'border-width': 3,
                'border-opacity': 0.5
              })
            .selector('edge')
              .css({
                'curve-style': 'haystack',
                'opacity': 0.6,
                'width': 'mapData(normalized_max_weight, 0, 0.01, 5, 10)'
              })
            .selector('edge[type = "association"]')
                .css({
                    'line-color': '#D0B7D3'
                })
            .selector('edge[type = "physical association"]')
                .css({
                    'line-color': '#9BD8DD'
                })
            .selector('edge[type = "direct interaction"]')
                .css({
                    'line-color': '#A0B3D8'
                })
            .selector('edge[type = "atpase reaction"]')
                .css({
                    'line-color': '#EAA2A3'
                })
        ,
        layout: {
            name: 'concentric',
            concentric: function(){
                return this.data('weight');
            },
            levelWidth: function(nodes){
                return 0.5;
            },
            padding: 10
          }
        };
        
        
        var url = 'http://www.ebi.ac.uk/Tools/webservices/psicquic/intact/webservices/current/search';
        
        var proxy = function(url){
            return 'https://cors-anywhere.herokuapp.com/'+url;
        };
        
        biojsvispsicquic.url(url)
            .query('species:human&id:(BRCA1 OR BRCA2)')
            .proxy(proxy)
            .cyopts(cyopts)
            .intercept(intercept)
            .update();
    </script>
</html>