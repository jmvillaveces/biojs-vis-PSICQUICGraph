!function e(t,n,r){function i(o,s){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);throw new Error("Cannot find module '"+o+"'")}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t){(function(){biojsvispsicquic=e("./pGraph.js"),t.exports=biojsvispsicquic;var n=e("biojs-rest-psicquic"),r=e("cytoscape"),i=e("biojs-io-mitab"),a=e("underscore"),o="body",s=null,u={},l="",c=null,d="query",p=null,h="",f=function(e){s=document.querySelector(e),s.style.left=0,s.style.top=0,s.style.width="100%",s.style.height="100%",s.style.position="absolute"},v=function(){};v.url=function(e){return arguments.length?(l=e,v):l},v.proxy=function(e){return arguments.length?(c=e,v):c},v.method=function(e){return arguments.length?(d=e,v):d},v.params=function(e){return arguments.length?(p=e,v):p},v.query=function(e){return arguments.length?(h=e,v):h},v.selector=function(e){return arguments.length?(o=e,v):o},v.cyopts=function(e){return arguments.length?(u=e,v):u},v.update=function(){null===s&&f(o),n.url(l).params(p).method(d).proxy(c).query(h,function(e,t,n){var o=i.parse(n);u.elements={nodes:a.map(o.nodes,function(e){return{data:e}}),edges:a.map(o.links,function(e){return{data:e}})},u.container=s;r(u)})},t.exports=v}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_6ec017d7.js","/")},{"./pGraph.js":2,"1YiZ5S":18,"biojs-io-mitab":3,"biojs-rest-psicquic":5,buffer:15,cytoscape:14,underscore:19}],2:[function(e,t){(function(){var n=e("biojs-rest-psicquic"),r=e("cytoscape"),i=e("biojs-io-mitab"),a=e("underscore"),o="body",s=null,u={},l="",c=null,d="query",p=null,h="",f=function(e){s=document.querySelector(e),s.style.left=0,s.style.top=0,s.style.width="100%",s.style.height="100%",s.style.position="absolute"},v=function(){};v.url=function(e){return arguments.length?(l=e,v):l},v.proxy=function(e){return arguments.length?(c=e,v):c},v.method=function(e){return arguments.length?(d=e,v):d},v.params=function(e){return arguments.length?(p=e,v):p},v.query=function(e){return arguments.length?(h=e,v):h},v.selector=function(e){return arguments.length?(o=e,v):o},v.cyopts=function(e){return arguments.length?(u=e,v):u},v.update=function(){null===s&&f(o),n.url(l).params(p).method(d).proxy(c).query(h,function(e,t,n){var o=i.parse(n);u.elements={nodes:a.map(o.nodes,function(e){return{data:e}}),edges:a.map(o.links,function(e){return{data:e}})},u.container=s;r(u)})},t.exports=v}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/pGraph.js","/")},{"1YiZ5S":18,"biojs-io-mitab":3,"biojs-rest-psicquic":5,buffer:15,cytoscape:14,underscore:19}],3:[function(e,t){(function(){var n=e("underscore");t.exports=MITab=function(){function e(){}var t={},r=[],i={},a=/\((.*?)\)/,o=/\"(.*?)\"/,s=/\:(.*?)\(/,u=function(e,t,r){var i=n.map(e.split("|"),p),a={id:i[0].value,ids:i,altIds:n.map(t.split("|"),p),taxonomy:n.uniq(n.map(r.split("|"),h))};return a},l=function(e,r){if(!n.isString(e))return console.warn("MITab cannot parse line "+r),{};var i=e.split("	");if(i.length<15)return console.warn("MITab cannot parse line "+r),{};var a=u(i[0],i[2],i[9]),o=u(i[1],i[3],i[10]),s={source:a.id,target:o.id,detMethods:n.map(i[6].split("|"),d),firstAuthor:i[7].split("|"),publications:n.map(i[8].split("|"),p),intTypes:n.map(i[11].split("|"),d),sourceDbs:n.map(i[12].split("|"),d),intIds:n.map(i[13].split("|"),p),scores:n.map(i[14].split("|"),c)};return t[a.id]=a,t[o.id]=o,s},c=function(e){var t=e.split(":"),n={name:t[0],score:+t[1]};return f(n),n},d=function(e){if(null==e.match(o)||null==e.match(a)){var t=e.split(":");return{name:t[0],score:t[1]}}return{name:e.match(o)[1],value:e.match(a)[1]}},p=function(e){var t=e.split(":");return{name:t[0],value:t[1]}},h=function(e){return"-"!=e?null==e.match(s)?e.split(":")[1]:e.match(s)[1]:void 0},f=function(e){!n.isNaN(e.score)&&n.isNumber(e.score)&&(n.has(i,e.name)?(i[e.name].min>e.score&&(i[e.name].min=e.score),i[e.name].max<e.score&&(i[e.name].max=e.score)):i[e.name]={name:e.name,min:e.score,max:e.score})};return e.parse=function(e){if(!n.isString(e))throw"MITab cannot parse "+typeof e;t={},r=[],i={};var a=e.split("\n"),o=n.reject(n.map(a,l),n.isEmpty),s=n.values(t);return{links:o,nodes:s,ids:n.pluck(s,"id"),taxa:n.compact(n.reduce(s,function(e,t){return n.union(e,t.taxonomy)},[])),scores:n.values(i)}},e}()}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/biojs-io-mitab/index.js","/../node_modules/biojs-io-mitab")},{"1YiZ5S":18,buffer:15,underscore:4}],4:[function(e,t,n){(function(){(function(){function e(e){function t(t,n,r,i,a,o){for(;a>=0&&o>a;a+=e){var s=i?i[a]:a;r=n(r,t[s],s,t)}return r}return function(n,r,i,a){r=x(r,a,4);var o=!k(n)&&b.keys(n),s=(o||n).length,u=e>0?0:s-1;return arguments.length<3&&(i=n[o?o[u]:u],u+=e),t(n,r,i,o,u,s)}}function r(e){return function(t,n,r){n=w(n,r);for(var i=null!=t&&t.length,a=e>0?0:i-1;a>=0&&i>a;a+=e)if(n(t[a],a,t))return a;return-1}}function i(e,t){var n=N.length,r=e.constructor,i=b.isFunction(r)&&r.prototype||u,a="constructor";for(b.has(e,a)&&!b.contains(t,a)&&t.push(a);n--;)a=N[n],a in e&&e[a]!==i[a]&&!b.contains(t,a)&&t.push(a)}var a=this,o=a._,s=Array.prototype,u=Object.prototype,l=Function.prototype,c=s.push,d=s.slice,p=u.toString,h=u.hasOwnProperty,f=Array.isArray,v=Object.keys,g=l.bind,y=Object.create,m=function(){},b=function(e){return e instanceof b?e:this instanceof b?void(this._wrapped=e):new b(e)};"undefined"!=typeof n?("undefined"!=typeof t&&t.exports&&(n=t.exports=b),n._=b):a._=b,b.VERSION="1.8.2";var x=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,a){return e.call(t,n,r,i,a)}}return function(){return e.apply(t,arguments)}},w=function(e,t,n){return null==e?b.identity:b.isFunction(e)?x(e,t,n):b.isObject(e)?b.matcher(e):b.property(e)};b.iteratee=function(e,t){return w(e,t,1/0)};var _=function(e,t){return function(n){var r=arguments.length;if(2>r||null==n)return n;for(var i=1;r>i;i++)for(var a=arguments[i],o=e(a),s=o.length,u=0;s>u;u++){var l=o[u];t&&void 0!==n[l]||(n[l]=a[l])}return n}},E=function(e){if(!b.isObject(e))return{};if(y)return y(e);m.prototype=e;var t=new m;return m.prototype=null,t},S=Math.pow(2,53)-1,k=function(e){var t=e&&e.length;return"number"==typeof t&&t>=0&&S>=t};b.each=b.forEach=function(e,t,n){t=x(t,n);var r,i;if(k(e))for(r=0,i=e.length;i>r;r++)t(e[r],r,e);else{var a=b.keys(e);for(r=0,i=a.length;i>r;r++)t(e[a[r]],a[r],e)}return e},b.map=b.collect=function(e,t,n){t=w(t,n);for(var r=!k(e)&&b.keys(e),i=(r||e).length,a=Array(i),o=0;i>o;o++){var s=r?r[o]:o;a[o]=t(e[s],s,e)}return a},b.reduce=b.foldl=b.inject=e(1),b.reduceRight=b.foldr=e(-1),b.find=b.detect=function(e,t,n){var r;return r=k(e)?b.findIndex(e,t,n):b.findKey(e,t,n),void 0!==r&&-1!==r?e[r]:void 0},b.filter=b.select=function(e,t,n){var r=[];return t=w(t,n),b.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},b.reject=function(e,t,n){return b.filter(e,b.negate(w(t)),n)},b.every=b.all=function(e,t,n){t=w(t,n);for(var r=!k(e)&&b.keys(e),i=(r||e).length,a=0;i>a;a++){var o=r?r[a]:a;if(!t(e[o],o,e))return!1}return!0},b.some=b.any=function(e,t,n){t=w(t,n);for(var r=!k(e)&&b.keys(e),i=(r||e).length,a=0;i>a;a++){var o=r?r[a]:a;if(t(e[o],o,e))return!0}return!1},b.contains=b.includes=b.include=function(e,t,n){return k(e)||(e=b.values(e)),b.indexOf(e,t,"number"==typeof n&&n)>=0},b.invoke=function(e,t){var n=d.call(arguments,2),r=b.isFunction(t);return b.map(e,function(e){var i=r?t:e[t];return null==i?i:i.apply(e,n)})},b.pluck=function(e,t){return b.map(e,b.property(t))},b.where=function(e,t){return b.filter(e,b.matcher(t))},b.findWhere=function(e,t){return b.find(e,b.matcher(t))},b.max=function(e,t,n){var r,i,a=-1/0,o=-1/0;if(null==t&&null!=e){e=k(e)?e:b.values(e);for(var s=0,u=e.length;u>s;s++)r=e[s],r>a&&(a=r)}else t=w(t,n),b.each(e,function(e,n,r){i=t(e,n,r),(i>o||i===-1/0&&a===-1/0)&&(a=e,o=i)});return a},b.min=function(e,t,n){var r,i,a=1/0,o=1/0;if(null==t&&null!=e){e=k(e)?e:b.values(e);for(var s=0,u=e.length;u>s;s++)r=e[s],a>r&&(a=r)}else t=w(t,n),b.each(e,function(e,n,r){i=t(e,n,r),(o>i||1/0===i&&1/0===a)&&(a=e,o=i)});return a},b.shuffle=function(e){for(var t,n=k(e)?e:b.values(e),r=n.length,i=Array(r),a=0;r>a;a++)t=b.random(0,a),t!==a&&(i[a]=i[t]),i[t]=n[a];return i},b.sample=function(e,t,n){return null==t||n?(k(e)||(e=b.values(e)),e[b.random(e.length-1)]):b.shuffle(e).slice(0,Math.max(0,t))},b.sortBy=function(e,t,n){return t=w(t,n),b.pluck(b.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index-t.index}),"value")};var P=function(e){return function(t,n,r){var i={};return n=w(n,r),b.each(t,function(r,a){var o=n(r,a,t);e(i,r,o)}),i}};b.groupBy=P(function(e,t,n){b.has(e,n)?e[n].push(t):e[n]=[t]}),b.indexBy=P(function(e,t,n){e[n]=t}),b.countBy=P(function(e,t,n){b.has(e,n)?e[n]++:e[n]=1}),b.toArray=function(e){return e?b.isArray(e)?d.call(e):k(e)?b.map(e,b.identity):b.values(e):[]},b.size=function(e){return null==e?0:k(e)?e.length:b.keys(e).length},b.partition=function(e,t,n){t=w(t,n);var r=[],i=[];return b.each(e,function(e,n,a){(t(e,n,a)?r:i).push(e)}),[r,i]},b.first=b.head=b.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:b.initial(e,e.length-t)},b.initial=function(e,t,n){return d.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},b.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:b.rest(e,Math.max(0,e.length-t))},b.rest=b.tail=b.drop=function(e,t,n){return d.call(e,null==t||n?1:t)},b.compact=function(e){return b.filter(e,b.identity)};var C=function(e,t,n,r){for(var i=[],a=0,o=r||0,s=e&&e.length;s>o;o++){var u=e[o];if(k(u)&&(b.isArray(u)||b.isArguments(u))){t||(u=C(u,t,n));var l=0,c=u.length;for(i.length+=c;c>l;)i[a++]=u[l++]}else n||(i[a++]=u)}return i};b.flatten=function(e,t){return C(e,t,!1)},b.without=function(e){return b.difference(e,d.call(arguments,1))},b.uniq=b.unique=function(e,t,n,r){if(null==e)return[];b.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=w(n,r));for(var i=[],a=[],o=0,s=e.length;s>o;o++){var u=e[o],l=n?n(u,o,e):u;t?(o&&a===l||i.push(u),a=l):n?b.contains(a,l)||(a.push(l),i.push(u)):b.contains(i,u)||i.push(u)}return i},b.union=function(){return b.uniq(C(arguments,!0,!0))},b.intersection=function(e){if(null==e)return[];for(var t=[],n=arguments.length,r=0,i=e.length;i>r;r++){var a=e[r];if(!b.contains(t,a)){for(var o=1;n>o&&b.contains(arguments[o],a);o++);o===n&&t.push(a)}}return t},b.difference=function(e){var t=C(arguments,!0,!0,1);return b.filter(e,function(e){return!b.contains(t,e)})},b.zip=function(){return b.unzip(arguments)},b.unzip=function(e){for(var t=e&&b.max(e,"length").length||0,n=Array(t),r=0;t>r;r++)n[r]=b.pluck(e,r);return n},b.object=function(e,t){for(var n={},r=0,i=e&&e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},b.indexOf=function(e,t,n){var r=0,i=e&&e.length;if("number"==typeof n)r=0>n?Math.max(0,i+n):n;else if(n&&i)return r=b.sortedIndex(e,t),e[r]===t?r:-1;if(t!==t)return b.findIndex(d.call(e,r),b.isNaN);for(;i>r;r++)if(e[r]===t)return r;return-1},b.lastIndexOf=function(e,t,n){var r=e?e.length:0;if("number"==typeof n&&(r=0>n?r+n+1:Math.min(r,n+1)),t!==t)return b.findLastIndex(d.call(e,0,r),b.isNaN);for(;--r>=0;)if(e[r]===t)return r;return-1},b.findIndex=r(1),b.findLastIndex=r(-1),b.sortedIndex=function(e,t,n,r){n=w(n,r,1);for(var i=n(t),a=0,o=e.length;o>a;){var s=Math.floor((a+o)/2);n(e[s])<i?a=s+1:o=s}return a},b.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),a=0;r>a;a++,e+=n)i[a]=e;return i};var D=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var a=E(e.prototype),o=e.apply(a,i);return b.isObject(o)?o:a};b.bind=function(e,t){if(g&&e.bind===g)return g.apply(e,d.call(arguments,1));if(!b.isFunction(e))throw new TypeError("Bind must be called on a function");var n=d.call(arguments,2),r=function(){return D(e,r,t,this,n.concat(d.call(arguments)))};return r},b.partial=function(e){var t=d.call(arguments,1),n=function(){for(var r=0,i=t.length,a=Array(i),o=0;i>o;o++)a[o]=t[o]===b?arguments[r++]:t[o];for(;r<arguments.length;)a.push(arguments[r++]);return D(e,n,this,this,a)};return n},b.bindAll=function(e){var t,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(t=1;r>t;t++)n=arguments[t],e[n]=b.bind(e[n],e);return e},b.memoize=function(e,t){var n=function(r){var i=n.cache,a=""+(t?t.apply(this,arguments):r);return b.has(i,a)||(i[a]=e.apply(this,arguments)),i[a]};return n.cache={},n},b.delay=function(e,t){var n=d.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},b.defer=b.partial(b.delay,b,1),b.throttle=function(e,t,n){var r,i,a,o=null,s=0;n||(n={});var u=function(){s=n.leading===!1?0:b.now(),o=null,a=e.apply(r,i),o||(r=i=null)};return function(){var l=b.now();s||n.leading!==!1||(s=l);var c=t-(l-s);return r=this,i=arguments,0>=c||c>t?(o&&(clearTimeout(o),o=null),s=l,a=e.apply(r,i),o||(r=i=null)):o||n.trailing===!1||(o=setTimeout(u,c)),a}},b.debounce=function(e,t,n){var r,i,a,o,s,u=function(){var l=b.now()-o;t>l&&l>=0?r=setTimeout(u,t-l):(r=null,n||(s=e.apply(a,i),r||(a=i=null)))};return function(){a=this,i=arguments,o=b.now();var l=n&&!r;return r||(r=setTimeout(u,t)),l&&(s=e.apply(a,i),a=i=null),s}},b.wrap=function(e,t){return b.partial(t,e)},b.negate=function(e){return function(){return!e.apply(this,arguments)}},b.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},b.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},b.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}},b.once=b.partial(b.before,2);var T=!{toString:null}.propertyIsEnumerable("toString"),N=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];b.keys=function(e){if(!b.isObject(e))return[];if(v)return v(e);var t=[];for(var n in e)b.has(e,n)&&t.push(n);return T&&i(e,t),t},b.allKeys=function(e){if(!b.isObject(e))return[];var t=[];for(var n in e)t.push(n);return T&&i(e,t),t},b.values=function(e){for(var t=b.keys(e),n=t.length,r=Array(n),i=0;n>i;i++)r[i]=e[t[i]];return r},b.mapObject=function(e,t,n){t=w(t,n);for(var r,i=b.keys(e),a=i.length,o={},s=0;a>s;s++)r=i[s],o[r]=t(e[r],r,e);return o},b.pairs=function(e){for(var t=b.keys(e),n=t.length,r=Array(n),i=0;n>i;i++)r[i]=[t[i],e[t[i]]];return r},b.invert=function(e){for(var t={},n=b.keys(e),r=0,i=n.length;i>r;r++)t[e[n[r]]]=n[r];return t},b.functions=b.methods=function(e){var t=[];for(var n in e)b.isFunction(e[n])&&t.push(n);return t.sort()},b.extend=_(b.allKeys),b.extendOwn=b.assign=_(b.keys),b.findKey=function(e,t,n){t=w(t,n);for(var r,i=b.keys(e),a=0,o=i.length;o>a;a++)if(r=i[a],t(e[r],r,e))return r},b.pick=function(e,t,n){var r,i,a={},o=e;if(null==o)return a;b.isFunction(t)?(i=b.allKeys(o),r=x(t,n)):(i=C(arguments,!1,!1,1),r=function(e,t,n){return t in n},o=Object(o));for(var s=0,u=i.length;u>s;s++){var l=i[s],c=o[l];r(c,l,o)&&(a[l]=c)}return a},b.omit=function(e,t,n){if(b.isFunction(t))t=b.negate(t);else{var r=b.map(C(arguments,!1,!1,1),String);t=function(e,t){return!b.contains(r,t)}}return b.pick(e,t,n)},b.defaults=_(b.allKeys,!0),b.clone=function(e){return b.isObject(e)?b.isArray(e)?e.slice():b.extend({},e):e},b.tap=function(e,t){return t(e),e},b.isMatch=function(e,t){var n=b.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),a=0;r>a;a++){var o=n[a];if(t[o]!==i[o]||!(o in i))return!1}return!0};var M=function(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof b&&(e=e._wrapped),t instanceof b&&(t=t._wrapped);var i=p.call(e);if(i!==p.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var a="[object Array]"===i;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var o=e.constructor,s=t.constructor;if(o!==s&&!(b.isFunction(o)&&o instanceof o&&b.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===e)return r[u]===t;if(n.push(e),r.push(t),a){if(u=e.length,u!==t.length)return!1;for(;u--;)if(!M(e[u],t[u],n,r))return!1}else{var l,c=b.keys(e);if(u=c.length,b.keys(t).length!==u)return!1;for(;u--;)if(l=c[u],!b.has(t,l)||!M(e[l],t[l],n,r))return!1}return n.pop(),r.pop(),!0};b.isEqual=function(e,t){return M(e,t)},b.isEmpty=function(e){return null==e?!0:k(e)&&(b.isArray(e)||b.isString(e)||b.isArguments(e))?0===e.length:0===b.keys(e).length},b.isElement=function(e){return!(!e||1!==e.nodeType)},b.isArray=f||function(e){return"[object Array]"===p.call(e)},b.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},b.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){b["is"+e]=function(t){return p.call(t)==="[object "+e+"]"}}),b.isArguments(arguments)||(b.isArguments=function(e){return b.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(b.isFunction=function(e){return"function"==typeof e||!1}),b.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},b.isNaN=function(e){return b.isNumber(e)&&e!==+e},b.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===p.call(e)},b.isNull=function(e){return null===e},b.isUndefined=function(e){return void 0===e},b.has=function(e,t){return null!=e&&h.call(e,t)},b.noConflict=function(){return a._=o,this},b.identity=function(e){return e},b.constant=function(e){return function(){return e}},b.noop=function(){},b.property=function(e){return function(t){return null==t?void 0:t[e]}},b.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},b.matcher=b.matches=function(e){return e=b.extendOwn({},e),function(t){return b.isMatch(t,e)}},b.times=function(e,t,n){var r=Array(Math.max(0,e));t=x(t,n,1);for(var i=0;e>i;i++)r[i]=t(i);return r},b.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},b.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},I=b.invert(B),A=function(e){var t=function(t){return e[t]},n="(?:"+b.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};b.escape=A(B),b.unescape=A(I),b.result=function(e,t,n){var r=null==e?void 0:e[t];return void 0===r&&(r=n),b.isFunction(r)?r.call(e):r};var L=0;b.uniqueId=function(e){var t=++L+"";return e?e+t:t},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var O=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\u2028|\u2029/g,R=function(e){return"\\"+z[e]};b.template=function(e,t,n){!t&&n&&(t=n),t=b.defaults({},t,b.templateSettings);var r=RegExp([(t.escape||O).source,(t.interpolate||O).source,(t.evaluate||O).source].join("|")+"|$","g"),i=0,a="__p+='";e.replace(r,function(t,n,r,o,s){return a+=e.slice(i,s).replace(j,R),i=s+t.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":o&&(a+="';\n"+o+"\n__p+='"),t}),a+="';\n",t.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var o=new Function(t.variable||"obj","_",a)}catch(s){throw s.source=a,s}var u=function(e){return o.call(this,e,b)},l=t.variable||"obj";return u.source="function("+l+"){\n"+a+"}",u},b.chain=function(e){var t=b(e);return t._chain=!0,t};var Y=function(e,t){return e._chain?b(t).chain():t};b.mixin=function(e){b.each(b.functions(e),function(t){var n=b[t]=e[t];b.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),Y(this,n.apply(b,e))}})},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=s[e];b.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],Y(this,n)}}),b.each(["concat","join","slice"],function(e){var t=s[e];b.prototype[e]=function(){return Y(this,t.apply(this._wrapped,arguments))}}),b.prototype.value=function(){return this._wrapped},b.prototype.valueOf=b.prototype.toJSON=b.prototype.value,b.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return b})}).call(this)}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/biojs-io-mitab/node_modules/underscore/underscore.js","/../node_modules/biojs-io-mitab/node_modules/underscore")},{"1YiZ5S":18,buffer:15}],5:[function(e,t){(function(){var n=e("nets"),r="",i=null,a="query",o=null,s=function(e,t){n({url:e,method:"GET"},t)},u=function(e){var t="";if("string"==typeof e)return e;if("object"==typeof e)for(var n in e)e.hasOwnProperty(n)&&(t+=n+"="+e[n]+"&");return t},l=function(e,t,n){var a="";null!==n&&(a="?"+u(n));var o=r+"/"+e+"/"+t+a;return o=o.replace("//"+e,"/"+e),null===i?o:c(o)},c=function(e){return"function"==typeof i?i(e):"string"==typeof i?i+"?url="+e:e},d=function(){};d.url=function(e){return arguments.length?(r=e,d):r},d.proxy=function(e){return arguments.length?(i=e,d):i},d.method=function(e){return arguments.length?(a=e,d):a},d.params=function(e){return arguments.length?(o=e,d):o},d.query=function(e,t){var n=l(a,e,o);s(n,t)},d.count=function(e,t){var n=l(a,e,{format:"count"});s(n,t)},t.exports=d}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/biojs-rest-psicquic/index.js","/../node_modules/biojs-rest-psicquic")},{"1YiZ5S":18,buffer:15,nets:6}],6:[function(e,t){(function(){function n(e,t,n){r(e,t,n)}var r=e("request");t.exports=n}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/biojs-rest-psicquic/node_modules/nets/index.js","/../node_modules/biojs-rest-psicquic/node_modules/nets")},{"1YiZ5S":18,buffer:15,request:7}],7:[function(e,t){(function(){function n(e,t){function n(){4===v.readyState&&E()}function i(){var e=null;if(v.response?e=v.response:"text"!==v.responseType&&v.responseType||(e=v.responseText||v.responseXML),_)try{e=JSON.parse(e)}catch(t){}return e}function c(){return 1223===v.status?204:v.status}function d(e,t){var n=null;if(0===e||e>=400&&600>e){var r=("string"==typeof t?t:!1)||s[String(e).charAt(0)];n=new Error(r),n.statusCode=e}return n}function p(){var e=c(),n=i(),r=d(e,n),a={body:n,statusCode:e,statusText:v.statusText,raw:v};a.headers=v.getAllResponseHeaders?o(v.getAllResponseHeaders()):{},t(r,a,a.body)}function h(){var e=c(),n=d(e);v.status=v.statusCode=e,v.body=i(),v.headers=o(v.getAllResponseHeaders()),t(n,v,v.body)}function f(e){t(e,v)}"string"==typeof e&&(e={uri:e}),e=e||{},t=a(t);var v=e.xhr||null;v||(v=e.cors||e.useXDR?new l:new u);var g,y=v.url=e.uri||e.url,m=v.method=e.method||"GET",b=e.body||e.data,x=v.headers=e.headers||{},w=!!e.sync,_=!1,E=e.response?p:h;if("json"in e&&(_=!0,x.Accept="application/json","GET"!==m&&"HEAD"!==m&&(x["Content-Type"]="application/json",b=JSON.stringify(e.json))),v.onreadystatechange=n,v.onload=E,v.onerror=f,v.onprogress=function(){},v.ontimeout=r,v.open(m,y,!w),(e.withCredentials||e.cors&&e.withCredentials!==!1)&&(v.withCredentials=!0),w||(v.timeout="timeout"in e?e.timeout:5e3),v.setRequestHeader)for(g in x)x.hasOwnProperty(g)&&v.setRequestHeader(g,x[g]);else if(e.headers)throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(v.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(v),v.send(b),v}function r(){}var i=e("global/window"),a=e("once"),o=e("parse-headers"),s={0:"Internal XMLHttpRequest Error",4:"4xx Client Error",5:"5xx Server Error"},u=i.XMLHttpRequest||r,l="withCredentials"in new u?u:i.XDomainRequest;t.exports=n}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/biojs-rest-psicquic/node_modules/nets/node_modules/xhr/index.js","/../node_modules/biojs-rest-psicquic/node_modules/nets/node_modules/xhr")},{"1YiZ5S":18,buffer:15,"global/window":8,once:9,"parse-headers":13}],8:[function(e,t){(function(e,n){t.exports="undefined"!=typeof window?window:"undefined"!=typeof n?n:"undefined"!=typeof self?self:{}}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/biojs-rest-psicquic/node_modules/nets/node_modules/xhr/node_modules/global/window.js","/../node_modules/biojs-rest-psicquic/node_modules/nets/node_modules/xhr/node_modules/global")},{"1YiZ5S":18,buffer:15}],9:[function(e,t){(function(){function e(e){var t=!1;return function(){return t?void 0:(t=!0,e.apply(this,arguments))}}t.exports=e,e.proto=e(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return e(this)},configurable:!0})})}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/biojs-rest-psicquic/node_modules/nets/node_modules/xhr/node_modules/once/once.js","/../node_modules/biojs-rest-psicquic/node_modules/nets/node_modules/xhr/node_modules/once")},{"1YiZ5S":18,buffer:15}],10:[function(e,t){(function(){function n(e,t,n){if(!o(t))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===s.call(e)?r(e,t,n):"string"==typeof e?i(e,t,n):a(e,t,n)}function r(e,t,n){for(var r=0,i=e.length;i>r;r++)u.call(e,r)&&t.call(n,e[r],r,e)}function i(e,t,n){for(var r=0,i=e.length;i>r;r++)t.call(n,e.charAt(r),r,e)}function a(e,t,n){for(var r in e)u.call(e,r)&&t.call(n,e[r],r,e)}var o=e("is-function");t.exports=n;var s=Object.prototype.toString,u=Object.prototype.hasOwnProperty}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/biojs-rest-psicquic/node_modules/nets/node_modules/xhr/node_modules/parse-headers/node_modules/for-each/index.js","/../node_modules/biojs-rest-psicquic/node_modules/nets/node_modules/xhr/node_modules/parse-headers/node_modules/for-each")},{"1YiZ5S":18,buffer:15,"is-function":11}],11:[function(e,t){(function(){function e(e){var t=n.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}t.exports=e;var n=Object.prototype.toString}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/biojs-rest-psicquic/node_modules/nets/node_modules/xhr/node_modules/parse-headers/node_modules/for-each/node_modules/is-function/index.js","/../node_modules/biojs-rest-psicquic/node_modules/nets/node_modules/xhr/node_modules/parse-headers/node_modules/for-each/node_modules/is-function")},{"1YiZ5S":18,buffer:15}],12:[function(e,t,n){(function(){function e(e){return e.replace(/^\s*|\s*$/g,"")}n=t.exports=e,n.left=function(e){return e.replace(/^\s*/,"")},n.right=function(e){return e.replace(/\s*$/,"")}}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/biojs-rest-psicquic/node_modules/nets/node_modules/xhr/node_modules/parse-headers/node_modules/trim/index.js","/../node_modules/biojs-rest-psicquic/node_modules/nets/node_modules/xhr/node_modules/parse-headers/node_modules/trim")},{"1YiZ5S":18,buffer:15}],13:[function(e,t){(function(){var n=e("trim"),r=e("for-each"),i=function(e){return"[object Array]"===Object.prototype.toString.call(e)};t.exports=function(e){if(!e)return{};var t={};return r(n(e).split("\n"),function(e){var r=e.indexOf(":"),a=n(e.slice(0,r)).toLowerCase(),o=n(e.slice(r+1));"undefined"==typeof t[a]?t[a]=o:i(t[a])?t[a].push(o):t[a]=[t[a],o]}),t}}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/biojs-rest-psicquic/node_modules/nets/node_modules/xhr/node_modules/parse-headers/parse-headers.js","/../node_modules/biojs-rest-psicquic/node_modules/nets/node_modules/xhr/node_modules/parse-headers")},{"1YiZ5S":18,buffer:15,"for-each":10,trim:12}],14:[function(e,t){(function(){var n;!function(e){"use strict";var r=n=function(){return n.init.apply(n,arguments)};r.version="2.3.9",r.init=function(e){return void 0===e&&(e={}),r.is.plainObject(e)?new r.Core(e):r.is.string(e)?r.extension.apply(r.extension,arguments):void 0},r.fn={},"undefined"!=typeof t&&t.exports&&(t.exports=n),"undefined"!=typeof define&&define.amd&&define("cytoscape",function(){return n}),e&&(e.cytoscape=n)}("undefined"==typeof window?null:window),function(e,t){"use strict";e.is={defined:function(e){return null!=e},string:function(e){return null!=e&&"string"==typeof e},fn:function(e){return null!=e&&"function"==typeof e},array:function(e){return Array.isArray?Array.isArray(e):null!=e&&e instanceof Array},plainObject:function(t){return null!=t&&typeof t==typeof{}&&!e.is.array(t)&&t.constructor===Object},number:function(e){return null!=e&&"number"==typeof e&&!isNaN(e)},integer:function(t){return e.is.number(t)&&Math.floor(t)===t},color:function(e){return null!=e&&"string"==typeof e&&""!==$.Color(e).toString()},bool:function(e){return null!=e&&typeof e==typeof!0},elementOrCollection:function(t){return e.is.element(t)||e.is.collection(t)},element:function(t){return t instanceof e.Element&&t._private.single},collection:function(t){return t instanceof e.Collection&&!t._private.single},core:function(t){return t instanceof e.Core},style:function(t){return t instanceof e.Style},stylesheet:function(t){return t instanceof e.Stylesheet},event:function(t){return t instanceof e.Event},emptyString:function(t){return t?e.is.string(t)&&(""===t||t.match(/^\s+$/))?!0:!1:!0},nonemptyString:function(t){return t&&e.is.string(t)&&""!==t&&!t.match(/^\s+$/)?!0:!1},domElement:function(e){return"undefined"==typeof HTMLElement?!1:e instanceof HTMLElement},boundingBox:function(t){return e.is.plainObject(t)&&e.is.number(t.x1)&&e.is.number(t.x2)&&e.is.number(t.y1)&&e.is.number(t.y2)},touch:function(){return t&&("ontouchstart"in t||t.DocumentTouch&&document instanceof DocumentTouch)},gecko:function(){return"undefined"!=typeof InstallTrigger||"MozAppearance"in document.documentElement.style},webkit:function(){return"undefined"!=typeof webkitURL||"WebkitAppearance"in document.documentElement.style},chromium:function(){return"undefined"!=typeof chrome},khtml:function(){return navigator.vendor.match(/kde/i)
},khtmlEtc:function(){return e.is.khtml()||e.is.webkit()||e.is.blink()},trident:function(){return"undefined"!=typeof ActiveXObject||!1},windows:function(){return"undefined"!=typeof navigator&&navigator.appVersion.match(/Win/i)},mac:function(){return"undefined"!=typeof navigator&&navigator.appVersion.match(/Mac/i)},linux:function(){return"undefined"!=typeof navigator&&navigator.appVersion.match(/Linux/i)},unix:function(){return"undefined"!=typeof navigator&&navigator.appVersion.match(/X11/i)}}}(n,"undefined"==typeof window?null:window),function(n,r){"use strict";n.util={extend:function(){var e,t,r,i,a,o,s=arguments[0]||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},u=2),"object"==typeof s||n.is.fn(s)||(s={}),l===u&&(s=this,--u);l>u;u++)if(null!=(e=arguments[u]))for(t in e)r=s[t],i=e[t],s!==i&&(c&&i&&(n.is.plainObject(i)||(a=n.is.array(i)))?(a?(a=!1,o=r&&n.is.array(r)?r:[]):o=r&&n.is.plainObject(r)?r:{},s[t]=n.util.extend(c,o,i)):void 0!==i&&(s[t]=i));return s},require:function(i,a,o){var s;o=n.util.extend({msgIfNotFound:!0},o);var u=!1,l=function(e){u=!0,a(e)},c=function(e){r&&(s=r[i]),void 0!==s&&l(s),e&&e()},d=function(){u||p(h)},p=function(n){"undefined"!=typeof t&&t.exports&&e&&(s=e(i)),void 0!==s&&l(s),n&&n()},h=function(){u||f(v)},f=function(t){"undefined"!=typeof define&&define.amd&&e&&e([i],function(e){s=e,void 0!==s&&l(s),t&&t()})},v=function(){!u&&o.msgIfNotFound&&n.util.error("Cytoscape.js tried to pull in dependency `"+i+"` but no module (i.e. CommonJS, AMD, or window) was found")};c(d)},requires:function(e,t){for(var r=[],i=[],a=function(){for(var n=0;n<e.length;n++)if(!i[n])return;t.apply(t,r)},o=0;o<e.length;o++)!function(){var t=e[o],s=o;n.util.require(t,function(e){r[s]=e,i[s]=!0,a()})}()},throttle:function(e,t,r){var i=!0,a=!0;return r===!1?i=!1:n.is.plainObject(r)&&(i="leading"in r?r.leading:i,a="trailing"in r?r.trailing:a),r=r||{},r.leading=i,r.maxWait=t,r.trailing=a,n.util.debounce(e,t,r)},now:function(){return+new Date},debounce:function(e,t,r){var i,a,o,s,u,l,c,d=0,p=!1,h=!0;if(n.is.fn(e)){if(t=Math.max(0,t)||0,r===!0){var f=!0;h=!1}else n.is.plainObject(r)&&(f=r.leading,p="maxWait"in r&&(Math.max(t,r.maxWait)||0),h="trailing"in r?r.trailing:h);var v=function(){var r=t-(n.util.now()-s);if(0>=r){a&&clearTimeout(a);var p=c;a=l=c=void 0,p&&(d=n.util.now(),o=e.apply(u,i),l||a||(i=u=null))}else l=setTimeout(v,r)},g=function(){l&&clearTimeout(l),a=l=c=void 0,(h||p!==t)&&(d=n.util.now(),o=e.apply(u,i),l||a||(i=u=null))};return function(){if(i=arguments,s=n.util.now(),u=this,c=h&&(l||!f),p===!1)var r=f&&!l;else{a||f||(d=s);var y=p-(s-d),m=0>=y;m?(a&&(a=clearTimeout(a)),d=s,o=e.apply(u,i)):a||(a=setTimeout(g,y))}return m&&l?l=clearTimeout(l):l||t===p||(l=setTimeout(v,t)),r&&(m=!0,o=e.apply(u,i)),!m||l||a||(i=u=null),o}}},error:function(e){if(!console)throw e;if(console.error)console.error.apply(console,arguments);else{if(!console.log)throw e;console.log.apply(console,arguments)}},clone:function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},copy:function(e){return null==e?e:n.is.array(e)?e.slice():n.is.plainObject(e)?n.util.clone(e):e},makeBoundingBox:function(e){if(null!=e.x1&&null!=e.y1){if(null!=e.x2&&null!=e.y2&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(null!=e.w&&null!=e.h&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},mapEmpty:function(e){var t=!0;if(null!=e)for(var n in e){t=!1;break}return t},pushMap:function(e){var t=n.util.getMap(e);null==t?n.util.setMap($.extend({},e,{value:[e.value]})):t.push(e.value)},setMap:function(e){for(var t,r=e.map,i=e.keys,a=i.length,o=0;a>o;o++){var t=i[o];n.is.plainObject(t)&&n.util.error("Tried to set map with object key"),o<i.length-1?(null==r[t]&&(r[t]={}),r=r[t]):r[t]=e.value}},getMap:function(e){for(var t=e.map,r=e.keys,i=r.length,a=0;i>a;a++){var o=r[a];if(n.is.plainObject(o)&&n.util.error("Tried to get map with object key"),t=t[o],null==t)return t}return t},deleteMap:function(e){for(var t=e.map,r=e.keys,i=r.length,a=e.keepChildren,o=0;i>o;o++){var s=r[o];n.is.plainObject(s)&&n.util.error("Tried to delete map with object key");var u=o===e.keys.length-1;if(u)if(a)for(var l in t)a[l]||(t[l]=void 0);else t[s]=void 0;else t=t[s]}},capitalize:function(e){return n.is.emptyString(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},camel2dash:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=r.toLowerCase(),a=r!==i;a?(t.push("-"),t.push(i)):t.push(r)}var o=t.length===e.length;return o?e:t.join("")},dash2camel:function(e){for(var t=[],n=!1,r=0;r<e.length;r++){var i=e[r],a="-"===i;a?n=!0:(t.push(n?i.toUpperCase():i),n=!1)}return t.join("")},trim:function(e){var t,n;for(t=0;t<e.length&&" "===e[t];t++);for(n=e.length-1;n>t&&" "===e[n];n--);return e.substring(t,n+1)},hex2tuple:function(e){if((4===e.length||7===e.length)&&"#"===e[0]){var t,n,r,i=4===e.length,a=16;return i?(t=parseInt(e[1]+e[1],a),n=parseInt(e[2]+e[2],a),r=parseInt(e[3]+e[3],a)):(t=parseInt(e[1]+e[2],a),n=parseInt(e[3]+e[4],a),r=parseInt(e[5]+e[6],a)),[t,n,r]}},hsl2tuple:function(e){function t(e,t,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?e+6*(t-e)*n:.5>n?t:2/3>n?e+(t-e)*(2/3-n)*6:e}var r,i,a,o,s,u,l,c,d=new RegExp("^"+n.util.regex.hsla+"$").exec(e);if(d){if(i=parseInt(d[1]),0>i?i=(360- -1*i%360)%360:i>360&&(i%=360),i/=360,a=parseFloat(d[2]),0>a||a>100)return;if(a/=100,o=parseFloat(d[3]),0>o||o>100)return;if(o/=100,s=d[4],void 0!==s&&(s=parseFloat(s),0>s||s>1))return;if(0===a)u=l=c=Math.round(255*o);else{var p=.5>o?o*(1+a):o+a-o*a,h=2*o-p;u=Math.round(255*t(h,p,i+1/3)),l=Math.round(255*t(h,p,i)),c=Math.round(255*t(h,p,i-1/3))}r=[u,l,c,s]}return r},rgb2tuple:function(e){var t,r=new RegExp("^"+n.util.regex.rgba+"$").exec(e);if(r){t=[];for(var i=[],a=1;3>=a;a++){var o=r[a];if("%"===o[o.length-1]&&(i[a]=!0),o=parseFloat(o),i[a]&&(o=o/100*255),0>o||o>255)return;t.push(Math.floor(o))}var s=i[1]||i[2]||i[3],u=i[1]&&i[2]&&i[3];if(s&&!u)return;var l=r[4];if(void 0!==l){if(l=parseFloat(l),0>l||l>1)return;t.push(l)}}return t},colorname2tuple:function(e){return n.util.colors[e.toLowerCase()]},color2tuple:function(e){return(n.is.array(e)?e:null)||n.util.colorname2tuple(e)||n.util.hex2tuple(e)||n.util.rgb2tuple(e)||n.util.hsl2tuple(e)},tuple2hex:function(e){function t(e){var t=e.toString(16);return 1===t.length&&(t="0"+t),t}var n=e[0],r=e[1],i=e[2];return"#"+t(n)+t(r)+t(i)},colors:{transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},n.util.regex={},n.util.regex.number="(?:[-]?\\d*\\.\\d+|[-]?\\d+|[-]?\\d*\\.\\d+[eE]\\d+)",n.util.regex.rgba="rgb[a]?\\(("+n.util.regex.number+"[%]?)\\s*,\\s*("+n.util.regex.number+"[%]?)\\s*,\\s*("+n.util.regex.number+"[%]?)(?:\\s*,\\s*("+n.util.regex.number+"))?\\)",n.util.regex.rgbaNoBackRefs="rgb[a]?\\((?:"+n.util.regex.number+"[%]?)\\s*,\\s*(?:"+n.util.regex.number+"[%]?)\\s*,\\s*(?:"+n.util.regex.number+"[%]?)(?:\\s*,\\s*(?:"+n.util.regex.number+"))?\\)",n.util.regex.hsla="hsl[a]?\\(("+n.util.regex.number+")\\s*,\\s*("+n.util.regex.number+"[%])\\s*,\\s*("+n.util.regex.number+"[%])(?:\\s*,\\s*("+n.util.regex.number+"))?\\)",n.util.regex.hslaNoBackRefs="hsl[a]?\\((?:"+n.util.regex.number+")\\s*,\\s*(?:"+n.util.regex.number+"[%])\\s*,\\s*(?:"+n.util.regex.number+"[%])(?:\\s*,\\s*(?:"+n.util.regex.number+"))?\\)",n.util.regex.hex3="\\#[0-9a-fA-F]{3}",n.util.regex.hex6="\\#[0-9a-fA-F]{6}";var i=r?r.requestAnimationFrame||r.mozRequestAnimationFrame||r.webkitRequestAnimationFrame||r.msRequestAnimationFrame:null;i=i||function(e){e&&setTimeout(e,1e3/60)},n.util.requestAnimationFrame=function(e){i(e)}}(n,"undefined"==typeof window?null:window),function(e){"use strict";e.math={},e.math.signum=function(e){return e>0?1:0>e?-1:0},e.math.distance=function(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)},e.math.qbezierAt=function(e,t,n,r){return(1-r)*(1-r)*e+2*(1-r)*r*t+r*r*n},e.math.qbezierPtAt=function(t,n,r,i){return{x:e.math.qbezierAt(t.x,n.x,r.x,i),y:e.math.qbezierAt(t.y,n.y,r.y,i)}},e.math.boundingBoxesIntersect=function(e,t){return e.x1>t.x2?!1:t.x1>e.x2?!1:e.x2<t.x1?!1:t.x2<e.x1?!1:e.y2<t.y1?!1:t.y2<e.y1?!1:e.y1>t.y2?!1:t.y1>e.y2?!1:!0},e.math.inBoundingBox=function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},e.math.pointInBoundingBox=function(e,t){return this.inBoundingBox(e,t.x,t.y)},e.math.roundRectangleIntersectLine=function(e,t,n,r,i,a,o){var s,u=this.getRoundRectangleRadius(i,a),l=i/2,c=a/2,d=n-l+u-o,p=r-c-o,h=n+l-u+o,f=p;if(s=this.finiteLinesIntersect(e,t,n,r,d,p,h,f,!1),s.length>0)return s;var v=n+l+o,g=r-c+u-o,y=v,m=r+c-u+o;if(s=this.finiteLinesIntersect(e,t,n,r,v,g,y,m,!1),s.length>0)return s;var b=n-l+u-o,x=r+c+o,w=n+l-u+o,_=x;if(s=this.finiteLinesIntersect(e,t,n,r,b,x,w,_,!1),s.length>0)return s;var E=n-l-o,S=r-c+u-o,k=E,P=r+c-u+o;if(s=this.finiteLinesIntersect(e,t,n,r,E,S,k,P,!1),s.length>0)return s;var C,D=n-l+u,T=r-c+u;if(C=this.intersectLineCircle(e,t,n,r,D,T,u+o),C.length>0&&C[0]<=D&&C[1]<=T)return[C[0],C[1]];var N=n+l-u,M=r-c+u;if(C=this.intersectLineCircle(e,t,n,r,N,M,u+o),C.length>0&&C[0]>=N&&C[1]<=M)return[C[0],C[1]];var B=n+l-u,I=r+c-u;if(C=this.intersectLineCircle(e,t,n,r,B,I,u+o),C.length>0&&C[0]>=B&&C[1]>=I)return[C[0],C[1]];var A=n-l+u,L=r+c-u;return C=this.intersectLineCircle(e,t,n,r,A,L,u+o),C.length>0&&C[0]<=A&&C[1]>=L?[C[0],C[1]]:[]},e.math.roundRectangleIntersectBox=function(e,t,n,r,i,a,o,s,u){var l=this.getRoundRectangleRadius(i,a),c=o-i/2-u,d=s-a/2+l-u,p=o+i/2+u,h=s+a/2-l+u,f=o-i/2+l-u,v=s-a/2-u,g=o+i/2-l+u,y=s+a/2+u,m=Math.min(e,n),b=Math.max(e,n),x=Math.min(t,r),w=Math.max(t,r);return c>b?!1:m>p?!1:v>w?!1:x>y?!1:c>=m&&b>=c&&d>=x&&w>=d?!0:p>=m&&b>=p&&d>=x&&w>=d?!0:p>=m&&b>=p&&h>=x&&w>=h?!0:c>=m&&b>=c&&h>=x&&w>=h?!0:m>=c&&p>=m&&x>=d&&h>=x?!0:b>=c&&p>=b&&x>=d&&h>=x?!0:b>=c&&p>=b&&w>=d&&h>=w?!0:m>=c&&p>=m&&w>=d&&h>=w?!0:f>=m&&b>=f&&v>=x&&w>=v?!0:g>=m&&b>=g&&v>=x&&w>=v?!0:g>=m&&b>=g&&y>=x&&w>=y?!0:f>=m&&b>=f&&y>=x&&w>=y?!0:m>=f&&g>=m&&x>=v&&y>=x?!0:b>=f&&g>=b&&x>=v&&y>=x?!0:b>=f&&g>=b&&w>=v&&y>=w?!0:m>=f&&g>=m&&w>=v&&y>=w?!0:this.boxIntersectEllipse(m,x,b,w,u,2*l,2*l,f+u,d+u)?!0:this.boxIntersectEllipse(m,x,b,w,u,2*l,2*l,g-u,d+u)?!0:this.boxIntersectEllipse(m,x,b,w,u,2*l,2*l,g-u,h-u)?!0:this.boxIntersectEllipse(m,x,b,w,u,2*l,2*l,f+u,h-u)?!0:!1},e.math.checkInBoundingCircle=function(e,t,n,r,i,a,o,s){return e=(e-o)/(i+r),t=(t-s)/(a+r),n>=e*e+t*t},e.math.boxInBezierVicinity=function(e,t,n,r,i,a,o,s,u,l,c){var d=.25*i+.5*o+.25*u,p=.25*a+.5*s+.25*l,h=Math.min(e,n)-c,f=Math.min(t,r)-c,v=Math.max(e,n)+c,g=Math.max(t,r)+c;if(i>=h&&v>=i&&a>=f&&g>=a)return 1;if(u>=h&&v>=u&&l>=f&&g>=l)return 1;if(d>=h&&v>=d&&p>=f&&g>=p)return 1;if(o>=h&&v>=o&&s>=f&&g>=s)return 1;var y=Math.min(i,d,u),m=Math.min(a,p,l),b=Math.max(i,d,u),x=Math.max(a,p,l);return y>v||h>b||m>g||f>x?0:1},e.math.checkBezierInBox=function(t,n,r,i,a,o,s,u,l,c){function d(d){var p=e.math.qbezierAt(a,s,l,d),h=e.math.qbezierAt(o,u,c,d);return p>=t&&r>=p&&h>=n&&i>=h}for(var p=0;1>=p;p+=.25)if(!d(p))return!1;return!0},e.math.checkStraightEdgeInBox=function(e,t,n,r,i,a,o,s){return i>=e&&n>=i&&o>=e&&n>=o&&a>=t&&r>=a&&s>=t&&r>=s},e.math.checkStraightEdgeCrossesBox=function(e,t,n,r,i,a,o,s,u){var l,c,d=Math.min(e,n)-u,p=Math.min(t,r)-u,h=Math.max(e,n)+u,f=Math.max(t,r)+u,v=o-i,g=i,y=s-a,m=a;if(Math.abs(v)<1e-4)return i>=d&&h>=i&&Math.min(a,s)<=p&&Math.max(a,s)>=f;var b=(d-g)/v;if(b>0&&1>=b&&(l=y*b+m,l>=p&&f>=l))return!0;var x=(h-g)/v;if(x>0&&1>=x&&(l=y*x+m,l>=p&&f>=l))return!0;var w=(p-m)/y;if(w>0&&1>=w&&(c=v*w+g,c>=d&&h>=c))return!0;var _=(f-m)/y;return _>0&&1>=_&&(c=v*_+g,c>=d&&h>=c)?!0:!1},e.math.checkBezierCrossesBox=function(e,t,n,r,i,a,o,s,u,l,c){var d=Math.min(e,n)-c,p=Math.min(t,r)-c,h=Math.max(e,n)+c,f=Math.max(t,r)+c;if(i>=d&&h>=i&&a>=p&&f>=a)return!0;if(u>=d&&h>=u&&l>=p&&f>=l)return!0;var v=i-2*o+u,g=-2*i+2*o,y=i,m=[];if(Math.abs(v)<1e-4){var b=(d-i)/g,x=(h-i)/g;m.push(b,x)}else{var w,_,E=g*g-4*v*(y-d);if(E>0){var S=Math.sqrt(E);w=(-g+S)/(2*v),_=(-g-S)/(2*v),m.push(w,_)}var k,P,C=g*g-4*v*(y-h);if(C>0){var S=Math.sqrt(C);k=(-g+S)/(2*v),P=(-g-S)/(2*v),m.push(k,P)}}m.sort(function(e,t){return e-t});var D=a-2*s+l,T=-2*a+2*s,N=a,M=[];if(Math.abs(D)<1e-4){var B=(p-a)/T,I=(f-a)/T;M.push(B,I)}else{var A,L,O=T*T-4*D*(N-p);if(O>0){var S=Math.sqrt(O);A=(-T+S)/(2*D),L=(-T-S)/(2*D),M.push(A,L)}var z,j,R=T*T-4*D*(N-f);if(R>0){var S=Math.sqrt(R);z=(-T+S)/(2*D),j=(-T-S)/(2*D),M.push(z,j)}}M.sort(function(e,t){return e-t});for(var Y=0;Y<m.length;Y+=2)for(var X=1;X<M.length;X+=2)if(m[Y]<M[X]&&M[X]>=0&&m[Y]<=1&&m[Y+1]>M[X-1]&&M[X-1]<=1&&m[Y+1]>=0)return!0;return!1},e.math.inLineVicinity=function(e,t,n,r,i,a,o){var s=o,u=Math.min(n,i),l=Math.max(n,i),c=Math.min(r,a),d=Math.max(r,a);return e>=u-s&&l+s>=e&&t>=c-s&&d+s>=t},e.math.inBezierVicinity=function(e,t,n,r,i,a,o,s){var u={x1:Math.min(n,o,i),x2:Math.max(n,o,i),y1:Math.min(r,s,a),y2:Math.max(r,s,a)};return e<u.x1||e>u.x2||t<u.y1||t>u.y2?!1:!0},e.math.solveCubic=function(e,t,n,r,i){t/=e,n/=e,r/=e;var a,o,s,u,l,c,d,p;return o=(3*n-t*t)/9,s=-(27*r)+t*(9*n-2*t*t),s/=54,a=o*o*o+s*s,i[1]=0,d=t/3,a>0?(l=s+Math.sqrt(a),l=0>l?-Math.pow(-l,1/3):Math.pow(l,1/3),c=s-Math.sqrt(a),c=0>c?-Math.pow(-c,1/3):Math.pow(c,1/3),i[0]=-d+l+c,d+=(l+c)/2,i[4]=i[2]=-d,d=Math.sqrt(3)*(-c+l)/2,i[3]=d,void(i[5]=-d)):(i[5]=i[3]=0,0===a?(p=0>s?-Math.pow(-s,1/3):Math.pow(s,1/3),i[0]=-d+2*p,void(i[4]=i[2]=-(p+d))):(o=-o,u=o*o*o,u=Math.acos(s/Math.sqrt(u)),p=2*Math.sqrt(o),i[0]=-d+p*Math.cos(u/3),i[2]=-d+p*Math.cos((u+2*Math.PI)/3),void(i[4]=-d+p*Math.cos((u+4*Math.PI)/3))))},e.math.sqDistanceToQuadraticBezier=function(e,t,n,r,i,a,o,s){var u=1*n*n-4*n*i+2*n*o+4*i*i-4*i*o+o*o+r*r-4*r*a+2*r*s+4*a*a-4*a*s+s*s,l=9*n*i-3*n*n-3*n*o-6*i*i+3*i*o+9*r*a-3*r*r-3*r*s-6*a*a+3*a*s,c=3*n*n-6*n*i+n*o-n*e+2*i*i+2*i*e-o*e+3*r*r-6*r*a+r*s-r*t+2*a*a+2*a*t-s*t,d=1*n*i-n*n+n*e-i*e+r*a-r*r+r*t-a*t,p=[];this.solveCubic(u,l,c,d,p);for(var h=1e-7,f=[],v=0;6>v;v+=2)Math.abs(p[v+1])<h&&p[v]>=0&&p[v]<=1&&f.push(p[v]);f.push(1),f.push(0);for(var g,y,m,b,x=-1,w=0;w<f.length;w++)y=Math.pow(1-f[w],2)*n+2*(1-f[w])*f[w]*i+f[w]*f[w]*o,m=Math.pow(1-f[w],2)*r+2*(1-f[w])*f[w]*a+f[w]*f[w]*s,b=Math.pow(y-e,2)+Math.pow(m-t,2),x>=0?x>b&&(x=b,g=f[w]):(x=b,g=f[w]);return x},e.math.sqDistanceToFiniteLine=function(e,t,n,r,i,a){var o=[e-n,t-r],s=[i-n,a-r],u=s[0]*s[0]+s[1]*s[1],l=o[0]*o[0]+o[1]*o[1],c=o[0]*s[0]+o[1]*s[1],d=c*c/u;return 0>c?l:d>u?(e-i)*(e-i)+(t-a)*(t-a):l-d},e.math.pointInsidePolygon=function(e,t,n,r,i,a,o,s,u){var l=new Array(n.length),c=Math.asin(s[1]/Math.sqrt(s[0]*s[0]+s[1]*s[1]));s[0]<0?c+=Math.PI/2:c=-c-Math.PI/2;for(var d=Math.cos(-c),p=Math.sin(-c),h=0;h<l.length/2;h++)l[2*h]=a/2*(n[2*h]*d-n[2*h+1]*p),l[2*h+1]=o/2*(n[2*h+1]*d+n[2*h]*p),l[2*h]+=r,l[2*h+1]+=i;var f;if(u>0){var v=this.expandPolygon(l,-u);f=this.joinLines(v)}else f=l;for(var g,y,m,b,x,w=0,_=0,h=0;h<f.length/2;h++)if(g=f[2*h],y=f[2*h+1],h+1<f.length/2?(m=f[2*(h+1)],b=f[2*(h+1)+1]):(m=f[2*(h+1-f.length/2)],b=f[2*(h+1-f.length/2)+1]),g==e&&m==e);else{if(!(g>=e&&e>=m||e>=g&&m>=e))continue;x=(e-g)/(m-g)*(b-y)+y,x>t&&w++,t>x&&_++}return w%2===0?!1:!0},e.math.joinLines=function(e){for(var t,n,r,i,a,o,s,u,l=new Array(e.length/2),c=0;c<e.length/4;c++){t=e[4*c],n=e[4*c+1],r=e[4*c+2],i=e[4*c+3],c<e.length/4-1?(a=e[4*(c+1)],o=e[4*(c+1)+1],s=e[4*(c+1)+2],u=e[4*(c+1)+3]):(a=e[0],o=e[1],s=e[2],u=e[3]);var d=this.finiteLinesIntersect(t,n,r,i,a,o,s,u,!0);l[2*c]=d[0],l[2*c+1]=d[1]}return l},e.math.expandPolygon=function(e,t){for(var n,r,i,a,o=new Array(2*e.length),s=0;s<e.length/2;s++){n=e[2*s],r=e[2*s+1],s<e.length/2-1?(i=e[2*(s+1)],a=e[2*(s+1)+1]):(i=e[0],a=e[1]);var u=a-r,l=-(i-n),c=Math.sqrt(u*u+l*l),d=u/c,p=l/c;o[4*s]=n+d*t,o[4*s+1]=r+p*t,o[4*s+2]=i+d*t,o[4*s+3]=a+p*t}return o},e.math.intersectLineEllipse=function(e,t,n,r,i,a){var o=n-e,s=r-t;o/=i,s/=a;var u=Math.sqrt(o*o+s*s),l=u-1;if(0>l)return[];var c=l/u;return[(n-e)*c+e,(r-t)*c+t]},e.math.dotProduct=function(e,t){if(2!=e.length||2!=t.length)throw"dot product: arguments are not vectors";return e[0]*t[0]+e[1]*t[1]},e.math.intersectLineCircle=function(e,t,n,r,i,a,o){var s=[n-e,r-t],u=[i,a],l=[e-i,t-a],c=s[0]*s[0]+s[1]*s[1],d=2*(l[0]*s[0]+l[1]*s[1]),u=l[0]*l[0]+l[1]*l[1]-o*o,p=d*d-4*c*u;if(0>p)return[];var h=(-d+Math.sqrt(p))/(2*c),f=(-d-Math.sqrt(p))/(2*c),v=Math.min(h,f),g=Math.max(h,f),y=[];if(v>=0&&1>=v&&y.push(v),g>=0&&1>=g&&y.push(g),0===y.length)return[];var m=y[0]*s[0]+e,b=y[0]*s[1]+t;if(y.length>1){if(y[0]==y[1])return[m,b];var x=y[1]*s[0]+e,w=y[1]*s[1]+t;return[m,b,x,w]}return[m,b]},e.math.findCircleNearPoint=function(e,t,n,r,i){var a=r-e,o=i-t,s=Math.sqrt(a*a+o*o),u=a/s,l=o/s;return[e+u*n,t+l*n]},e.math.findMaxSqDistanceToOrigin=function(e){for(var t,n=1e-6,r=0;r<e.length/2;r++)t=e[2*r]*e[2*r]+e[2*r+1]*e[2*r+1],t>n&&(n=t);return n},e.math.finiteLinesIntersect=function(e,t,n,r,i,a,o,s,u){var l=(o-i)*(t-a)-(s-a)*(e-i),c=(n-e)*(t-a)-(r-t)*(e-i),d=(s-a)*(n-e)-(o-i)*(r-t);if(0!==d){var p=l/d,h=c/d;return p>=0&&1>=p&&h>=0&&1>=h?[e+p*(n-e),t+p*(r-t)]:u?[e+p*(n-e),t+p*(r-t)]:[]}return 0===l||0===c?[e,n,o].sort()[1]===o?[o,s]:[e,n,i].sort()[1]===i?[i,a]:[i,o,n].sort()[1]===n?[n,r]:[]:[]},e.math.boxIntersectEllipse=function(e,t,n,r,i,a,o,s,u){if(e>n){var l=e;e=n,n=l}if(t>r){var c=t;t=r,r=c}var d=[s-a/2-i,u],p=[s+a/2+i,u],h=[s,u-o/2-i],f=[s,u+o/2+i];return n<d[0]?!1:e>p[0]?!1:t>f[1]?!1:r<h[1]?!1:e<=p[0]&&p[0]<=n&&t<=p[1]&&p[1]<=r?!0:e<=d[0]&&d[0]<=n&&t<=d[1]&&d[1]<=r?!0:e<=h[0]&&h[0]<=n&&t<=h[1]&&h[1]<=r?!0:e<=f[0]&&f[0]<=n&&t<=f[1]&&f[1]<=r?!0:(e=(e-s)/(a/2+i),n=(n-s)/(a/2+i),t=(t-u)/(o/2+i),r=(r-u)/(o/2+i),1>=e*e+t*t?!0:1>=n*n+t*t?!0:1>=n*n+r*r?!0:1>=e*e+r*r?!0:!1)},e.math.boxIntersectPolygon=function(t,n,r,i,a,o,s,u,l,c,d){if(t>r){var p=t;t=r,r=p}if(n>i){var h=n;n=i,i=h}var f=new Array(a.length),v=Math.asin(c[1]/Math.sqrt(c[0]*c[0]+c[1]*c[1]));c[0]<0?v+=Math.PI/2:v=-v-Math.PI/2;for(var g=Math.cos(-v),y=Math.sin(-v),m=0;m<f.length/2;m++)f[2*m]=o/2*(a[2*m]*g-a[2*m+1]*y),f[2*m+1]=s/2*(a[2*m+1]*g+a[2*m]*y),f[2*m]+=u,f[2*m+1]+=l;for(var b=f[0],x=f[0],w=f[1],_=f[1],m=1;m<f.length/2;m++)f[2*m]>x&&(x=f[2*m]),f[2*m]<b&&(b=f[2*m]),f[2*m+1]>_&&(_=f[2*m+1]),f[2*m+1]<w&&(w=f[2*m+1]);if(b-d>r)return!1;if(t>x+d)return!1;if(w-d>i)return!1;if(n>_+d)return!1;var E;if(d>0){var S=e.math.expandPolygon(f,-d);E=e.math.joinLines(S)}else E=f;for(var m=0;m<f.length/2;m++)if(t<=f[2*m]&&f[2*m]<=r&&n<=f[2*m+1]&&f[2*m+1]<=i)return!0;for(var m=0;m<E.length/2;m++){var k,P,C=E[2*m],D=E[2*m+1];if(m<E.length/2-1?(k=E[2*(m+1)],P=E[2*(m+1)+1]):(k=E[0],P=E[1]),e.math.finiteLinesIntersect(C,D,k,P,t,n,r,n,!1).length>0)return!0;if(e.math.finiteLinesIntersect(C,D,k,P,t,i,r,i,!1).length>0)return!0;if(e.math.finiteLinesIntersect(C,D,k,P,t,n,t,i,!1).length>0)return!0;if(e.math.finiteLinesIntersect(C,D,k,P,r,n,r,i,!1).length>0)return!0}return!1},e.math.polygonIntersectLine=function(t,n,r,i,a,o,s,u){for(var l,c=[],d=new Array(r.length),p=0;p<d.length/2;p++)d[2*p]=r[2*p]*o+i,d[2*p+1]=r[2*p+1]*s+a;var h;if(u>0){var f=e.math.expandPolygon(d,-u);h=e.math.joinLines(f)}else h=d;for(var v,g,y,m,p=0;p<h.length/2;p++)v=h[2*p],g=h[2*p+1],p<h.length/2-1?(y=h[2*(p+1)],m=h[2*(p+1)+1]):(y=h[0],m=h[1]),l=this.finiteLinesIntersect(t,n,i,a,v,g,y,m),0!==l.length&&c.push(l[0],l[1]);return c},e.math.shortenIntersection=function(e,t,n){var r=[e[0]-t[0],e[1]-t[1]],i=Math.sqrt(r[0]*r[0]+r[1]*r[1]),a=(i-n)/i;return 0>a&&(a=1e-5),[t[0]+a*r[0],t[1]+a*r[1]]},e.math.generateUnitNgonPointsFitToSquare=function(t,n){var r=e.math.generateUnitNgonPoints(t,n);return r=e.math.fitPolygonToSquare(r)},e.math.fitPolygonToSquare=function(e){for(var t,n,r=e.length/2,i=1/0,a=1/0,o=-1/0,s=-1/0,u=0;r>u;u++)t=e[2*u],n=e[2*u+1],i=Math.min(i,t),o=Math.max(o,t),a=Math.min(a,n),s=Math.max(s,n);for(var l=2/(o-i),c=2/(s-a),u=0;r>u;u++)t=e[2*u]=e[2*u]*l,n=e[2*u+1]=e[2*u+1]*c,i=Math.min(i,t),o=Math.max(o,t),a=Math.min(a,n),s=Math.max(s,n);if(-1>a)for(var u=0;r>u;u++)n=e[2*u+1]=e[2*u+1]+(-1-a);return e},e.math.generateUnitNgonPoints=function(e,t){var n=1/e*2*Math.PI,r=e%2===0?Math.PI/2+n/2:Math.PI/2;r+=t;for(var i,a,o,s=new Array(2*e),u=0;e>u;u++)i=u*n+r,a=s[2*u]=Math.cos(i),o=s[2*u+1]=Math.sin(-i);return s},e.math.getRoundRectangleRadius=function(e,t){return Math.min(e/4,t/4,8)}}(n),function(e){"use strict";function t(t,n,r){var i={};switch(i[n]=r,t){case"core":case"collection":e.fn[t](i)}if("layout"===t){for(var o=r.prototype,s=["stop"],u=0;u<s.length;u++){var l=s[u];o[l]=o[l]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this}),o.on=e.define.on({layout:!0}),o.one=e.define.on({layout:!0,unbindSelfOnTrigger:!0}),o.once=e.define.on({layout:!0,unbindAllBindersOnTrigger:!0}),o.off=e.define.off({layout:!0}),o.trigger=e.define.trigger({layout:!0}),o.bind=o.on,o.unbind=o.off}return e.util.setMap({map:a,keys:[t,n],value:r})}function n(t,n){return e.util.getMap({map:a,keys:[t,n]})}function r(t,n,r,i,a){return e.util.setMap({map:o,keys:[t,n,r,i],value:a})}function i(t,n,r,i){return e.util.getMap({map:o,keys:[t,n,r,i]})}var a={};e.extensions=a;var o={};e.modules=o,e.extension=function(){return 2==arguments.length?n.apply(this,arguments):3==arguments.length?t.apply(this,arguments):4==arguments.length?i.apply(this,arguments):5==arguments.length?r.apply(this,arguments):void e.util.error("Invalid extension access syntax")}}(n),function(e,t){"use strict";if(e){var r=function(e){var t=e[0]._cyreg=e[0]._cyreg||{};return t};e.fn.cytoscape=function(i){var a=e(this);if("get"===i)return r(a).cy;if(t.is.fn(i)){var o=i,s=r(a).cy;if(s&&s.isReady())s.trigger("ready",[],o);else{var u=r(a),l=u.readies=u.readies||[];l.push(o)}}else if(t.is.plainObject(i))return a.each(function(){var t=e.extend({},i,{container:e(this)[0]});n(t)})},e.cytoscape=n,null==e.fn.cy&&null==e.cy&&(e.fn.cy=e.fn.cytoscape,e.cy=e.cytoscape)}}("undefined"!=typeof jQuery?jQuery:null,n),function(e){"use strict";function t(){return!1}function n(){return!0}e.Event=function(r,i){return this instanceof e.Event?(r&&r.type?(this.originalEvent=r,this.type=r.type,this.isDefaultPrevented=r.defaultPrevented?n:t):this.type=r,i&&(this.type=void 0!==i.type?i.type:this.type,this.cy=i.cy,this.cyTarget=i.cyTarget,this.cyPosition=i.cyPosition,this.cyRenderedPosition=i.cyRenderedPosition,this.namespace=i.namespace,this.layout=i.layout,this.data=i.data),void(this.timeStamp=r&&r.timeStamp||+new Date)):new e.Event(r,i)},e.Event.prototype={preventDefault:function(){this.isDefaultPrevented=n;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=n;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=n,this.stopPropagation()},isDefaultPrevented:t,isPropagationStopped:t,isImmediatePropagationStopped:t}}(n),function(e){"use strict";e.define={data:function(t){var n={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,onSet:function(){},canSet:function(){return!0}};return t=e.util.extend({},n,t),function(n,r){var i=t,a=this,o=void 0!==a.length,s=o?a:[a],u=o?a[0]:a;if(e.is.string(n)){if(i.allowGetting&&void 0===r){var l;return u&&(l=u._private[i.field][n]),l}if(i.allowSetting&&void 0!==r){var c=!i.immutableKeys[n];if(c){for(var d=0,p=s.length;p>d;d++)i.canSet(s[d])&&(s[d]._private[i.field][n]=r);i.updateStyle&&a.updateStyle(),i.onSet(a),i.settingTriggersEvent&&a[i.triggerFnName](i.settingEvent)}}}else if(i.allowSetting&&e.is.plainObject(n)){var h,f,v=n;for(h in v){f=v[h];var c=!i.immutableKeys[h];if(c)for(var d=0,p=s.length;p>d;d++)i.canSet(s[d])&&(s[d]._private[i.field][h]=f)}i.updateStyle&&a.updateStyle(),i.onSet(a),i.settingTriggersEvent&&a[i.triggerFnName](i.settingEvent)}else if(i.allowBinding&&e.is.fn(n)){var g=n;a.bind(i.bindingEvent,g)}else if(i.allowGetting&&void 0===n){var l;return u&&(l=u._private[i.field]),l}return a}},removeData:function(t){var n={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return t=e.util.extend({},n,t),function(n){var r=t,i=this,a=void 0!==i.length,o=a?i:[i];if(e.is.string(n)){for(var s=n.split(/\s+/),u=s.length,l=0;u>l;l++){var c=s[l];if(!e.is.emptyString(c)){var d=!r.immutableKeys[c];if(d)for(var p=0,h=o.length;h>p;p++)o[p]._private[r.field][c]=void 0}}r.triggerEvent&&i[r.triggerFnName](r.event)}else if(void 0===n){for(var p=0,h=o.length;h>p;p++){var f=o[p]._private[r.field];for(var c in f){var v=!r.immutableKeys[c];v&&(f[c]=void 0)}}r.triggerEvent&&i[r.triggerFnName](r.event)}return i}},event:{regex:/(\w+)(\.\w+)?/,optionalTypeRegex:/(\w+)?(\.\w+)?/,falseCallback:function(){return!1}},on:function(t){var n={unbindSelfOnTrigger:!1,unbindAllBindersOnTrigger:!1};return t=e.util.extend({},n,t),function(n,r,i,a){var o=this,s=void 0!==o.length,u=s?o:[o],l=e.is.string(n),c=t;if(e.is.plainObject(r)?(a=i,i=r,r=void 0):(e.is.fn(r)||r===!1)&&(a=r,i=void 0,r=void 0),(e.is.fn(i)||i===!1)&&(a=i,i=void 0),!e.is.fn(a)&&a!==!1&&l)return o;if(l){var d={};d[n]=a,n=d}for(var p in n)if(a=n[p],a===!1&&(a=e.define.event.falseCallback),e.is.fn(a)){p=p.split(/\s+/);for(var h=0;h<p.length;h++){var f=p[h];if(!e.is.emptyString(f)){var v=f.match(e.define.event.regex);if(v)for(var g=v[1],y=v[2]?v[2]:void 0,m={callback:a,data:i,delegated:r?!0:!1,selector:r,selObj:new e.Selector(r),type:g,namespace:y,unbindSelfOnTrigger:c.unbindSelfOnTrigger,unbindAllBindersOnTrigger:c.unbindAllBindersOnTrigger,binders:u},b=0;b<u.length;b++)u[b]._private.listeners.push(m)}}}return o}},off:function(t){var n={};return t=e.util.extend({},n,t),function(t,n,r){var i=this,a=void 0!==i.length,o=a?i:[i],s=e.is.string(t);if(0===arguments.length){for(var u=0;u<o.length;u++)o[u]._private.listeners=[];return i}if((e.is.fn(n)||n===!1)&&(r=n,n=void 0),s){var l={};l[t]=r,t=l}for(var c in t){r=t[c],r===!1&&(r=e.define.event.falseCallback),c=c.split(/\s+/);for(var d=0;d<c.length;d++){var p=c[d];if(!e.is.emptyString(p)){var h=p.match(e.define.event.optionalTypeRegex);if(h)for(var f=h[1]?h[1]:void 0,v=h[2]?h[2]:void 0,u=0;u<o.length;u++)for(var g=o[u]._private.listeners,y=0;y<g.length;y++){var m=g[y],b=!v||v===m.namespace,x=!f||m.type===f,w=!r||r===m.callback,_=b&&x&&w;_&&(g.splice(y,1),y--)}}}}return i}},trigger:function(t){var n={};return t=e.util.extend({},n,t),function(n,r,i){var a=this,o=void 0!==a.length,s=o?a:[a],u=e.is.string(n),l=e.is.plainObject(n),c=e.is.event(n),d=this._private.cy||this,p=d.hasCompoundNodes();if(u){var h=n.split(/\s+/);n=[];for(var f=0;f<h.length;f++){var v=h[f];if(!e.is.emptyString(v)){var g=v.match(e.define.event.regex),y=g[1],m=g[2]?g[2]:void 0;n.push({type:y,namespace:m})}}}else if(l){var b=n;n=[b]}r?e.is.array(r)||(r=[r]):r=[];for(var f=0;f<n.length;f++)for(var x=n[f],w=0;w<s.length;w++){var v,_=s[w],E=_._private.listeners,S=e.is.element(_),k=S||t.layout;if(c?(v=x,v.cyTarget=v.cyTarget||_,v.cy=v.cy||d):v=new e.Event(x,{cyTarget:_,cy:d,namespace:x.namespace}),x.layout&&(v.layout=x.layout),t.layout&&(v.layout=_),v.cyPosition){var P=v.cyPosition,C=d.zoom(),D=d.pan();v.cyRenderedPosition={x:P.x*C+D.x,y:P.y*C+D.y}}i&&(E=[{namespace:v.namespace,type:v.type,callback:i}]);for(var T=0;T<E.length;T++){var N=E[T],M=!N.namespace||N.namespace===v.namespace,B=N.type===v.type,I=N.delegated?_!==v.cyTarget&&e.is.element(v.cyTarget)&&N.selObj.matches(v.cyTarget):!0,A=M&&B&&I;if(A){var L=[v];if(L=L.concat(r),v.data=N.data?N.data:void 0,(N.unbindSelfOnTrigger||N.unbindAllBindersOnTrigger)&&(E.splice(T,1),T--),N.unbindAllBindersOnTrigger)for(var O=N.binders,z=0;z<O.length;z++){var j=O[z];if(j&&j!==_)for(var R=j._private.listeners,Y=0;Y<R.length;Y++){var X=R[Y];X===N&&(R.splice(Y,1),Y--)}}var V=N.delegated?v.cyTarget:_,q=N.callback.apply(V,L);(q===!1||v.isPropagationStopped())&&(k=!1,q===!1&&(v.stopPropagation(),v.preventDefault()))}}if(k){var F=p?_._private.parent:null,Z=null!=F&&0!==F.length;Z?(F=F[0],F.trigger(v)):d.trigger(v)}}return a}},animated:function(t){var n={};return t=e.util.extend({},n,t),function(){var e=this,t=void 0!==e.length,n=t?e:[e],r=this._private.cy||this;if(!r.styleEnabled())return!1;var i=n[0];return i?i._private.animation.current.length>0:void 0}},clearQueue:function(t){var n={};return t=e.util.extend({},n,t),function(){var e=this,t=void 0!==e.length,n=t?e:[e],r=this._private.cy||this;if(!r.styleEnabled())return this;for(var i=0;i<n.length;i++){var a=n[i];a._private.animation.queue=[]}return this}},delay:function(t){var n={};return t=e.util.extend({},n,t),function(e,t){var n=this._private.cy||this;return n.styleEnabled()?(this.animate({delay:e},{duration:e,complete:t}),this):this}},animate:function(t){var n={};return t=e.util.extend({},n,t),function(e,t){var n=this,r=void 0!==n.length,i=r?n:[n],a=this._private.cy||this,o=!r,s=!o;
if(!a.styleEnabled())return this;var u,l=+new Date,c=a.style();switch(void 0===t&&(t={}),void 0===t.duration&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200}var d=!0;if(e)for(var p in e){d=!1;break}if(d)return this;if(e.css&&s&&(e.css=c.getValueStyle(e.css,{array:!0})),e.renderedPosition&&s){var h=e.renderedPosition,f=a.pan(),v=a.zoom();e.position={x:(h.x-f.x)/v,y:(h.y-f.y)/v}}if(e.panBy&&o){var g=e.panBy,y=a.pan();e.pan={x:y.x+g.x,y:y.y+g.y}}var m=e.center||e.centre;if(m&&o){var b=a.getCenterPan(m.eles,e.zoom);b&&(e.pan=b)}if(e.fit&&o){var x=e.fit,w=a.getFitViewport(x.eles||x.boundingBox,x.padding);w&&(e.pan=w.pan,e.zoom=w.zoom)}for(var p=0;p<i.length;p++){var _=i[p];u=_.animated()&&(void 0===t.queue||t.queue)?_._private.animation.queue:_._private.animation.current,u.push({properties:e,duration:t.duration,params:t,callTime:l})}return s&&a.addToAnimationPool(this),this}},stop:function(t){var n={};return t=e.util.extend({},n,t),function(e,t){var n=this,r=void 0!==n.length,i=r?n:[n],a=this._private.cy||this;if(!a.styleEnabled())return this;for(var o=0;o<i.length;o++){for(var s=i[o],u=s._private.animation.current,l=0;l<u.length;l++){var c=u[l];t&&(c.duration=0)}e&&(s._private.animation.queue=[]),t||(s._private.animation.current=[])}return a.notify({collection:this,type:"draw"}),this}}}}(n),function(e){"use strict";e.fn.selector=function(t){for(var n in t){var r=t[n];e.Selector.prototype[n]=r}},e.Selector=function(t,n){if(!(this instanceof e.Selector))return new e.Selector(t,n);void 0===n&&void 0!==t&&(n=t,t=void 0);var r=this;if(r._private={selectorText:null,invalid:!0},!n||e.is.string(n)&&n.match(/^\s*$/))null==t?r.length=0:(r[0]=o(),r[0].group=t,r.length=1);else if(e.is.element(n)){var i=new e.Collection(r.cy(),[n]);r[0]=o(),r[0].collection=i,r.length=1}else if(e.is.collection(n))r[0]=o(),r[0].collection=n,r.length=1;else if(e.is.fn(n))r[0]=o(),r[0].filter=n,r.length=1;else{if(!e.is.string(n))return void e.util.error("A selector must be created from a string; found "+n);var a=null,o=function(){return{classes:[],colonSelectors:[],data:[],group:null,ids:[],meta:[],collection:null,filter:null,parent:null,ancestor:null,subject:null,child:null,descendant:null}},s={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:'"(?:\\\\"|[^"])+"|'+"'(?:\\\\'|[^'])+'",number:e.util.regex.number,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$"};s.variable="(?:[\\w-]|(?:\\\\"+s.metaChar+"))+",s.value=s.string+"|"+s.number,s.className=s.variable,s.id=s.variable;for(var u=function(e){return e.replace(new RegExp("\\\\("+s.metaChar+")","g"),function(e,t){return t})},l=s.comparatorOp.split("|"),c=0;c<l.length;c++){var d=l[c];s.comparatorOp+="|@"+d}for(var l=s.comparatorOp.split("|"),c=0;c<l.length;c++){var d=l[c];d.indexOf("!")>=0||"="!==d&&(s.comparatorOp+="|\\!"+d)}var p={group:{query:!0,regex:"(node|edge|\\*)",populate:function(e){this.group="*"==e?e:e+"s"}},state:{query:!0,regex:"(:selected|:unselected|:locked|:unlocked|:visible|:hidden|:transparent|:grabbed|:free|:removed|:inside|:grabbable|:ungrabbable|:animated|:unanimated|:selectable|:unselectable|:orphan|:nonorphan|:parent|:child|:loop|:simple|:active|:inactive|:touch)",populate:function(e){this.colonSelectors.push(e)}},id:{query:!0,regex:"\\#("+s.id+")",populate:function(e){this.ids.push(u(e))}},className:{query:!0,regex:"\\.("+s.className+")",populate:function(e){this.classes.push(u(e))}},dataExists:{query:!0,regex:"\\[\\s*("+s.variable+")\\s*\\]",populate:function(e){this.data.push({field:u(e)})}},dataCompare:{query:!0,regex:"\\[\\s*("+s.variable+")\\s*("+s.comparatorOp+")\\s*("+s.value+")\\s*\\]",populate:function(e,t,n){var r=null!=new RegExp("^"+s.string+"$").exec(n);n=r?n.substring(1,n.length-1):parseFloat(n),this.data.push({field:u(e),operator:t,value:n})}},dataBool:{query:!0,regex:"\\[\\s*("+s.boolOp+")\\s*("+s.variable+")\\s*\\]",populate:function(e,t){this.data.push({field:u(t),operator:e})}},metaCompare:{query:!0,regex:"\\[\\[\\s*("+s.meta+")\\s*("+s.comparatorOp+")\\s*("+s.number+")\\s*\\]\\]",populate:function(e,t,n){this.meta.push({field:u(e),operator:t,value:parseFloat(n)})}},nextQuery:{separator:!0,regex:s.separator,populate:function(){r[++c]=o(),a=null}},child:{separator:!0,regex:s.child,populate:function(){var e=o();e.parent=this,e.subject=a,r[c]=e}},descendant:{separator:!0,regex:s.descendant,populate:function(){var e=o();e.ancestor=this,e.subject=a,r[c]=e}},subject:{modifier:!0,regex:s.subject,populate:function(){return null!=a&&this.subject!=this?(e.util.error("Redefinition of subject in selector `"+n+"`"),!1):(a=this,void(this.subject=this))}}},h=0;for(var f in p)p[h]=p[f],p[h].name=f,h++;p.length=h,r._private.selectorText=n;var v=n,c=0,g=function(t){for(var n,r,i,a=0;a<p.length;a++){var o=p[a],s=o.name;if(!e.is.fn(t)||t(s,o)){var u=v.match(new RegExp("^"+o.regex));if(null!=u){r=u,n=o,i=s;var l=u[0];v=v.substring(l.length);break}}}return{expr:n,match:r,name:i}},y=function(){var e=v.match(/^\s+/);if(e){var t=e[0];v=v.substring(t.length)}};for(r[0]=o(),y();;){var m=g();if(null==m.expr)return void e.util.error("The selector `"+n+"`is invalid");for(var b=[],h=1;h<m.match.length;h++)b.push(m.match[h]);var x=m.expr.populate.apply(r[c],b);if(x===!1)return;if(v.match(/^\s*$/))break}for(r.length=c+1,h=0;h<r.length;h++){var w=r[h];if(null!=w.subject){for(;w.subject!=w;)if(null!=w.parent){var _=w.parent,E=w;E.parent=null,_.child=E,w=_}else{if(null==w.ancestor){e.util.error("When adjusting references for the selector `"+w+"`, neither parent nor ancestor was found");break}var S=w.ancestor,k=w;k.ancestor=null,S.descendant=k,w=S}r[h]=w.subject}}if(null!=t)for(var h=0;h<r.length;h++){if(null!=r[h].group&&r[h].group!=t)return void e.util.error("Group `"+r[h].group+"` conflicts with implicit group `"+t+"` in selector `"+n+"`");r[h].group=t}}r._private.invalid=!1},e.selfn=e.Selector.prototype,e.selfn.size=function(){return this.length},e.selfn.eq=function(e){return this[e]},e.selfn.find=function(){};var t=function(n,r){if(null!=n.group&&"*"!=n.group&&n.group!=r._private.group)return!1;for(var i=r.cy(),a=!0,o=0;o<n.colonSelectors.length;o++){var s=n.colonSelectors[o];switch(s){case":selected":a=r.selected();break;case":unselected":a=!r.selected();break;case":selectable":a=r.selectable();break;case":unselectable":a=!r.selectable();break;case":locked":a=r.locked();break;case":unlocked":a=!r.locked();break;case":visible":a=r.visible();break;case":hidden":a=!r.visible();break;case":transparent":a=r.transparent();break;case":grabbed":a=r.grabbed();break;case":free":a=!r.grabbed();break;case":removed":a=r.removed();break;case":inside":a=!r.removed();break;case":grabbable":a=r.grabbable();break;case":ungrabbable":a=!r.grabbable();break;case":animated":a=r.animated();break;case":unanimated":a=!r.animated();break;case":parent":a=r.isNode()&&r.children().nonempty();break;case":child":case":nonorphan":a=r.isNode()&&r.parent().nonempty();break;case":orphan":a=r.isNode()&&r.parent().empty();break;case":loop":a=r.isEdge()&&r.data("source")===r.data("target");break;case":simple":a=r.isEdge()&&r.data("source")!==r.data("target");break;case":active":a=r.active();break;case":inactive":a=!r.active();break;case":touch":a=e.is.touch()}if(!a)break}if(!a)return!1;for(var u=!0,o=0;o<n.ids.length;o++){var l=n.ids[o],c=r._private.data.id;if(u=u&&l==c,!u)break}if(!u)return!1;for(var d=!0,o=0;o<n.classes.length;o++){var p=n.classes[o];if(d=d&&r.hasClass(p),!d)break}if(!d)return!1;var h=function(t){for(var r=!0,i=0;i<n[t.name].length;i++){var a,o=n[t.name][i],s=o.operator,u=o.value,l=o.field;if(null!=s&&null!=u){var c=t.fieldValue(l),d=e.is.string(c)||e.is.number(c)?""+c:"",p=""+u,h=!1;s.indexOf("@")>=0&&(d=d.toLowerCase(),p=p.toLowerCase(),s=s.replace("@",""),h=!0);var f=!1,v=!1;switch(s.indexOf("!")>=0&&(s=s.replace("!",""),f=!0),h&&(u=p.toLowerCase(),c=d.toLowerCase()),s){case"*=":a=d.search(p)>=0;break;case"$=":a=null!=new RegExp(p+"$").exec(d);break;case"^=":a=null!=new RegExp("^"+p).exec(d);break;case"=":a=c===u;break;case"!=":a=c!==u;break;case">":a=f?u>=c:c>u,v=!0;break;case">=":a=f?u>c:c>=u,v=!0;break;case"<":a=f?c>=u:u>c,v=!0;break;case"<=":a=f?c>u:u>=c,v=!0;break;default:a=!1}}else if(null!=s)switch(s){case"?":a=t.fieldTruthy(l);break;case"!":a=!t.fieldTruthy(l);break;case"^":a=t.fieldUndefined(l)}else a=!t.fieldUndefined(l);if(f&&!v&&(a=!a,v=!0),!a){r=!1;break}}return r},f=h({name:"data",fieldValue:function(e){return r._private.data[e]},fieldRef:function(e){return"element._private.data."+e},fieldUndefined:function(e){return void 0===r._private.data[e]},fieldTruthy:function(e){return r._private.data[e]?!0:!1}});if(!f)return!1;var v=h({name:"meta",fieldValue:function(e){return r[e]()},fieldRef:function(e){return"element."+e+"()"},fieldUndefined:function(e){return null==r[e]()},fieldTruthy:function(e){return r[e]()?!0:!1}});if(!v)return!1;if(null!=n.collection){var g=null!=n.collection._private.ids[r.id()];if(!g)return!1}if(null!=n.filter&&0===r.collection().filter(n.filter).size())return!1;var y=function(e,n){if(null!=e){var r=!1;if(!i.hasCompoundNodes())return!1;n=n();for(var a=0;a<n.length;a++)if(t(e,n[a])){r=!0;break}return r}return!0};return y(n.parent,function(){return r.parent()})&&y(n.ancestor,function(){return r.parents()})&&y(n.child,function(){return r.children()})&&y(n.descendant,function(){return r.descendants()})?!0:!1};e.selfn.filter=function(n){var r=this,i=n.cy();if(r._private.invalid)return new e.Collection(i);var a=function(e,n){for(var i=0;i<r.length;i++){var a=r[i];if(t(a,n))return!0}return!1};null==r._private.selectorText&&(a=function(){return!0});var o=n.filter(a);return o},e.selfn.matches=function(e){var n=this;if(n._private.invalid)return!1;for(var r=0;r<n.length;r++){var i=n[r];if(t(i,e))return!0}return!1},e.selfn.toString=e.selfn.selector=function(){for(var t="",n=function(t,n){return e.is.string(t)?n?'"'+t+'"':t:""},r=function(e){var t="";e.subject===e&&(t+="$");var a=n(e.group);t+=a.substring(0,a.length-1);for(var o=0;o<e.data.length;o++){var s=e.data[o];t+=s.value?"["+s.field+n(s.operator)+n(s.value,!0)+"]":"["+n(s.operator)+s.field+"]"}for(var o=0;o<e.meta.length;o++){var u=e.meta[o];t+="[["+u.field+n(u.operator)+n(u.value,!0)+"]]"}for(var o=0;o<e.colonSelectors.length;o++){var l=e.colonSelectors[i];t+=l}for(var o=0;o<e.ids.length;o++){var l="#"+e.ids[i];t+=l}for(var o=0;o<e.classes.length;o++){var l="."+e.classes[i];t+=l}return null!=e.parent&&(t=r(e.parent)+" > "+t),null!=e.ancestor&&(t=r(e.ancestor)+" "+t),null!=e.child&&(t+=" > "+r(e.child)),null!=e.descendant&&(t+=" "+r(e.descendant)),t},i=0;i<this.length;i++){var a=this[i];t+=r(a),this.length>1&&i<this.length-1&&(t+=", ")}return t}}(n),function(e){"use strict";e.Style=function(t){return this instanceof e.Style?e.is.core(t)?(this._private={cy:t,coreStyle:{},newStyle:!0},this.length=0,void this.addDefaultStylesheet()):void e.util.error("A style must have a core reference"):new e.Style(t)},e.style=e.Style,e.styfn=e.Style.prototype,e.fn.style=function(t){for(var n in t){var r=t[n];e.Style.prototype=r}},function(){var t=e.util.regex.number,n=e.util.regex.rgbaNoBackRefs,r=e.util.regex.hslaNoBackRefs,i=e.util.regex.hex3,a=e.util.regex.hex6,o=function(e){return"^"+e+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},s=function(e){return"^"+e+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+t+"|\\w+|"+n+"|"+r+"|"+i+"|"+a+")\\s*\\,\\s*("+t+"|\\w+|"+n+"|"+r+"|"+i+"|"+a+")\\)$"};e.style.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%"},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},autoSize:{number:!0,min:0,enums:["auto"]},number:{number:!0},size:{number:!0,min:0},bgSize:{number:!0,min:0,allowPercent:!0},bgPos:{number:!0,allowPercent:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"]},bgFit:{enums:["none","contain","cover"]},bgClip:{enums:["none","node"]},color:{color:!0},lineStyle:{enums:["solid","dotted","dashed"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack"]},fontFamily:{regex:"^([\\w- ]+(?:\\s*,\\s*[\\w- ]+)*)$"},fontVariant:{enums:["small-caps","normal"]},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},nodeShape:{enums:["rectangle","roundrectangle","ellipse","triangle","square","pentagon","hexagon","heptagon","octagon","star"]},arrowShape:{enums:["tee","triangle","triangle-tee","triangle-backcurve","half-triangle-overshot","square","circle","diamond","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},text:{string:!0},data:{mapping:!0,regex:o("data")},layoutData:{mapping:!0,regex:o("layoutData")},mapData:{mapping:!0,regex:s("mapData")},mapLayoutData:{mapping:!0,regex:s("mapLayoutData")},url:{regex:"^url\\s*\\(\\s*([^\\s]+)\\s*\\s*\\)|none|(.+)$"},propList:{propList:!0},angle:{number:!0,units:"deg|rad"}};var u=e.style.types,l=e.style.properties=[{name:"text-valign",type:u.valign},{name:"text-halign",type:u.halign},{name:"color",type:u.color},{name:"content",type:u.text},{name:"text-outline-color",type:u.color},{name:"text-outline-width",type:u.size},{name:"text-outline-opacity",type:u.zeroOneNumber},{name:"text-opacity",type:u.zeroOneNumber},{name:"text-transform",type:u.textTransform},{name:"font-family",type:u.fontFamily},{name:"font-style",type:u.fontStyle},{name:"font-weight",type:u.fontWeight},{name:"font-size",type:u.size},{name:"min-zoomed-font-size",type:u.size},{name:"display",type:u.display},{name:"visibility",type:u.visibility},{name:"opacity",type:u.zeroOneNumber},{name:"z-index",type:u.nonNegativeInt},{name:"overlay-padding",type:u.size},{name:"overlay-color",type:u.color},{name:"overlay-opacity",type:u.zeroOneNumber},{name:"transition-property",type:u.propList},{name:"transition-duration",type:u.time},{name:"transition-delay",type:u.time},{name:"height",type:u.autoSize},{name:"width",type:u.autoSize},{name:"shape",type:u.nodeShape},{name:"background-color",type:u.color},{name:"background-opacity",type:u.zeroOneNumber},{name:"background-blacken",type:u.nOneOneNumber},{name:"border-color",type:u.color},{name:"border-opacity",type:u.zeroOneNumber},{name:"border-width",type:u.size},{name:"border-style",type:u.borderStyle},{name:"background-image",type:u.url},{name:"background-image-opacity",type:u.zeroOneNumber},{name:"background-position-x",type:u.bgPos},{name:"background-position-y",type:u.bgPos},{name:"background-repeat",type:u.bgRepeat},{name:"background-fit",type:u.bgFit},{name:"background-clip",type:u.bgClip},{name:"padding-left",type:u.size},{name:"padding-right",type:u.size},{name:"padding-top",type:u.size},{name:"padding-bottom",type:u.size},{name:"position",type:u.position},{name:"line-style",type:u.lineStyle},{name:"line-color",type:u.color},{name:"control-point-step-size",type:u.size},{name:"control-point-distance",type:u.number},{name:"control-point-weight",type:u.zeroOneNumber},{name:"curve-style",type:u.curveStyle},{name:"haystack-radius",type:u.zeroOneNumber},{name:"source-arrow-shape",type:u.arrowShape},{name:"target-arrow-shape",type:u.arrowShape},{name:"mid-source-arrow-shape",type:u.arrowShape},{name:"mid-target-arrow-shape",type:u.arrowShape},{name:"source-arrow-color",type:u.color},{name:"target-arrow-color",type:u.color},{name:"mid-source-arrow-color",type:u.color},{name:"mid-target-arrow-color",type:u.color},{name:"source-arrow-fill",type:u.arrowFill},{name:"target-arrow-fill",type:u.arrowFill},{name:"mid-source-arrow-fill",type:u.arrowFill},{name:"mid-target-arrow-fill",type:u.arrowFill},{name:"selection-box-color",type:u.color},{name:"selection-box-opacity",type:u.zeroOneNumber},{name:"selection-box-border-color",type:u.color},{name:"selection-box-border-width",type:u.size},{name:"active-bg-color",type:u.color},{name:"active-bg-opacity",type:u.zeroOneNumber},{name:"active-bg-size",type:u.size},{name:"outside-texture-bg-color",type:u.color},{name:"outside-texture-bg-opacity",type:u.zeroOneNumber}];e.style.pieBackgroundN=16,l.push({name:"pie-size",type:u.bgSize});for(var c=1;c<=e.style.pieBackgroundN;c++)l.push({name:"pie-"+c+"-background-color",type:u.color}),l.push({name:"pie-"+c+"-background-size",type:u.percent}),l.push({name:"pie-"+c+"-background-opacity",type:u.zeroOneNumber});for(var c=0;c<l.length;c++){var d=l[c];l[d.name]=d}}(),e.styfn.addDefaultStylesheet=function(){var t="Helvetica",n="normal",r="normal",i="#000",a="none",o=16;this.selector("node, edge").css({"text-valign":"top","text-halign":"center",color:i,"text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":a,"font-family":t,"font-style":n,"font-weight":r,"font-size":o,"min-zoomed-font-size":0,visibility:"visible",display:"element",opacity:1,"z-index":0,content:"","overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"transition-property":"none","transition-duration":0,"transition-delay":0,"background-blacken":0,"background-color":"#888","background-opacity":1,"background-image":"none","background-image-opacity":1,"background-position-x":"50%","background-position-y":"50%","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","padding-top":0,"padding-bottom":0,"padding-left":0,"padding-right":0,position:"origin","pie-size":"100%","pie-1-background-color":"black","pie-2-background-color":"black","pie-3-background-color":"black","pie-4-background-color":"black","pie-5-background-color":"black","pie-6-background-color":"black","pie-7-background-color":"black","pie-8-background-color":"black","pie-9-background-color":"black","pie-10-background-color":"black","pie-11-background-color":"black","pie-12-background-color":"black","pie-13-background-color":"black","pie-14-background-color":"black","pie-15-background-color":"black","pie-16-background-color":"black","pie-1-background-size":"0%","pie-2-background-size":"0%","pie-3-background-size":"0%","pie-4-background-size":"0%","pie-5-background-size":"0%","pie-6-background-size":"0%","pie-7-background-size":"0%","pie-8-background-size":"0%","pie-9-background-size":"0%","pie-10-background-size":"0%","pie-11-background-size":"0%","pie-12-background-size":"0%","pie-13-background-size":"0%","pie-14-background-size":"0%","pie-15-background-size":"0%","pie-16-background-size":"0%","pie-1-background-opacity":1,"pie-2-background-opacity":1,"pie-3-background-opacity":1,"pie-4-background-opacity":1,"pie-5-background-opacity":1,"pie-6-background-opacity":1,"pie-7-background-opacity":1,"pie-8-background-opacity":1,"pie-9-background-opacity":1,"pie-10-background-opacity":1,"pie-11-background-opacity":1,"pie-12-background-opacity":1,"pie-13-background-opacity":1,"pie-14-background-opacity":1,"pie-15-background-opacity":1,"pie-16-background-opacity":1,"source-arrow-shape":"none","mid-source-arrow-shape":"none","target-arrow-shape":"none","mid-target-arrow-shape":"none","source-arrow-color":"#ddd","mid-source-arrow-color":"#ddd","target-arrow-color":"#ddd","mid-target-arrow-color":"#ddd","source-arrow-fill":"filled","mid-source-arrow-fill":"filled","target-arrow-fill":"filled","mid-target-arrow-fill":"filled","line-style":"solid","line-color":"#ddd","control-point-step-size":40,"control-point-weight":.5,"curve-style":"bezier","haystack-radius":.8}).selector("$node > node").css({width:"auto",height:"auto",shape:"rectangle","background-opacity":.5,"padding-top":10,"padding-right":10,"padding-left":10,"padding-bottom":10}).selector("edge").css({width:1}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}).selector("core").css({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":e.is.touch()?40:15,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125}),this.defaultLength=this.length},e.styfn.clear=function(){for(var e=0;e<this.length;e++)this[e]=void 0;return this.length=0,this._private.newStyle=!0,this},e.styfn.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},e.styfn.core=function(){return this._private.coreStyle},e.styfn.parse=function(t,n,r,i){t=e.util.camel2dash(t);var a=e.style.properties[t],o=n;if(!a)return null;if(void 0===n||null===n)return null;var s=e.is.string(n);s&&(n=e.util.trim(n));var u=a.type;if(!u)return null;if(r&&(""===n||null===n))return{name:t,value:n,bypass:!0,deleteBypass:!0};var l,c,d,p;if(!s||i);else{if((l=new RegExp(e.style.types.data.regex).exec(n))||(d=new RegExp(e.style.types.layoutData.regex).exec(n))){if(r)return!1;var h=void 0!==d;return l=l||d,{name:t,value:l,strValue:""+n,mapped:h?e.style.types.layoutData:e.style.types.data,field:l[1],bypass:r,hasPie:t.match(/pie-(\d+)-background-size/)}}if((c=new RegExp(e.style.types.mapData.regex).exec(n))||(p=new RegExp(e.style.types.mapLayoutData.regex).exec(n))){if(r)return!1;var h=void 0!==p;if(c=c||p,!u.color&&!u.number)return!1;var f=this.parse(t,c[4]);if(!f||f.mapped)return!1;var v=this.parse(t,c[5]);if(!v||v.mapped)return!1;if(f.value===v.value)return!1;if(u.color){var g=f.value,y=v.value,m=!(g[0]!==y[0]||g[1]!==y[1]||g[2]!==y[2]||g[3]!==y[3]&&(null!=g[3]&&1!==g[3]||null!=y[3]&&1!==y[3]));if(m)return!1}return{name:t,value:c,strValue:""+n,mapped:h?e.style.types.mapLayoutData:e.style.types.mapData,field:c[1],fieldMin:parseFloat(c[2]),fieldMax:parseFloat(c[3]),valueMin:f.value,valueMax:v.value,bypass:r,hasPie:t.match(/pie-(\d+)-background-size/)}}}if(u.number){var b,x="px";if(u.units&&(b=u.units),u.implicitUnits&&(x=u.implicitUnits),!u.unitless)if(s){var w="px|em"+(u.allowPercent?"|\\%":"");b&&(w=b);var _=n.match("^("+e.util.regex.number+")("+w+")?$");_&&(n=_[1],b=_[2]||x)}else(!b||u.implicitUnits)&&(b=x);if(n=parseFloat(n),isNaN(n)&&void 0===u.enums)return null;if(isNaN(n)&&void 0!==u.enums){n=o;for(var E=0;E<u.enums.length;E++){var S=u.enums[E];if(S===n)return{name:t,value:n,strValue:""+n,bypass:r}}return null}if(u.integer&&!e.is.integer(n))return null;if(void 0!==u.min&&n<u.min||void 0!==u.max&&n>u.max)return null;var k={name:t,value:n,strValue:""+n+(b?b:""),units:b,bypass:r,hasPie:t.match(/pie-(\d+)-background-size/)&&null!=n&&0!==n&&""!==n};return u.unitless||"px"!==b&&"em"!==b||(k.pxValue="px"!==b&&b?this.getEmSizeInPixels()*n:n),("ms"===b||"s"===b)&&(k.msValue="ms"===b?n:1e3*n),k}if(u.propList){var P=[],C=""+n;if("none"===C);else{for(var D=C.split(","),E=0;E<D.length;E++){var T=e.util.trim(D[E]);e.style.properties[T]&&P.push(T)}if(0===P.length)return null}return{name:t,value:P,strValue:0===P.length?"none":P.join(", "),bypass:r}}if(u.color){var N=e.util.color2tuple(n);return N?{name:t,value:N,strValue:""+n,bypass:r}:null}if(u.enums){for(var E=0;E<u.enums.length;E++){var S=u.enums[E];if(S===n)return{name:t,value:n,strValue:""+n,bypass:r}}return null}if(u.regex){var M=new RegExp(u.regex),B=M.exec(n);return B?{name:t,value:B,strValue:""+n,bypass:r}:null}return u.string?{name:t,value:n,strValue:""+n,bypass:r}:null},e.styfn.selector=function(t){var n="core"===t?null:new e.Selector(t),r=this.length++;return this[r]={selector:n,properties:[],mappedProperties:[],index:r},this},e.styfn.css=function(){var t=arguments;switch(t.length){case 1:for(var n=t[0],r=0;r<e.style.properties.length;r++){var i=e.style.properties[r],a=n[i.name];void 0===a&&(a=n[e.util.dash2camel(i.name)]),void 0!==a&&this.cssRule(i.name,a)}break;case 2:this.cssRule(t[0],t[1])}return this},e.styfn.cssRule=function(e,t){var n=this.parse(e,t);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.hasPie&&(this._private.hasPie=!0),n.mapped&&this[r].mappedProperties.push(n);var i=!this[r].selector;i&&(this._private.coreStyle[n.name]=n)}return this}}(n),function(e){"use strict";e.styfn.apply=function(e){var t=this;t._private.newStyle&&(this._private.contextStyles={},this._private.propDiffs={});for(var n=0;n<e.length;n++){var r=e[n],i=t.getContextMeta(r),a=t.getContextStyle(i),o=t.applyContextStyle(i,a,r);t.updateTransitions(r,o.diffProps),t.updateStyleHints(r)}t._private.newStyle=!1},e.styfn.getPropertiesDiff=function(e,t){var n=this,r=n._private.propDiffs=n._private.propDiffs||{},i=e+"-"+t,a=r[i];if(a)return a;for(var o=[],s={},u=0;u<n.length;u++){var l=n[u],c="t"===e[u],d="t"===t[u],p=c!==d,h=l.mappedProperties.length>0;if(p||h){var f;p&&h?f=l.properties:p?f=l.properties:h&&(f=l.mappedProperties);for(var v=0;v<f.length;v++){for(var g=f[v],y=g.name,m=!1,b=u+1;b<n.length;b++){var x=n[b],w="t"===t[b];if(w&&(m=null!=x.properties[g.name]))break}s[y]||m||(s[y]=!0,o.push(y))}}}return r[i]=o,o},e.styfn.getContextMeta=function(e){var t,n=this,r="",i=e._private.styleCxtKey||"";n._private.newStyle&&(i="");for(var a=0;a<n.length;a++){var o=n[a],s=o.selector&&o.selector.matches(e);r+=s?"t":"f"}return t=n.getPropertiesDiff(i,r),e._private.styleCxtKey=r,{key:r,diffPropNames:t}},e.styfn.getContextStyle=function(e){var t=e.key,n=this,r=this._private.contextStyles=this._private.contextStyles||{};if(r[t])return r[t];for(var i={_private:{key:t}},a=0;a<n.length;a++){var o=n[a],s="t"===t[a];if(s)for(var u=0;u<o.properties.length;u++){var l=o.properties[u],c=i[l.name]=l;c.context=o}}return r[t]=i,i},e.styfn.applyContextStyle=function(e,t,n){for(var r=this,i=e.diffPropNames,a={},o=0;o<i.length;o++){var s=i[o],u=t[s],l=n._private.style[s];if(u&&l!==u){var c=a[s]={prev:l};r.applyParsedProperty(n,u),c.next=n._private.style[s],c.next&&c.next.bypass&&(c.next=c.next.bypassed)}}return{diffProps:a}},e.styfn.updateStyleHints=function(t){var n=t._private,r=this,i=n.style,a=!1;if("nodes"===n.group&&r._private.hasPie)for(var o=1;o<=e.style.pieBackgroundN;o++){var s=n.style["pie-"+o+"-background-size"].value;if(s>0){a=!0;break}}n.hasPie=a;var u=i["text-transform"].strValue,l=i.content.strValue,c=i["font-style"].strValue,s=i["font-size"].pxValue+"px",d=i["font-family"].strValue,p=i["font-weight"].strValue,h=i["text-valign"].strValue,f=i["text-valign"].strValue,v=i["text-outline-width"].pxValue;n.labelKey=c+"$"+s+"$"+d+"$"+p+"$"+l+"$"+u+"$"+h+"$"+f+"$"+v,n.fontKey=c+"$"+p+"$"+s+"$"+d;var g=i.width.pxValue,y=i.height.pxValue,m=i["border-width"].pxValue;if(n.boundingBoxKey=g+"$"+y+"$"+m,"edges"===t._private.group){var b=i["control-point-step-size"].pxValue,x=i["control-point-distance"]?i["control-point-distance"].pxValue:void 0,w=i["control-point-weight"].value,_=i["curve-style"].strValue;n.boundingBoxKey+="$"+b+"$"+x+"$"+w+"$"+_}n.styleKey=Date.now()},e.styfn.applyParsedProperty=function(t,n){var r,i,a=n,o=t._private.style,s=e.style.properties[a.name].type,u=a.bypass,l=o[a.name],c=l&&l.bypass;if(("height"===n.name||"width"===n.name)&&"auto"===n.value&&t.isNode()&&!t.isParent())return!1;if(u&&a.deleteBypass){var d=o[a.name];return d?d.bypass&&d.bypassed?(o[a.name]=d.bypassed,!0):!1:!0}var p=function(){e.util.error("Do not assign mappings to elements without corresponding data (e.g. ele `"+t.id()+"` for property `"+a.name+"` with data field `"+a.field+"`); try a `["+a.field+"]` selector to limit scope to elements with `"+a.field+"` defined")};switch(a.mapped){case e.style.types.mapData:case e.style.types.mapLayoutData:for(var h=a.mapped===e.style.types.mapLayoutData,f=a.field.split("."),r=h?t._private.layoutData:t._private.data,v=0;v<f.length&&r;v++){var g=f[v];r=r[g]}var y;if(y=e.is.number(r)?(r-a.fieldMin)/(a.fieldMax-a.fieldMin):0,0>y?y=0:y>1&&(y=1),s.color){var m=a.valueMin[0],b=a.valueMax[0],x=a.valueMin[1],w=a.valueMax[1],_=a.valueMin[2],E=a.valueMax[2],S=null==a.valueMin[3]?1:a.valueMin[3],k=null==a.valueMax[3]?1:a.valueMax[3],P=[Math.round(m+(b-m)*y),Math.round(x+(w-x)*y),Math.round(_+(E-_)*y),Math.round(S+(k-S)*y)];i={bypass:a.bypass,name:a.name,value:P,strValue:"rgb("+P[0]+", "+P[1]+", "+P[2]+")"}}else{if(!s.number)return!1;var C=a.valueMin+(a.valueMax-a.valueMin)*y;i=this.parse(a.name,C,a.bypass,!0)}i||(i=this.parse(a.name,l.strValue,a.bypass,!0)),i||p(),i.mapping=a,a=i;break;case e.style.types.data:case e.style.types.layoutData:for(var h=a.mapped===e.style.types.layoutData,f=a.field.split("."),r=h?t._private.layoutData:t._private.data,v=0;v<f.length&&r;v++){var g=f[v];r=r[g]}if(i=this.parse(a.name,r,a.bypass,!0),!i){var D=l?l.strValue:"";i=this.parse(a.name,D,a.bypass,!0)}i||p(),i.mapping=a,a=i;break;case void 0:break;default:return!1}return u?(a.bypassed=c?l.bypassed:l,o[a.name]=a):c?l.bypassed=a:o[a.name]=a,!0},e.styfn.update=function(){var e=this._private.cy,t=e.elements();t.updateStyle()},e.styfn.updateMappers=function(t){for(var n=0;n<t.length;n++){for(var r=t[n],i=r._private.style,a=0;a<e.style.properties.length;a++){var o=e.style.properties[a],s=i[o.name];if(s&&s.mapping){var u=s.mapping;this.applyParsedProperty(r,u)}}this.updateStyleHints(r)}},e.styfn.updateTransitions=function(t,n,r){var i=this,a=t._private.style,o=a["transition-property"].value,s=a["transition-duration"].msValue,u=a["transition-delay"].msValue,l={};if(o.length>0&&s>0){for(var c=!1,d=0;d<o.length;d++){var p=o[d],h=a[p],f=n[p];if(f){var v=f.prev,g=v,y=null!=f.next?f.next:h,m=!1;g&&(e.is.number(g.pxValue)&&e.is.number(y.pxValue)?m=g.pxValue!==y.pxValue:e.is.number(g.value)&&e.is.number(y.value)?m=g.value!==y.value:e.is.array(g.value)&&e.is.array(y.value)&&(m=g.value[0]!==y.value[0]||g.value[1]!==y.value[1]||g.value[2]!==y.value[2]),m&&(l[p]=y.strValue,this.applyBypass(t,p,g.strValue),c=!0))}}if(!c)return;t._private.transitioning=!0,t.stop(),u>0&&t.delay(u),t.animate({css:l},{duration:s,queue:!1,complete:function(){r||i.removeBypasses(t,o),t._private.transitioning=!1}})}else t._private.transitioning&&(t.stop(),this.removeBypasses(t,o),t._private.transitioning=!1)}}(n),function(e){"use strict";e.styfn.applyBypass=function(t,n,r,i){var a=[],o=!0;if("*"===n||"**"===n){if(void 0!==r)for(var s=0;s<e.style.properties.length;s++){var u=e.style.properties[s],n=u.name,l=this.parse(n,r,!0);l&&a.push(l)}}else if(e.is.string(n)){var l=this.parse(n,r,!0);l&&a.push(l)}else{if(!e.is.plainObject(n))return!1;var c=n;i=r;for(var s=0;s<e.style.properties.length;s++){var u=e.style.properties[s],n=u.name,r=c[n];if(void 0===r&&(r=c[e.util.dash2camel(n)]),void 0!==r){var l=this.parse(n,r,!0);l&&a.push(l)}}}if(0===a.length)return!1;for(var d=!1,s=0;s<t.length;s++){for(var p,h=t[s],f=h._private.style,v={},g=0;g<a.length;g++){var u=a[g];if(i){var y=f[u.name];p=v[u.name]={prev:y}}d=this.applyParsedProperty(h,u)||d,i&&(p.next=f[u.name])}i&&this.updateTransitions(h,v,o)}return d},e.styfn.overrideBypass=function(t,n,r){for(var i=0;i<t.length;i++){var a=t[i],o=a._private.style[e.util.camel2dash(n)];o.bypass?(o.value=r,o.pxValue=r):this.applyBypass(a,n,r)}},e.styfn.removeAllBypasses=function(t,n){for(var r=!0,i=0;i<t.length;i++){for(var a=t[i],o={},s=a._private.style,u=0;u<e.style.properties.length;u++){var l=e.style.properties[u],c=l.name,d="",p=this.parse(c,d,!0),h=s[l.name],f=o[l.name]={prev:h};this.applyParsedProperty(a,p),f.next=s[l.name]}n&&this.updateTransitions(a,o,r)}},e.styfn.removeBypasses=function(t,n,r){for(var i=!0,a=0;a<t.length;a++){for(var o=t[a],s={},u=o._private.style,l=0;l<n.length;l++){var c=n[l],d=e.style.properties[c],p="",h=this.parse(c,p,!0),f=u[d.name],v=s[d.name]={prev:f};this.applyParsedProperty(o,h),v.next=u[d.name]
}r&&this.updateTransitions(o,s,i)}}}(n),function(e,t){"use strict";e.styfn.getEmSizeInPixels=function(){var e=this._private.cy,n=e.container();if(t&&n&&t.getComputedStyle){var r=t.getComputedStyle(n).getPropertyValue("font-size"),i=parseFloat(r);return i}return 1},e.styfn.containerCss=function(e){var n=this._private.cy,r=n.container();return t&&r&&t.getComputedStyle?t.getComputedStyle(r).getPropertyValue(e):void 0},e.styfn.containerProperty=function(e){var t=this.containerCss(e),n=this.parse(e,t);return n},e.styfn.containerPropertyAsString=function(e){var t=this.containerProperty(e);return t?t.strValue:void 0}}(n,"undefined"==typeof window?null:window),function(e){"use strict";e.styfn.getRenderedStyle=function(t){var t=t[0];if(t){for(var n={},r=t._private.style,i=this._private.cy,a=i.zoom(),o=0;o<e.style.properties.length;o++){var s=e.style.properties[o],u=r[s.name];if(u){var l=u.unitless?u.strValue:u.pxValue*a+"px";n[s.name]=l,n[e.util.dash2camel(s.name)]=l}}return n}},e.styfn.getRawStyle=function(t){var t=t[0];if(t){for(var n={},r=t._private.style,i=0;i<e.style.properties.length;i++){var a=e.style.properties[i],o=r[a.name];o&&(n[a.name]=o.strValue,n[e.util.dash2camel(a.name)]=o.strValue)}return n}},e.styfn.getValueStyle=function(t,n){n=n||{};var r,i=n.array?[]:{};if(r=e.is.element(t)?t._private.style:t)for(var a=0;a<e.style.properties.length;a++){var o=e.style.properties[a],s=r[o.name]||r[e.util.dash2camel(o.name)];void 0===s||e.is.plainObject(s)||(s=this.parse(o.name,s)),s&&(n.array?i.push(s):(i[o.name]=s,i[e.util.dash2camel(o.name)]=s))}return i}}(n),function(e){"use strict";e.style.applyFromJson=function(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.selector,a=r.css;e.selector(i);for(var o in a){var s=a[o];e.css(o,s)}}return e},e.style.fromJson=function(t,n){var r=new e.Style(t);return e.style.applyFromJson(r,n),r},e.styfn.fromJson=function(t){var n=this;return n.resetToDefault(),e.style.applyFromJson(n,t),n},e.styfn.json=function(){for(var e=[],t=this.defaultLength;t<this.length;t++){for(var n=this[t],r=n.selector,i=n.properties,a={},o=0;o<i.length;o++){var s=i[o];a[s.name]=s.strValue}e.push({selector:r?r.toString():"core",css:a})}return e}}(n),function(e){"use strict";e.style.applyFromString=function(t,n){function r(){u=u.length>a.length?u.substr(a.length):""}function i(){o=o.length>s.length?o.substr(s.length):""}var a,o,s,u=""+n;for(u=u.replace(/[/][*](\s|.)+?[*][/]/g,"");;){var l=u.match(/^\s*$/);if(l)break;var c=u.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){e.util.error("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+u);break}a=c[0];var d=c[1],p=new e.Selector(d);if(p._private.invalid&&"core"!==d)e.util.error("Skipping parsing of block: Invalid selector found in string stylesheet: "+d),r();else{var h=c[2],f=!1;o=h;for(var v=[];;){var l=o.match(/^\s*$/);if(l)break;var g=o.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!g){e.util.error("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+h),f=!0;break}s=g[0];var y=g[1],m=g[2],b=e.style.properties[y];if(b){var x=t.parse(y,m);x?(v.push({name:y,val:m}),i()):(e.util.error("Skipping property: Invalid property definition in: "+s),i())}else e.util.error("Skipping property: Invalid property name in: "+s),i()}if(f){r();break}t.selector(d);for(var w=0;w<v.length;w++){var b=v[w];t.css(b.name,b.val)}r()}}return t},e.style.fromString=function(t,n){var r=new e.Style(t);return e.style.applyFromString(r,n),r},e.styfn.fromString=function(t){var n=this;return n.resetToDefault(),e.style.applyFromString(n,t),n}}(n),function(e){"use strict";e.stylesheet=e.Stylesheet=function(){return this instanceof e.Stylesheet?void(this.length=0):new e.Stylesheet},e.Stylesheet.prototype.selector=function(e){var t=this.length++;return this[t]={selector:e,properties:[]},this},e.Stylesheet.prototype.css=function(t,n){var r=this.length-1;if(e.is.string(t))this[r].properties.push({name:t,value:n});else if(e.is.plainObject(t))for(var i=t,a=0;a<e.style.properties.length;a++){var o=e.style.properties[a],s=i[o.name];if(void 0===s&&(s=i[e.util.dash2camel(o.name)]),void 0!==s){var t=o.name,n=s;this[r].properties.push({name:t,value:n})}}return this},e.Stylesheet.prototype.generateStyle=function(t){for(var n=new e.Style(t),r=0;r<this.length;r++){var i=this[r],a=i.selector,o=i.properties;n.selector(a);for(var s=0;s<o.length;s++){var u=o[s];n.css(u.name,u.value)}}return n}}(n),function(e,t){"use strict";var n=e.is.touch(),r={},i=e.util.copy(r);e.defaults=function(t){r=e.util.extend({},i,t)},e.fn.core=function(t){for(var n in t){var r=t[n];e.Core.prototype[n]=r}},e.Core=function(i){if(!(this instanceof e.Core))return new e.Core(i);var a=this;i=e.util.extend({},r,i);var o=i.container,s=o?o._cyreg:null;if(s=s||{},s&&s.cy){if(o)for(;o.firstChild;)o.removeChild(o.firstChild);s.cy.notify({type:"destroy"}),s={}}var u=s.readies=s.readies||[];o&&(o._cyreg=s),s.cy=a;var l=void 0!==t&&void 0!==o&&!i.headless,c=i;c.layout=e.util.extend({name:l?"grid":"null"},c.layout),c.renderer=e.util.extend({name:l?"canvas":"null"},c.renderer);var d=function(e,t,n){return void 0!==t?t:void 0!==n?n:e},p=this._private={container:c.container,ready:!1,initrender:!1,options:c,elements:[],id2index:{},listeners:[],aniEles:e.Collection(this),scratch:{},layout:null,renderer:null,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:d(!0,c.zoomingEnabled),userZoomingEnabled:d(!0,c.userZoomingEnabled),panningEnabled:d(!0,c.panningEnabled),userPanningEnabled:d(!0,c.userPanningEnabled),boxSelectionEnabled:d(!1,c.boxSelectionEnabled),autolock:d(!1,c.autolock,c.autolockNodes),autoungrabify:d(!1,c.autoungrabify,c.autoungrabifyNodes),autounselectify:d(!1,c.autounselectify),styleEnabled:void 0===c.styleEnabled?l:c.styleEnabled,zoom:e.is.number(c.zoom)?c.zoom:1,pan:{x:e.is.plainObject(c.pan)&&e.is.number(c.pan.x)?c.pan.x:0,y:e.is.plainObject(c.pan)&&e.is.number(c.pan.y)?c.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,deferredExecQueue:[]},h=c.selectionType;p.selectionType=void 0===h||"additive"!==h&&"single"!==h?n?"additive":"single":h,e.is.number(c.minZoom)&&e.is.number(c.maxZoom)&&c.minZoom<c.maxZoom?(p.minZoom=c.minZoom,p.maxZoom=c.maxZoom):e.is.number(c.minZoom)&&void 0===c.maxZoom?p.minZoom=c.minZoom:e.is.number(c.maxZoom)&&void 0===c.minZoom&&(p.maxZoom=c.maxZoom),p.styleEnabled&&this.setStyle(c.style),a.initRenderer(e.util.extend({hideEdgesOnViewport:c.hideEdgesOnViewport,hideLabelsOnViewport:c.hideLabelsOnViewport,textureOnViewport:c.textureOnViewport,wheelSensitivity:e.is.number(c.wheelSensitivity)&&c.wheelSensitivity>0?c.wheelSensitivity:1,motionBlur:c.motionBlur,pixelRatio:e.is.number(c.pixelRatio)&&c.pixelRatio>0?c.pixelRatio:"auto"===c.pixelRatio?void 0:1,tapThreshold:d(e.is.touch()?8:4,e.is.touch()?c.touchTapThreshold:c.desktopTapThreshold)},c.renderer)),c.initrender&&(a.on("initrender",c.initrender),a.on("initrender",function(){a._private.initrender=!0})),a.load(c.elements,function(){a.startAnimationLoop(),a._private.ready=!0,e.is.fn(c.ready)&&a.on("ready",c.ready);for(var t=0;t<u.length;t++){var n=u[t];a.on("ready",n)}s&&(s.readies=[]),a.trigger("ready")},c.done)},e.corefn=e.Core.prototype,e.fn.core({isReady:function(){return this._private.ready},ready:function(e){this.isReady()?this.trigger("ready",[],e):this.on("ready",e)},initrender:function(){return this._private.initrender},destroy:function(){this.notify({type:"destroy"});var e=this.container(),t=e.parentNode;return t&&t.removeChild(e),this},getElementById:function(t){var n=this._private.id2index[t];return void 0!==n?this._private.elements[n]:new e.Collection(this)},selectionType:function(){return this._private.selectionType},hasCompoundNodes:function(){return this._private.hasCompoundNodes},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){for(var t=this._private.elements,n=this._private.id2index,r=0;r<e.length;r++){var i=e[r],a=i._private.data.id,o=n[a],s=void 0!==o;s||(o=t.length,t.push(i),n[a]=o,i._private.index=o)}return this},removeFromPool:function(e){for(var t=this._private.elements,n=this._private.id2index,r=0;r<e.length;r++){var i=e[r],a=i._private.data.id,o=n[a],s=void 0!==o;if(s){this._private.id2index[a]=void 0,t.splice(o,1);for(var u=o;u<t.length;u++){var l=t[u]._private.data.id;n[l]--}}}},container:function(){return this._private.container},options:function(){return e.util.copy(this._private.options)},json:function(){var e={},t=this;return e.elements={},t.elements().each(function(t,n){var r=n.group();e.elements[r]||(e.elements[r]=[]),e.elements[r].push(n.json())}),this._private.styleEnabled&&(e.style=t.style().json()),e.zoomingEnabled=t._private.zoomingEnabled,e.userZoomingEnabled=t._private.userZoomingEnabled,e.zoom=t._private.zoom,e.minZoom=t._private.minZoom,e.maxZoom=t._private.maxZoom,e.panningEnabled=t._private.panningEnabled,e.userPanningEnabled=t._private.userPanningEnabled,e.pan=t._private.pan,e.boxSelectionEnabled=t._private.boxSelectionEnabled,e.layout=t._private.options.layout,e.renderer=t._private.options.renderer,e.hideEdgesOnViewport=t._private.options.hideEdgesOnViewport,e.hideLabelsOnViewport=t._private.options.hideLabelsOnViewport,e.textureOnViewport=t._private.options.textureOnViewport,e.wheelSensitivity=t._private.options.wheelSensitivity,e.motionBlur=t._private.options.motionBlur,e},defer:function(e){var t=this,n=t._private,r=n.deferredExecQueue;r.push(e),n.deferredTimeout||(n.deferredTimeout=setTimeout(function(){for(;r.length>0;)r.shift()();n.deferredTimeout=null},0))}})}(n,"undefined"==typeof window?null:window),function(e,t){"use strict";function n(e){var t=!document||"interactive"!==document.readyState&&"complete"!==document.readyState?n:e;setTimeout(t,9,e)}e.fn.core({add:function(t){var n,r=this;if(e.is.elementOrCollection(t)){var i=t;if(i._private.cy===r)n=i.restore();else{for(var a=[],o=0;o<i.length;o++){var s=i[o];a.push(s.json())}n=new e.Collection(r,a)}}else if(e.is.array(t)){var a=t;n=new e.Collection(r,a)}else if(e.is.plainObject(t)&&(e.is.array(t.nodes)||e.is.array(t.edges))){for(var u=t,a=[],l=["nodes","edges"],o=0,c=l.length;c>o;o++){var d=l[o],p=u[d];if(e.is.array(p))for(var h=0,f=p.length;f>h;h++){var v=p[h];v.group=d,a.push(v)}}n=new e.Collection(r,a)}else{var v=t;n=new e.Element(r,v).collection()}return n},remove:function(t){if(e.is.elementOrCollection(t))t=t;else if(e.is.string(t)){var n=t;t=this.$(n)}return t.remove()},load:function(r,i,a){function o(){s.one("layoutready",function(e){s.notifications(!0),s.trigger(e),s.notify({type:"load",collection:s.elements()}),s.one("load",i),s.trigger("load")}).one("layoutstop",function(){s.one("done",a),s.trigger("done")});var t=e.util.extend({},s._private.options.layout);t.eles=s.$(),s.layout(t)}var s=this,u=s.elements();return u.length>0&&u.remove(),s.notifications(!1),null!=r&&(e.is.plainObject(r)||e.is.array(r))&&s.add(r),t?n(o):o(),this}})}(n,"undefined"==typeof window?null:window),function(e,t){"use strict";e.fn.core({animated:e.define.animated(),clearQueue:e.define.clearQueue(),delay:e.define.delay(),animate:e.define.animate(),stop:e.define.stop(),addToAnimationPool:function(e){var t=this;t.styleEnabled()&&t._private.aniEles.merge(e)},startAnimationLoop:function(){function n(){e.util.requestAnimationFrame(function(e){r(e),n()})}function r(t){function n(n,r){var s=n._private.animation.current,u=n._private.animation.queue,l=!1;if(0===s.length){var c=u.length>0?u.shift():null;c&&(c.callTime=t,s.push(c))}for(var d=[],p=s.length-1;p>=0;p--){var h=s[p];h.started||i(n,h),a(n,h,t,r),h.done&&(d.push(h),s.splice(p,1)),l=!0}for(var p=0;p<d.length;p++){var h=d[p],f=h.params.complete;e.is.fn(f)&&f.apply(n,[t])}return r||0!==s.length||0!==u.length||o.push(n),l}t=+new Date;for(var r=u._private.aniEles,o=[],s=0;s<r.length;s++){var l=r[s];n(l)}var c=n(u,!0);if(r.length>0||c){var d;if(r.length>0){var p=r.updateCompoundBounds();d=p.length>0?r.add(p):r}u.notify({type:"draw",collection:d})}r.unmerge(o)}function i(t,n){var r=e.is.core(t),i=!r,a=t,o=u._private.style;if(i)var s=a._private.position,l={x:s.x,y:s.y},c=o.getValueStyle(a);if(r)var d=u._private.pan,p={x:d.x,y:d.y},h=u._private.zoom;n.started=!0,n.startTime=Date.now(),n.startPosition=l,n.startStyle=c,n.startPan=p,n.startZoom=h}function a(t,n,r,i){var a,l=u._private.style,c=n.properties,d=n.params,p=n.startTime,h=!i;if(a=0===n.duration?1:Math.min(1,(r-p)/n.duration),0>a?a=0:a>1&&(a=1),null==c.delay){var f=n.startPosition,v=c.position,g=t._private.position;v&&h&&(o(f.x,v.x)&&(g.x=s(f.x,v.x,a)),o(f.y,v.y)&&(g.y=s(f.y,v.y,a)));var y=n.startPan,m=c.pan,b=t._private.pan,x=null!=m&&i;x&&(o(y.x,m.x)&&(b.x=s(y.x,m.x,a)),o(y.y,m.y)&&(b.y=s(y.y,m.y,a)),t.trigger("pan"));var w=n.startZoom,_=c.zoom,E=null!=_&&i;if(E&&(o(w,_)&&(t._private.zoom=s(w,_,a)),t.trigger("zoom")),(x||E)&&t.trigger("viewport"),c.css&&h)for(var S=c.css,k=0;k<S.length;k++){var P=S[k].name,C=S[k],D=C,T=n.startStyle[P],N=s(T,D,a);l.overrideBypass(t,P,N)}}return e.is.fn(d.step)&&d.step.apply(t,[r]),a>=1&&(n.done=!0),a}function o(t,n){return null==t||null==n?!1:e.is.number(t)&&e.is.number(n)?!0:t&&n?!0:!1}function s(t,n,r){0>r?r=0:r>1&&(r=1);var i,a;if(i=null!=t.pxValue||null!=t.value?null!=t.pxValue?t.pxValue:t.value:t,a=null!=n.pxValue||null!=n.value?null!=n.pxValue?n.pxValue:n.value:n,e.is.number(i)&&e.is.number(a))return i+(a-i)*r;if(e.is.number(i[0])&&e.is.number(a[0])){var o=i,s=a,u=function(e,t){var n=t-e,i=e;return Math.round(r*n+i)},l=u(o[0],s[0]),c=u(o[1],s[1]),d=u(o[2],s[2]);return[l,c,d]}return void 0}var u=this;u.styleEnabled()&&t&&n()}})}(n,"undefined"==typeof window?null:window),function(e){"use strict";e.fn.core({data:e.define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeData:e.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0}),scratch:e.define.data({field:"scratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeScratch:e.define.removeData({field:"scratch",triggerEvent:!1})})}(n),function(e){"use strict";e.fn.core({on:e.define.on(),one:e.define.on({unbindSelfOnTrigger:!0}),once:e.define.on({unbindAllBindersOnTrigger:!0}),off:e.define.off(),trigger:e.define.trigger()}),e.corefn.bind=e.corefn.on,e.corefn.unbind=e.corefn.off}(n),function(e){"use strict";e.fn.core({png:function(e){var t=this._private.renderer;return e=e||{},t.png(e)}})}(n),function(e){"use strict";e.fn.core({layout:function(e){var t=this._private.prevLayout=null==e?this._private.prevLayout:this.initLayout(e);return t.run(),this},makeLayout:function(e){return this.initLayout(e)},initLayout:function(t){if(null==t)return void e.util.error("Layout options must be specified to make a layout");if(null==t.name)return void e.util.error("A `name` must be specified to make a layout");var n=t.name,r=e.extension("layout",n);if(null==r)return void e.util.error("Can not apply layout: No such layout `"+n+"` found; did you include its JS file?");t.eles=null!=t.eles?t.eles:this.$(),e.is.string(t.eles)&&(t.eles=this.$(t.eles));var i=new r(e.util.extend({},t,{cy:this}));return e.is.plainObject(i._private)||(i._private={}),i._private.cy=this,i._private.listeners=[],i}})}(n),function(e){"use strict";e.fn.core({notify:function(e){if(this._private.batchingNotify){var t=this._private.batchNotifyEles,n=this._private.batchNotifyTypes;if(e.collection)for(var r=0;r<e.collection.length;r++){var i=e.collection[r];t.ids[i._private.id]||t.push(i)}return void(n.ids[e.type]||n.push(e.type))}if(this._private.notificationsEnabled){var a=this.renderer();a.notify(e)}},notifications:function(e){var t=this._private;return void 0===e?t.notificationsEnabled:void(t.notificationsEnabled=e?!0:!1)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},startBatch:function(){var e=this._private;return e.batchingStyle=e.batchingNotify=!0,e.batchStyleEles=[],e.batchNotifyEles=[],e.batchNotifyTypes=[],e.batchStyleEles.ids={},e.batchNotifyEles.ids={},e.batchNotifyTypes.ids={},this},endBatch:function(){var t=this._private;return t.batchingStyle=!1,new e.Collection(this,t.batchStyleEles).updateStyle(),t.batchingNotify=!1,this.notify({type:t.batchNotifyTypes,collection:t.batchNotifyEles}),this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var n in e){var r=e[n],i=t.getElementById(n);i.data(r)}})}})}(n),function(e){"use strict";e.fn.core({renderTo:function(e,t,n,r){var i=this._private.renderer;return i.renderTo(e,t,n,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify({type:"draw"}),this},resize:function(){return this.notify({type:"resize"}),this.trigger("resize"),this},initRenderer:function(t){var n=this,r=e.extension("renderer",t.name);return null==r?void e.util.error("Can not initialise: No such renderer `%s` found; did you include its JS file?",t.name):void(this._private.renderer=new r(e.util.extend({},t,{cy:n,style:n._private.style})))}})}(n),function(e){"use strict";e.fn.core({collection:function(t){return e.is.string(t)?this.$(t):e.is.elementOrCollection(t)?t.collection():e.is.array(t)?new e.Collection(this,t):new e.Collection(this)},nodes:function(e){var t=this.$(function(){return this.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(){return this.isEdge()});return e?t.filter(e):t},$:function(t){var n=new e.Collection(this,this._private.elements);return t?n.filter(t):n}}),e.corefn.elements=e.corefn.filter=e.corefn.$}(n),function(e){"use strict";e.fn.core({style:function(e){if(e){var t=this.setStyle(e);t.update()}return this._private.style},setStyle:function(t){var n=this._private;return n.style=e.is.stylesheet(t)?t.generateStyle(this):e.is.array(t)?e.style.fromJson(this,t):e.is.string(t)?e.style.fromString(this,t):new e.Style(this),n.style}})}(n),function(e){"use strict";e.fn.core({autolock:function(e){return void 0===e?this._private.autolock:(this._private.autolock=e?!0:!1,this)},autoungrabify:function(e){return void 0===e?this._private.autoungrabify:(this._private.autoungrabify=e?!0:!1,this)},autounselectify:function(e){return void 0===e?this._private.autounselectify:(this._private.autounselectify=e?!0:!1,this)},panningEnabled:function(e){return void 0===e?this._private.panningEnabled:(this._private.panningEnabled=e?!0:!1,this)},userPanningEnabled:function(e){return void 0===e?this._private.userPanningEnabled:(this._private.userPanningEnabled=e?!0:!1,this)},zoomingEnabled:function(e){return void 0===e?this._private.zoomingEnabled:(this._private.zoomingEnabled=e?!0:!1,this)},userZoomingEnabled:function(e){return void 0===e?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=e?!0:!1,this)},boxSelectionEnabled:function(e){return void 0===e?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=e?!0:!1,this)},pan:function(){var t,n,r,i,a,o=arguments,s=this._private.pan;switch(o.length){case 0:return s;case 1:if(e.is.string(o[0]))return t=o[0],s[t];if(e.is.plainObject(o[0])){if(!this._private.panningEnabled)return this;r=o[0],i=r.x,a=r.y,e.is.number(i)&&(s.x=i),e.is.number(a)&&(s.y=a),this.trigger("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;t=o[0],n=o[1],"x"!==t&&"y"!==t||!e.is.number(n)||(s[t]=n),this.trigger("pan viewport")}return this.notify({type:"viewport"}),this},panBy:function(){var t,n,r,i,a,o=arguments,s=this._private.pan;if(!this._private.panningEnabled)return this;switch(o.length){case 1:e.is.plainObject(o[0])&&(r=o[0],i=r.x,a=r.y,e.is.number(i)&&(s.x+=i),e.is.number(a)&&(s.y+=a),this.trigger("pan viewport"));break;case 2:t=o[0],n=o[1],"x"!==t&&"y"!==t||!e.is.number(n)||(s[t]+=n),this.trigger("pan viewport")}return this.notify({type:"viewport"}),this},fit:function(e,t){var n=this.getFitViewport(e,t);if(n){var r=this._private;r.zoom=n.zoom,r.pan=n.pan,this.trigger("pan zoom viewport"),this.notify({type:"viewport"})}return this},getFitViewport:function(t,n){if(e.is.number(t)&&void 0===n&&(n=t,t=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var r;if(e.is.string(t)){var i=t;t=this.$(i)}else if(e.is.boundingBox(t)){var a=t;r={x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2},r.w=r.x2-r.x1,r.h=r.y2-r.y1}else e.is.elementOrCollection(t)||(t=this.elements());r=r||t.boundingBox();var o,s=this.width(),u=this.height();if(n=e.is.number(n)?n:0,!isNaN(s)&&!isNaN(u)&&s>0&&u>0&&!isNaN(r.w)&&!isNaN(r.h)&&r.w>0&&r.h>0){o=Math.min((s-2*n)/r.w,(u-2*n)/r.h),o=o>this._private.maxZoom?this._private.maxZoom:o,o=o<this._private.minZoom?this._private.minZoom:o;var l={x:(s-o*(r.x1+r.x2))/2,y:(u-o*(r.y1+r.y2))/2};return{zoom:o,pan:l}}}},minZoom:function(t){return void 0===t?this._private.minZoom:(e.is.number(t)&&(this._private.minZoom=t),this)},maxZoom:function(t){return void 0===t?this._private.maxZoom:(e.is.number(t)&&(this._private.maxZoom=t),this)},zoom:function(t){var n,r;if(void 0===t)return this._private.zoom;if(e.is.number(t))r=t;else if(e.is.plainObject(t)){if(r=t.level,t.position){var i=t.position,a=this._private.pan,o=this._private.zoom;n={x:i.x*o+a.x,y:i.y*o+a.y}}else t.renderedPosition&&(n=t.renderedPosition);if(n&&!this._private.panningEnabled)return this}if(!this._private.zoomingEnabled)return this;if(!e.is.number(r)||n&&(!e.is.number(n.x)||!e.is.number(n.y)))return this;if(r=r>this._private.maxZoom?this._private.maxZoom:r,r=r<this._private.minZoom?this._private.minZoom:r,n){var s=this._private.pan,u=this._private.zoom,l=r,c={x:-l/u*(n.x-s.x)+n.x,y:-l/u*(n.y-s.y)+n.y};this._private.zoom=r,this._private.pan=c;var d=s.x!==c.x||s.y!==c.y;this.trigger(" zoom "+(d?" pan ":"")+" viewport ")}else this._private.zoom=r,this.trigger("zoom viewport");return this.notify({type:"viewport"}),this},viewport:function(t){var n=this._private,r=!0,i=!0,a=[],o=!1,s=!1;if(!t)return this;if(e.is.number(t.zoom)||(r=!1),e.is.plainObject(t.pan)||(i=!1),!r&&!i)return this;if(r){var u=t.zoom;u<n.minZoom||u>n.maxZoom||!n.zoomingEnabled?o=!0:(n.zoom=u,a.push("zoom"))}if(i&&(!o||!t.cancelOnFailedZoom)&&n.panningEnabled){var l=t.pan;e.is.number(l.x)&&(n.pan.x=l.x,s=!1),e.is.number(l.y)&&(n.pan.y=l.y,s=!1),s||a.push("pan")}return a.length>0&&(a.push("viewport"),this.trigger(a.join(" ")),this.notify({type:"viewport"})),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.trigger("pan viewport"),this.notify({type:"viewport"})),this},getCenterPan:function(t,n){if(this._private.panningEnabled){if(e.is.string(t)){var r=t;t=this.elements(r)}else e.is.elementOrCollection(t)||(t=this.elements());var i=t.boundingBox(),a=this.width(),o=this.height();n=void 0===n?this._private.zoom:n;var s={x:(a-n*(i.x1+i.x2))/2,y:(o-n*(i.y1+i.y2))/2};return s}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},width:function(){var e=this._private.container;return e?e.clientWidth:1},height:function(){var e=this._private.container;return e?e.clientHeight:1},extent:function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),r={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return r.w=r.x2-r.x1,r.h=r.y2-r.y1,r},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}}}),e.corefn.centre=e.corefn.center,e.corefn.autolockNodes=e.corefn.autolock,e.corefn.autoungrabifyNodes=e.corefn.autoungrabify}(n),function(e){"use strict";e.fn.collection=e.fn.eles=function(t){for(var n in t){var r=t[n];e.Collection.prototype[n]=r}};var t={prefix:{nodes:"n",edges:"e"},id:{nodes:0,edges:0},generate:function(t,n,r){var i=e.is.element(n)?n._private:n,a=i.group,o=null!=r?r:this.prefix[a]+this.id[a];if(t.getElementById(o).empty())this.id[a]++;else for(;!t.getElementById(o).empty();)o=this.prefix[a]+ ++this.id[a];return o}};e.Element=function(t,n,r){if(!(this instanceof e.Element))return new e.Element(t,n,r);var i=this;if(r=void 0===r||r?!0:!1,void 0===t||void 0===n||!e.is.core(t))return void e.util.error("An element must have a core reference and parameters set");if("nodes"!==n.group&&"edges"!==n.group)return void e.util.error("An element must be of type `nodes` or `edges`; you specified `"+n.group+"`");if(this.length=1,this[0]=this,this._private={cy:t,single:!0,data:n.data||{},layoutData:{},position:n.position||{},autoWidth:void 0,autoHeight:void 0,listeners:[],group:n.group,style:{},rstyle:{},styleCxts:[],removed:!0,selected:n.selected?!0:!1,selectable:void 0===n.selectable?!0:n.selectable?!0:!1,locked:n.locked?!0:!1,grabbed:!1,grabbable:void 0===n.grabbable?!0:n.grabbable?!0:!1,active:!1,classes:{},animation:{current:[],queue:[]},rscratch:{},scratch:{},edges:[],children:[]},n.renderedPosition){var a=n.renderedPosition,o=t.pan(),s=t.zoom();this._private.position={x:(a.x-o.x)/s,y:(a.y-o.y)/s}}if(e.is.string(n.classes))for(var u=n.classes.split(/\s+/),l=0,c=u.length;c>l;l++){var d=u[l];d&&""!==d&&(i._private.classes[d]=!0)}n.css&&t.style().applyBypass(this,n.css),(void 0===r||r)&&this.restore()},e.Collection=function(n,r,i){if(!(this instanceof e.Collection))return new e.Collection(n,r);if(void 0===n||!e.is.core(n))return void e.util.error("A collection must have a reference to the core");var a={},o={},s=!1;if(r){if(r.length>0&&e.is.plainObject(r[0])&&!e.is.element(r[0])){s=!0;for(var u=[],l={},c=0,d=r.length;d>c;c++){var p=r[c];null==p.data&&(p.data={});var h=p.data;if(null==h.id)h.id=t.generate(n,p);else if(0!==n.getElementById(h.id).length||l[h.id])continue;var f=new e.Element(n,p,!1);u.push(f),l[h.id]=!0}r=u}}else r=[];this.length=0;for(var c=0,d=r.length;d>c;c++){var v=r[c];if(v){var g=v._private.data.id;(!i||i.unique&&!a[g])&&(a[g]=v,o[g]=this.length,this[this.length]=v,this.length++)}}this._private={cy:n,ids:a,indexes:o},s&&this.restore()},e.elefn=e.elesfn=e.Element.prototype=e.Collection.prototype,e.elesfn.cy=function(){return this._private.cy},e.elesfn.element=function(){return this[0]},e.elesfn.collection=function(){return e.is.collection(this)?this:new e.Collection(this._private.cy,[this])},e.elesfn.unique=function(){return new e.Collection(this._private.cy,this,{unique:!0})},e.elesfn.getElementById=function(t){var n=this._private.cy,r=this._private.ids[t];return r?r:e.Collection(n)},e.elesfn.json=function(){var t=this.element();if(null==t)return void 0;var n=t._private,r=e.util.copy({data:n.data,position:n.position,group:n.group,bypass:n.bypass,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbed:n.grabbed,grabbable:n.grabbable,classes:""}),i=[];for(var a in n.classes)n.classes[a]&&i.push(a);for(var o=0;o<i.length;o++){var a=i[o];r.classes+=a+(o<i.length-1?" ":"")}return r},e.elesfn.jsons=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t],r=n.json();e.push(r)}return e},e.elesfn.clone=function(){for(var t=this.cy(),n=[],r=0;r<this.length;r++){var i=this[r],a=i.json(),o=new e.Element(t,a,!1);n.push(o)}return new e.Collection(t,n)},e.elesfn.restore=function(n){var r=this,i=[],a=r.cy();void 0===n&&(n=!0);for(var o=[],s=[],u=[],l=0,c=0,d=0,p=r.length;p>d;d++){var h=r[d];h.isNode()?(s.push(h),l++):(u.push(h),c++)}o=s.concat(u);for(var d=0,p=o.length;p>d;d++){var h=o[d];if(h.removed()){var f=h._private,v=f.data;if(void 0===v.id)v.id=t.generate(a,h);else{if(e.is.emptyString(v.id)||!e.is.string(v.id)){e.util.error("Can not create element with invalid string ID `"+v.id+"`");continue}if(0!==a.getElementById(v.id).length){e.util.error("Can not create second element with ID `"+v.id+"`");continue}}var g=v.id;if(h.isEdge()){for(var y=h,m=["source","target"],b=m.length,x=!1,w=0;b>w;w++){var _=m[w],E=v[_];null==E||""===E?(e.util.error("Can not create edge `"+g+"` with unspecified "+_),x=!0):a.getElementById(E).empty()&&(e.util.error("Can not create edge `"+g+"` with nonexistant "+_+" `"+E+"`"),x=!0)}if(x)continue;var S=a.getElementById(v.source),k=a.getElementById(v.target);S._private.edges.push(y),k._private.edges.push(y),y._private.source=S,y._private.target=k}f.ids={},f.ids[g]=h,f.removed=!1,a.addToPool(h),i.push(h)}}for(var d=0;l>d;d++){var P=o[d],v=P._private.data,C=P._private.data.parent,D=null!=C;if(D){var T=a.getElementById(C);if(T.empty())v.parent=void 0;else{for(var N=!1,M=T;!M.empty();){if(P.same(M)){N=!0,v.parent=void 0;break}M=M.parent()}N||(T[0]._private.children.push(P),P._private.parent=T[0],a._private.hasCompoundNodes=!0)}}}if(i=new e.Collection(a,i),i.length>0){var B=i.add(i.connectedNodes()).add(i.parent());B.updateStyle(n),n?i.rtrigger("add"):i.trigger("add")}return r},e.elesfn.removed=function(){var e=this[0];return e&&e._private.removed},e.elesfn.inside=function(){var e=this[0];return e&&!e._private.removed},e.elesfn.remove=function(t){function n(e){for(var t=e._private.edges,n=0;n<t.length;n++)i(t[n])}function r(e){for(var t=e._private.children,n=0;n<t.length;n++)i(t[n])}function i(e){var t=c[e.id()];t||(c[e.id()]=!0,e.isNode()?(l.push(e),n(e),r(e)):l.unshift(e))}function a(e,t){for(var n=e._private.edges,r=0;r<n.length;r++){var i=n[r];if(t===i){n.splice(r,1);break}}}function o(e,t){t=t[0],e=e[0];for(var n=e._private.children,r=0;r<n.length;r++)if(n[r][0]===t[0]){n.splice(r,1);break}}var s=this,u=[],l=[],c={},d=s._private.cy;void 0===t&&(t=!0);for(var p=0,h=s.length;h>p;p++){var f=s[p];i(f)}for(var p=0;p<l.length;p++){var f=l[p];if(f._private.removed=!0,d.removeFromPool(f),u.push(f),f.isEdge()){var v=f.source()[0],g=f.target()[0];a(v,f),a(g,f)}else{var y=f.parent();0!==y.length&&o(y,f)}}var m=d._private.elements;d._private.hasCompoundNodes=!1;for(var p=0;p<m.length;p++){var f=m[p];if(f.isParent()){d._private.hasCompoundNodes=!0;break}}var b=new e.Collection(this.cy(),u);b.size()>0&&(t&&this.cy().notify({type:"remove",collection:b}),b.trigger("remove"));for(var x={},p=0;p<l.length;p++){var f=l[p],w="nodes"===f._private.group,_=f._private.data.parent;if(w&&void 0!==_&&!x[_]){x[_]=!0;var y=d.getElementById(_);y&&0!==y.length&&!y._private.removed&&0===y.children().length&&y.updateStyle()}}return this},e.elesfn.move=function(e){var t=this._private.cy;if(void 0!==e.source||void 0!==e.target){var n=e.source,r=e.target,i=t.getElementById(n).length>0,a=t.getElementById(r).length>0;if(i||a){var o=this.jsons();this.remove();for(var s=0;s<o.length;s++){var u=o[s];"edges"===u.group&&(i&&(u.data.source=n),a&&(u.data.target=r))}return t.add(o)}}else if(void 0!==e.parent){var l=e.parent,c=null===l||t.getElementById(l).length>0;if(c){var o=this.jsons(),d=this.descendants(),p=d.merge(d.add(this).connectedEdges());this.remove();for(var s=0;s<this.length;s++){var u=o[s];"nodes"===u.group&&(u.data.parent=null===l?void 0:l)}}return t.add(o).merge(p.restore())}return this}}(n),function(e){"use strict";e.fn.eles({stdBreadthFirstSearch:function(t){return t=e.util.extend({},t,{std:!0}),this.breadthFirstSearch(t)},breadthFirstSearch:function(t,n,r){var i,a,o;e.is.plainObject(t)&&!e.is.elementOrCollection(t)&&(i=t,t=i.roots,n=i.visit,r=i.directed,a=i.std,o=i.thisArg),r=2!==arguments.length||e.is.fn(n)?r:n,n=e.is.fn(n)?n:function(){};for(var s,u=this._private.cy,l=e.is.string(t)?this.filter(t):t,c=[],d=[],p={},h={},f={},v=0,g=this.nodes(),y=this.edges(),m=0;m<l.length;m++)l[m].isNode()&&(c.unshift(l[m]),f[l[m].id()]=!0,d.push(l[m]),h[l[m].id()]=0);for(;0!==c.length;){var b,l=c.shift(),x=h[l.id()],w=p[l.id()],_=null==w?void 0:w.connectedNodes().not(l)[0];if(b=a?n.call(o,l,w,_,v++,x):n.call(l,v++,x,l,w,_),b===!0){s=l;break}if(b===!1)break;for(var E=l.connectedEdges(r?function(){return this.data("source")===l.id()}:void 0).intersect(y),m=0;m<E.length;m++){var S=E[m],k=S.connectedNodes(function(){return this.id()!==l.id()}).intersect(g);0===k.length||f[k.id()]||(k=k[0],c.push(k),f[k.id()]=!0,h[k.id()]=h[l.id()]+1,d.push(k),p[k.id()]=S)}}for(var P=[],m=0;m<d.length;m++){var C=d[m],D=p[C.id()];D&&P.push(D),P.push(C)}return{path:new e.Collection(u,P,{unique:!0}),found:new e.Collection(u,s,{unique:!0})}
},stdDepthFirstSearch:function(t){return t=e.util.extend({},t,{std:!0}),this.depthFirstSearch(t)},depthFirstSearch:function(t,n,r){var i,a,o;e.is.plainObject(t)&&!e.is.elementOrCollection(t)&&(i=t,t=i.roots,n=i.visit,r=i.directed,a=i.std,o=i.thisArg),r=2!==arguments.length||e.is.fn(n)?r:n,n=e.is.fn(n)?n:function(){};for(var s,u=this._private.cy,l=e.is.string(t)?this.filter(t):t,c=[],d=[],p={},h={},f={},v=0,g=this.edges(),y=this.nodes(),m=0;m<l.length;m++)l[m].isNode()&&(c.push(l[m]),d.push(l[m]),h[l[m].id()]=0);for(;0!==c.length;){var l=c.pop();if(!f[l.id()]){f[l.id()]=!0;var b,x=h[l.id()],w=p[l.id()],_=null==w?void 0:w.connectedNodes().not(l)[0];if(b=a?n.call(o,l,w,_,v++,x):n.call(l,v++,x,l,w,_),b===!0){s=l;break}if(b===!1)break;for(var E=l.connectedEdges(r?function(){return this.data("source")===l.id()}:void 0).intersect(g),m=0;m<E.length;m++){var S=E[m],k=S.connectedNodes(function(){return this.id()!==l.id()}).intersect(y);0===k.length||f[k.id()]||(k=k[0],c.push(k),h[k.id()]=h[l.id()]+1,d.push(k),p[k.id()]=S)}}}for(var P=[],m=0;m<d.length;m++){var C=d[m],D=p[C.id()];D&&P.push(D),P.push(C)}return{path:new e.Collection(u,P,{unique:!0}),found:new e.Collection(u,s,{unique:!0})}},kruskal:function(t){function n(e){for(var t=0;t<i.length;t++){var n=i[t];if(n.anySame(e))return{eles:n,index:t}}}t=e.is.fn(t)?t:function(){return 1};for(var r=new e.Collection(this._private.cy,[]),i=[],a=this.nodes(),o=0;o<a.length;o++)i.push(a[o].collection());for(var s=this.edges(),u=s.toArray().sort(function(e,n){var r=t.call(e,e),i=t.call(n,n);return r-i}),o=0;o<u.length;o++){var l=u[o],c=l.source()[0],d=l.target()[0],p=n(c),h=n(d);p.index!==h.index&&(r=r.add(l),i[p.index]=p.eles.add(h.eles),i.splice(h.index,1))}return a.add(r)},dijkstra:function(t,n,r){var i;e.is.plainObject(t)&&!e.is.elementOrCollection(t)&&(i=t,t=i.root,n=i.weight,r=i.directed);var a=this._private.cy;r=e.is.fn(n)?r:n,n=e.is.fn(n)?n:function(){return 1};for(var o=e.is.string(t)?this.filter(t).eq(0):t.eq(0),s={},u={},l={},c=this.edges().filter(function(){return!this.isLoop()}),d=this.nodes(),p=[],h=0;h<d.length;h++)s[d[h].id()]=d[h].same(o)?0:1/0,p.push(d[h]);var f=function(e){return s[e.id()]};p=new e.Collection(a,p);for(var v=e.Minheap(a,p,f),g=function(e,t){for(var i,a=(r?e.edgesTo(t):e.edgesWith(t)).intersect(c),o=1/0,s=0;s<a.length;s++){var u=a[s],l=n.apply(u,[u]);(o>l||!i)&&(o=l,i=u)}return{edge:i,dist:o}};v.size()>0;){var y=v.pop(),m=y.value,b=y.id,x=a.getElementById(b);if(l[b]=m,m===Math.Infinite)break;for(var w=x.neighborhood().intersect(d),h=0;h<w.length;h++){var _=w[h],E=_.id(),S=g(x,_),k=m+S.dist;k<v.getValueById(E)&&(v.edit(E,k),u[E]={node:x,edge:S.edge})}}return{distanceTo:function(t){var n=e.is.string(t)?d.filter(t).eq(0):t.eq(0);return l[n.id()]},pathTo:function(t){var n=e.is.string(t)?d.filter(t).eq(0):t.eq(0),r=[],i=n;if(n.length>0)for(r.unshift(n);u[i.id()];){var o=u[i.id()];r.unshift(o.edge),r.unshift(o.node),i=o.node}return new e.Collection(a,r)}}}}),e.elesfn.bfs=e.elesfn.breadthFirstSearch,e.elesfn.dfs=e.elesfn.depthFirstSearch,e.elesfn.stdBfs=e.elesfn.stdBreadthFirstSearch,e.elesfn.stdDfs=e.elesfn.stdDepthFirstSearch}(n),function(e){"use strict";e.fn.eles({aStar:function(t){t=t||{};var n=function(){a&&console.log.apply(console,arguments)},r=function(e,t,n,i){if(e==t)return i.push(o.getElementById(t)),i;if(t in n){var a=n[t],s=v[t];return i.push(o.getElementById(t)),i.push(o.getElementById(s)),r(e,a,n,i)}return void 0},i=function(e,t){if(0===e.length)return void 0;for(var n=0,r=t[e[0]],i=1;i<e.length;i++){var a=t[e[i]];r>a&&(r=a,n=i)}return n};if(null!=t.debug)var a=t.debug;else var a=!1;n("Starting aStar...");var o=this._private.cy;if(null==t||null==t.root)return void 0;var s=e.is.string(t.root)?this.filter(t.root)[0]:t.root[0];if(n("Source node: %s",s.id()),null==t.goal)return void 0;var u=e.is.string(t.goal)?this.filter(t.goal)[0]:t.goal[0];if(n("Target node: %s",u.id()),null!=t.heuristic&&e.is.fn(t.heuristic))var l=t.heuristic;else var l=function(){return 0};if(null!=t.weight&&e.is.fn(t.weight))var c=t.weight;else var c=function(){return 1};if(null!=t.directed)var d=t.directed;else var d=!1;var p=[],h=[s.id()],f={},v={},g={},y={};g[s.id()]=0,y[s.id()]=l(s);for(var m=this.edges().not(":loop"),b=this.nodes(),x=0;h.length>0;){var w=i(h,y),_=this.filter("#"+h[w])[0];if(x++,n("\nStep: %s",x),n("Processing node: %s, fScore = %s",_.id(),y[_.id()]),_.id()==u.id()){n("Found goal node!");var E=r(s.id(),u.id(),f,[]);return E.reverse(),n("Path: %s",E),{found:!0,distance:g[_.id()],path:new e.Collection(o,E),steps:x}}p.push(_.id()),h.splice(w,1),n("Added node to closedSet, removed from openSet."),n("Processing neighbors...");for(var S=_.connectedEdges(d?'[source = "'+_.id()+'"]':void 0).intersect(m),k=0;k<S.length;k++){var P=S[k],C=P.connectedNodes('[id != "'+_.id()+'"]').intersect(b);if(n("   processing neighbor: %s",C.id()),-1==p.indexOf(C.id())){var D=g[_.id()]+c.apply(P,[P]);n("   tentative gScore: %d",D),-1!=h.indexOf(C.id())?D<g[C.id()]&&(g[C.id()]=D,y[C.id()]=D+l(C),f[C.id()]=_.id(),n("   better score, replacing gScore. "),n("   fScore(%s) = %s",C.id(),D)):(g[C.id()]=D,y[C.id()]=D+l(C),h.push(C.id()),f[C.id()]=_.id(),v[C.id()]=P.id(),n("   not in openSet, adding it. "),n("   fScore(%s) = %s",C.id(),D))}else n("   already in closedSet, ignoring it.")}}return n("Reached end of computation without finding our goal"),{found:!1,distance:void 0,path:void 0,steps:x}},floydWarshall:function(t){t=t||{};var n=function(){r&&console.log.apply(console,arguments)};if(null!=t.debug)var r=t.debug;else var r=!1;n("Starting floydWarshall...");var i=this._private.cy;if(null!=t.weight&&e.is.fn(t.weight))var a=t.weight;else var a=function(){return 1};if(null!=t.directed)var o=t.directed;else var o=!1;for(var s=this.edges().not(":loop"),u=this.nodes(),l=u.length,c={},d=0;l>d;d++)c[u[d].id()]=d;for(var p=[],d=0;l>d;d++){for(var h=new Array(l),f=0;l>f;f++)h[f]=d==f?0:1/0;p.push(h)}var v=[],g=[],y=function(e){for(var t=0;l>t;t++){for(var n=new Array(l),r=0;l>r;r++)n[r]=void 0;e.push(n)}};y(v),y(g);for(var d=0;d<s.length;d++){var m=c[s[d].source().id()],b=c[s[d].target().id()],x=a.apply(s[d],[s[d]]);p[m][b]>x&&(p[m][b]=x,v[m][b]=b,g[m][b]=s[d])}if(!o)for(var d=0;d<s.length;d++){var m=c[s[d].target().id()],b=c[s[d].source().id()],x=a.apply(s[d],[s[d]]);p[m][b]>x&&(p[m][b]=x,v[m][b]=b,g[m][b]=s[d])}for(var w=0;l>w;w++)for(var d=0;l>d;d++)for(var f=0;l>f;f++)p[d][w]+p[w][f]<p[d][f]&&(p[d][f]=p[d][w]+p[w][f],v[d][f]=v[d][w]);for(var _=[],d=0;l>d;d++)_.push(u[d].id());var E={distance:function(t,n){if(e.is.string(t))var r=i.filter(t)[0].id();else var r=t.id();if(e.is.string(n))var a=i.filter(n)[0].id();else var a=n.id();return p[c[r]][c[a]]},path:function(t,n){var r=function(e,t,n,r,a){if(e===t)return i.getElementById(r[e]);if(void 0===n[e][t])return void 0;for(var o=[i.getElementById(r[e])],s=e;e!==t;){s=e,e=n[e][t];var u=a[s][e];o.push(u),o.push(i.getElementById(r[e]))}return o};if(e.is.string(t))var a=i.filter(t)[0].id();else var a=t.id();if(e.is.string(n))var o=i.filter(n)[0].id();else var o=n.id();var s=r(c[a],c[o],v,_,g);return new e.Collection(i,s)}};return E},bellmanFord:function(t){t=t||{};var n=function(){r&&console.log.apply(console,arguments)};if(null!=t.debug)var r=t.debug;else var r=!1;if(n("Starting bellmanFord..."),null!=t.weight&&e.is.fn(t.weight))var i=t.weight;else var i=function(){return 1};if(null!=t.directed)var a=t.directed;else var a=!1;if(null==t.root)return void e.util.error("options.root required");if(e.is.string(t.root))var o=this.filter(t.root)[0];else var o=t.root[0];n("Source node: %s",o.id());for(var s=this._private.cy,u=this.edges().not(":loop"),l=this.nodes(),c=l.length,d={},p=0;c>p;p++)d[l[p].id()]=p;for(var h=[],f=[],v=[],p=0;c>p;p++)h[p]=l[p].id()===o.id()?0:1/0,f[p]=void 0;for(var g=!1,p=1;c>p;p++){g=!1;for(var y=0;y<u.length;y++){var m=d[u[y].source().id()],b=d[u[y].target().id()],x=i.apply(u[y],[u[y]]),w=h[m]+x;if(w<h[b]&&(h[b]=w,f[b]=m,v[b]=u[y],g=!0),!a){var w=h[b]+x;w<h[m]&&(h[m]=w,f[m]=b,v[m]=u[y],g=!0)}}if(!g)break}if(g)for(var y=0;y<u.length;y++){var m=d[u[y].source().id()],b=d[u[y].target().id()],x=i.apply(u[y],[u[y]]);if(h[m]+x<h[b])return e.util.error("Error: graph contains a negative weigth cycle!"),{pathTo:void 0,distanceTo:void 0,hasNegativeWeightCycle:!0}}for(var _=[],p=0;c>p;p++)_.push(l[p].id());var E={distanceTo:function(t){if(e.is.string(t))var n=s.filter(t)[0].id();else var n=t.id();return h[d[n]]},pathTo:function(t){var n=function(e,t,n,r,i,a){for(;;){if(i.push(s.getElementById(r[n])),i.push(a[n]),t===n)return i;var o=e[n];if("undefined"==typeof o)return void 0;n=o}};if(e.is.string(t))var r=s.filter(t)[0].id();else var r=t.id();var i=[],a=n(f,d[o.id()],d[r],_,i,v);return null!=a&&a.reverse(),new e.Collection(s,a)},hasNegativeWeightCycle:!1};return E},kargerStein:function(t){t=t||{};var n=function(){a&&console.log.apply(console,arguments)},r=function(e,t,n){for(var r=n[e],i=r[1],a=r[2],o=t[i],s=t[a],u=n.filter(function(e){return t[e[1]]===o&&t[e[2]]===s?!1:t[e[1]]===s&&t[e[2]]===o?!1:!0}),l=0;l<u.length;l++){var c=u[l];c[1]===s?(u[l]=c.slice(0),u[l][1]=o):c[2]===s&&(u[l]=c.slice(0),u[l][2]=o)}for(var l=0;l<t.length;l++)t[l]===s&&(t[l]=o);return u},i=function(e,t,n,a){if(a>=n)return t;var o=Math.floor(Math.random()*t.length),s=r(o,e,t);return i(e,s,n-1,a)};if(null!=t&&null!=t.debug)var a=t.debug;else var a=!1;n("Starting kargerStein...");var o=this._private.cy,s=this.edges().not(":loop"),u=this.nodes(),l=u.length,c=s.length,d=Math.ceil(Math.pow(Math.log(l)/Math.LN2,2)),p=Math.floor(l/Math.sqrt(2));if(2>l)return void e.util.error("At least 2 nodes are required for KargerSteing algorithm!");for(var h={},f=0;l>f;f++)h[u[f].id()]=f;for(var v=[],f=0;c>f;f++){var g=s[f];v.push([f,h[g.source().id()],h[g.target().id()]])}for(var y,m=1/0,b=[],f=0;l>f;f++)b.push(f);for(var x=0;d>=x;x++){var w=b.slice(0),_=i(w,v,l,p),E=w.slice(0),S=i(w,_,p,2),k=i(E,_,p,2);S.length<=k.length&&S.length<m?(m=S.length,y=[S,w]):k.length<=S.length&&k.length<m&&(m=k.length,y=[k,E])}for(var P=y[0].map(function(e){return s[e[0]]}),C=[],D=[],T=y[1][0],f=0;f<y[1].length;f++){var N=y[1][f];N===T?C.push(u[f]):D.push(u[f])}var M={cut:new e.Collection(o,P),partition1:new e.Collection(o,C),partition2:new e.Collection(o,D)};return M},pageRank:function(t){t=t||{};var n=function(e){for(var t=e.length,n=0,r=0;t>r;r++)n+=e[r];for(var r=0;t>r;r++)e[r]=e[r]/n},r=function(){i&&console.log.apply(console,arguments)};if(null!=t&&null!=t.debug)var i=t.debug;else var i=!1;if(r("Starting pageRank..."),null!=t&&null!=t.dampingfactor)var a=t.dampingFactor;else var a=.8;if(null!=t&&null!=t.precision)var o=t.precision;else var o=1e-6;if(null!=t&&null!=t.iterations)var s=t.iterations;else var s=200;if(null!=t&&null!=t.weight&&e.is.fn(t.weight))var u=t.weight;else var u=function(){return 1};for(var l=this._private.cy,c=this.edges().not(":loop"),d=this.nodes(),p=d.length,h=c.length,f={},v=0;p>v;v++)f[d[v].id()]=v;for(var g=[],y=[],m=(1-a)/p,v=0;p>v;v++){for(var b=[],x=0;p>x;x++)b.push(0);g.push(b),y.push(0)}for(var v=0;h>v;v++){var w=c[v],_=f[w.source().id()],E=f[w.target().id()],S=u.apply(w,[w]);g[E][_]+=S,y[_]+=S}for(var k=1/p+m,x=0;p>x;x++)if(0===y[x])for(var v=0;p>v;v++)g[v][x]=k;else for(var v=0;p>v;v++)g[v][x]=g[v][x]/y[x]+m;for(var P,C=[],D=[],v=0;p>v;v++)C.push(1),D.push(0);for(var T=0;s>T;T++){for(var N=D.slice(0),v=0;p>v;v++)for(var x=0;p>x;x++)N[v]+=g[v][x]*C[x];n(N),P=C,C=N;for(var M=0,v=0;p>v;v++)M+=Math.pow(P[v]-C[v],2);if(o>M){r("Stoped at iteration %s",T);break}}r("Result:\n"+C);var B={rank:function(t){if(e.is.string(t))var n=l.filter(t)[0].id();else var n=t.id();return C[f[n]]}};return B}})}(n),function(e){"use strict";e.fn.eles({animated:e.define.animated(),clearQueue:e.define.clearQueue(),delay:e.define.delay(),animate:e.define.animate(),stop:e.define.stop()})}(n),function(e){"use strict";e.fn.eles({classes:function(t){var n,r=this,i=[];if(e.is.fn(t))n=t;else if(!e.is.plainObject(t))return this;for(var a=0;a<r.length;a++){var o=r[a],s=!1;if(t=n?n.apply(o,[a,o]):t,t.add)for(var u=0;u<t.add.length;u++){var l=t.add[u],c=o._private.classes[l];o._private.classes[l]=!0,c||s||(i.push(o),s=!0)}if(t.remove)for(var u=0;u<t.remove.length;u++){var l=t.remove[u],c=o._private.classes[l];o._private.classes[l]=!1,c&&!s&&(i.push(o),s=!0)}if(t.toggle)for(var u=0;u<t.toggle.length;u++){var l=t.toggle[u],c=o._private.classes[l];o._private.classes[l]=!c,s||(i.push(o),s=!0)}}return i.length>0&&new e.Collection(this.cy(),i).updateStyle().trigger("class"),this},addClass:function(t){t=t.split(/\s+/);for(var n=this,r=[],i=0;i<t.length;i++){var a=t[i];if(!e.is.emptyString(a))for(var o=0;o<n.length;o++){var s=n[o],u=s._private.classes[a];s._private.classes[a]=!0,u||r.push(s)}}return r.length>0&&new e.Collection(this._private.cy,r).updateStyle().trigger("class"),n},hasClass:function(e){var t=this[0];return null!=t&&t._private.classes[e]?!0:!1},toggleClass:function(t,n){for(var r=t.split(/\s+/),i=this,a=[],o=0,s=i.length;s>o;o++)for(var u=i[o],l=0;l<r.length;l++){var c=r[l];if(!e.is.emptyString(c)){var d=u._private.classes[c],p=n||void 0===n&&!d;p?(u._private.classes[c]=!0,d||a.push(u)):(u._private.classes[c]=!1,d&&a.push(u))}}return a.length>0&&new e.Collection(this._private.cy,a).updateStyle().trigger("class"),i},removeClass:function(t){t=t.split(/\s+/);for(var n=this,r=[],i=0;i<n.length;i++)for(var a=n[i],o=0;o<t.length;o++){var s=t[o];if(s&&""!==s){var u=a._private.classes[s];a._private.classes[s]=void 0,u&&r.push(a)}}return r.length>0&&new e.Collection(n._private.cy,r).updateStyle(),n.trigger("class"),n},flashClass:function(e,t){var n=this;if(null==t)t=250;else if(0===t)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n}})}(n),function(e){"use strict";e.fn.eles({allAre:function(e){return this.filter(e).length===this.length},is:function(e){return this.filter(e).length>0},some:function(e,t){for(var n=0;n<this.length;n++){var r=e.apply(t,[this[n],n,this]);if(r)return!0}return!1},every:function(e,t){for(var n=0;n<this.length;n++){var r=e.apply(t,[this[n],n,this]);if(!r)return!1}return!0},same:function(e){return e=this.cy().collection(e),this.length!==e.length?!1:this.intersect(e).length===this.length},anySame:function(e){return e=this.cy().collection(e),this.intersect(e).length>0},allAreNeighbors:function(e){return e=this.cy().collection(e),this.neighborhood().intersect(e).length===e.length}})}(n),function(e){"use strict";e.fn.eles({parent:function(t){for(var n=[],r=this._private.cy,i=0;i<this.length;i++){var a=this[i],o=r.getElementById(a._private.data.parent);o.size()>0&&n.push(o)}return new e.Collection(r,n,{unique:!0}).filter(t)},parents:function(t){for(var n=[],r=this.parent();r.nonempty();){for(var i=0;i<r.length;i++){var a=r[i];n.push(a)}r=r.parent()}return new e.Collection(this.cy(),n,{unique:!0}).filter(t)},commonAncestors:function(e){for(var t,n=0;n<this.length;n++){var r=this[n],i=r.parents();t=t||i,t=t.intersect(i)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(e){return e.isNode()&&e.parent().empty()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(e){return e.isNode()&&e.parent().nonempty()}).filter(e)},children:function(t){for(var n=[],r=0;r<this.length;r++){var i=this[r];n=n.concat(i._private.children)}return new e.Collection(this.cy(),n,{unique:!0}).filter(t)},siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];return e?0!==e._private.children.length:void 0},isChild:function(){var e=this[0];return e?void 0!==e._private.data.parent&&0!==e.parent().length:void 0},descendants:function(t){function n(e){for(var t=0;t<e.length;t++){var i=e[t];r.push(i),i.children().nonempty()&&n(i.children())}}var r=[];return n(this.children()),new e.Collection(this.cy(),r,{unique:!0}).filter(t)}}),e.elesfn.ancestors=e.elesfn.parents}(n),function(e){"use strict";var t=1,n=0;e.fn.eles({data:e.define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:e.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:e.define.data({field:"scratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeScratch:e.define.removeData({field:"scratch",triggerEvent:!1}),rscratch:e.define.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:e.define.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];return e?e._private.data.id:void 0},position:e.define.data({field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"rtrigger",allowGetting:!0,validKeys:["x","y"],onSet:function(e){var t=e.updateCompoundBounds();t.rtrigger("position")},canSet:function(e){return!e.locked()}}),silentPosition:e.define.data({field:"position",bindingEvent:"position",allowBinding:!1,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!1,triggerFnName:"trigger",allowGetting:!0,validKeys:["x","y"],onSet:function(e){e.updateCompoundBounds()},canSet:function(e){return!e.locked()}}),positions:function(t,n){if(e.is.plainObject(t))this.position(t);else if(e.is.fn(t)){for(var r=t,i=0;i<this.length;i++){var a=this[i],t=r.apply(a,[i,a]);if(t&&!a.locked()){var o=a._private.position;o.x=t.x,o.y=t.y}}var s=this.updateCompoundBounds(),u=s.length>0?this.add(s):this;n?u.trigger("position"):u.rtrigger("position")}return this},silentPositions:function(e){return this.positions(e,!0)},updateCompoundBounds:function(){function t(e){var t=e.children(),n=e._private.style,i=t.boundingBox({includeLabels:!1,includeEdges:!1}),a={top:n["padding-top"].pxValue,bottom:n["padding-bottom"].pxValue,left:n["padding-left"].pxValue,right:n["padding-right"].pxValue},o=e._private.position,s=!1;"auto"===n.width.value&&(e._private.autoWidth=i.w+a.left+a.right,o.x=(i.x1+i.x2-a.left+a.right)/2,s=!0),"auto"===n.height.value&&(e._private.autoHeight=i.h+a.top+a.bottom,o.y=(i.y1+i.y2-a.top+a.bottom)/2,s=!0),s&&r.push(e)}var n=this.cy();if(!n.styleEnabled()||!n.hasCompoundNodes())return n.collection();for(var r=[],i=this.parent();i.nonempty();){for(var a=0;a<i.length;a++){var o=i[a];t(o)}i=i.parent()}return new e.Collection(n,r)},renderedPosition:function(t,n){var r=this[0],i=this.cy(),a=i.zoom(),o=i.pan(),s=e.is.plainObject(t)?t:void 0,u=void 0!==s||void 0!==n&&e.is.string(t);if(r&&r.isNode()){if(!u){var l=r._private.position;return s={x:l.x*a+o.x,y:l.y*a+o.y},void 0===t?s:s[t]}for(var c=0;c<this.length;c++){var r=this[c];void 0!==n?r._private.position[t]=(n-o[t])/a:void 0!==s&&(r._private.position={x:(s.x-o.x)/a,y:(s.y-o.y)/a})}this.rtrigger("position")}else if(!u)return void 0;return this},parentPosition:function(t,n){var r=this[0],i=this.cy(),a=e.is.plainObject(t)?t:void 0,o=void 0!==a||void 0!==n&&e.is.string(t),s=i.hasCompoundNodes();if(r&&r.isNode()){if(!o){var u=r._private.position,l=s?r.parent():null,c=l&&l.length>0,d=c;c&&(l=l[0]);var p=d?l._private.position:{x:0,y:0};return a={x:u.x-p.x,y:u.y-p.y},void 0===t?a:a[t]}for(var h=0;h<this.length;h++){var r=this[h],l=s?r.parent():null,c=l&&l.length>0,d=c;c&&(l=l[0]);var p=d?l._private.position:{x:0,y:0};void 0!==n?r._private.position[t]=n+p[t]:void 0!==a&&(r._private.position={x:a.x+p.x,y:a.y+p.y})}this.rtrigger("position")}else if(!o)return void 0;return this},width:function(){var e=this[0],t=e._private.cy,n=t._private.styleEnabled;if(e){if(n){var r=e._private.style.width;return"auto"===r.strValue?e._private.autoWidth:r.pxValue}return 1}},outerWidth:function(){var e=this[0],r=e._private.cy,i=r._private.styleEnabled;if(e){if(i){var a=e._private.style,o="auto"===a.width.strValue?e._private.autoWidth:a.width.pxValue,s=a["border-width"]?a["border-width"].pxValue*t+n:0;return o+s}return 1}},renderedWidth:function(){var e=this[0];if(e){var t=e.width();return t*this.cy().zoom()}},renderedOuterWidth:function(){var e=this[0];if(e){var t=e.outerWidth();return t*this.cy().zoom()}},height:function(){var e=this[0],t=e._private.cy,n=t._private.styleEnabled;if(e&&"nodes"===e._private.group){if(n){var r=e._private.style.height;return"auto"===r.strValue?e._private.autoHeight:r.pxValue}return 1}},outerHeight:function(){var e=this[0],r=e._private.cy,i=r._private.styleEnabled;if(e&&"nodes"===e._private.group){if(!i)return 1;var a=e._private.style,o="auto"===a.height.strValue?e._private.autoHeight:a.height.pxValue,s=a["border-width"]?a["border-width"].pxValue*t+n:0;return o+s}},renderedHeight:function(){var e=this[0];if(e&&"nodes"===e._private.group){var t=e.height();return t*this.cy().zoom()}},renderedOuterHeight:function(){var e=this[0];if(e&&"nodes"===e._private.group){var t=e.outerHeight();return t*this.cy().zoom()}},renderedBoundingBox:function(e){var t=this.boundingBox(e),n=this.cy(),r=n.zoom(),i=n.pan(),a=t.x1*r+i.x,o=t.x2*r+i.x,s=t.y1*r+i.y,u=t.y2*r+i.y;return{x1:a,x2:o,y1:s,y2:u,w:o-a,h:u-s}},boundingBox:function(e){var t=this,n=t._private.cy,r=n._private,i=r.styleEnabled;e=e||{};var a=void 0===e.includeNodes?!0:e.includeNodes,o=void 0===e.includeEdges?!0:e.includeEdges,s=void 0===e.includeLabels?!0:e.includeLabels;i&&r.renderer.recalculateRenderedStyle(this);for(var u=1/0,l=-1/0,c=1/0,d=-1/0,p=0;p<t.length;p++){var h,f,v,g,y,m,b=t[p],x=b._private,w=i?x.style.display.value:"element",_="nodes"===x.group,E=!1;if("none"!==w){if(_&&a){E=!0;var S=x.position;y=S.x,m=S.y;var k=b.outerWidth(),P=k/2,C=b.outerHeight(),D=C/2;h=y-P,f=y+P,v=m-D,g=m+D,u=u>h?h:u,l=f>l?f:l,c=c>v?v:c,d=g>d?g:d}else if(b.isEdge()&&o){E=!0;var T=b._private.source._private.position,N=b._private.target._private.position,M=b._private.rstyle||{};if(h=T.x,f=N.x,v=T.y,g=N.y,h>f){var B=h;h=f,f=B}if(v>g){var B=v;v=g,g=B}if(u=u>h?h:u,l=f>l?f:l,c=c>v?v:c,d=g>d?g:d,i)for(var I=M.bezierPts||[],k=b._private.style.width.pxValue,A=k/2,L=0;L<I.length;L++){var O=I[L];h=O.x-A,f=O.x+A,v=O.y-A,g=O.y+A,u=u>h?h:u,l=f>l?f:l,c=c>v?v:c,d=g>d?g:d}}if(i){var z=b._private.style,M=b._private.rstyle,j=z.content.strValue,R=z["font-size"],Y=z["text-halign"],X=z["text-valign"],V=M.labelWidth,q=M.labelHeight,F=M.labelX,Z=M.labelY;if(E&&s&&j&&R&&null!=q&&null!=V&&null!=F&&null!=Z&&Y&&X){var W,H,U,$,K=q,G=V;if(b.isEdge())W=F-G/2,H=F+G/2,U=Z-K/2,$=Z+K/2;else{switch(Y.value){case"left":W=F-G,H=F;break;case"center":W=F-G/2,H=F+G/2;break;case"right":W=F,H=F+G}switch(X.value){case"top":U=Z-K,$=Z;break;case"center":U=Z-K/2,$=Z+K/2;break;case"bottom":U=Z,$=Z+K}}u=u>W?W:u,l=H>l?H:l,c=c>U?U:c,d=$>d?$:d}}}}return{x1:u,x2:l,y1:c,y2:d,w:l-u,h:d-c}}}),e.elesfn.modelPosition=e.elesfn.position,e.elesfn.modelPositions=e.elesfn.positions}(n),function(e){"use strict";function t(e){return function(t){var n=this;if(void 0===t&&(t=!0),0!==n.length&&n.isNode()&&!n.removed()){for(var r=0,i=n[0],a=i._private.edges,o=0;o<a.length;o++){var s=a[o];(t||!s.isLoop())&&(r+=e(i,s))}return r}}}function n(e,t){return function(n){for(var r,i=this.nodes(),a=0;a<i.length;a++){var o=i[a],s=o[e](n);void 0===s||void 0!==r&&!t(s,r)||(r=s)}return r}}e.fn.eles({degree:t(function(e,t){return t.source().same(t.target())?2:1}),indegree:t(function(e,t){return t.target().same(e)?1:0}),outdegree:t(function(e,t){return t.source().same(e)?1:0})}),e.fn.eles({minDegree:n("degree",function(e,t){return t>e}),maxDegree:n("degree",function(e,t){return e>t}),minIndegree:n("indegree",function(e,t){return t>e}),maxIndegree:n("indegree",function(e,t){return e>t}),minOutdegree:n("outdegree",function(e,t){return t>e}),maxOutdegree:n("outdegree",function(e,t){return e>t})}),e.fn.eles({totalDegree:function(e){for(var t=0,n=this.nodes(),r=0;r<n.length;r++)t+=n[r].degree(e);return t}})}(n),function(e){"use strict";e.fn.eles({on:e.define.on(),one:e.define.on({unbindSelfOnTrigger:!0}),once:e.define.on({unbindAllBindersOnTrigger:!0}),off:e.define.off(),trigger:e.define.trigger(),rtrigger:function(e,t){return 0!==this.length?(this.cy().notify({type:e,collection:this}),this.trigger(e,t),this):void 0}}),e.elesfn.bind=e.elesfn.on,e.elesfn.unbind=e.elesfn.off}(n),function(e){"use strict";e.fn.eles({nodes:function(e){return this.filter(function(e,t){return t.isNode()}).filter(e)},edges:function(e){return this.filter(function(e,t){return t.isEdge()}).filter(e)},filter:function(t){var n=this._private.cy;if(e.is.fn(t)){for(var r=[],i=0;i<this.length;i++){var a=this[i];t.apply(a,[i,a])&&r.push(a)}return new e.Collection(n,r)}return e.is.string(t)||e.is.elementOrCollection(t)?new e.Selector(t).filter(this):void 0===t?this:new e.Collection(n)},not:function(t){var n=this._private.cy;if(t){e.is.string(t)&&(t=this.filter(t));for(var r=[],i=0;i<this.length;i++){var a=this[i],o=t._private.ids[a.id()];o||r.push(a)}return new e.Collection(n,r)}return this},intersect:function(t){var n=this._private.cy;if(e.is.string(t)){var r=t;return this.filter(r)}for(var i=[],a=this,o=t,s=this.length<t.length,u=s?o._private.ids:a._private.ids,l=s?a:o,c=0;c<l.length;c++){var d=l[c]._private.data.id,p=u[d];p&&i.push(p)}return new e.Collection(n,i)},add:function(t){var n=this._private.cy;if(!t)return this;if(e.is.string(t)){var r=t;t=n.elements(r)}for(var i=[],a=0;a<this.length;a++)i.push(this[a]);for(var a=0;a<t.length;a++){var o=!this._private.ids[t[a].id()];o&&i.push(t[a])}return new e.Collection(n,i)},merge:function(t){var n=this._private,r=n.cy;if(!t)return this;if(e.is.string(t)){var i=t;t=r.elements(i)}for(var a=0;a<t.length;a++){var o=t[a],s=o.id(),u=!n.ids[s];if(u){var l=this.length++;this[l]=o,n.ids[s]=o,n.indexes[s]=l}}return this},unmergeOne:function(e){e=e[0];var t=this._private,n=e.id(),r=t.indexes[n];if(null==r)return this;this[r]=void 0,t.ids[n]=void 0,t.indexes[n]=void 0;var i=r===this.length-1;if(this.length>1&&!i){var a=this.length-1,o=this[a];this[a]=void 0,this[r]=o,t.indexes[o.id()]=r}return this.length--,this},unmerge:function(t){var n=this._private.cy;if(!t)return this;if(e.is.string(t)){var r=t;t=n.elements(r)}for(var i=0;i<t.length;i++)this.unmergeOne(t[i]);return this},map:function(e,t){for(var n=[],r=this,i=0;i<r.length;i++){var a=r[i],o=e.apply(t,[a,i,r]);n.push(o)}return n},stdFilter:function(t,n){for(var r=[],i=this,a=this._private.cy,o=0;o<i.length;o++){var s=i[o],u=t.apply(n,[s,o,i]);u&&r.push(s)}return new e.Collection(a,r)},max:function(e,t){for(var n,r=-1/0,i=this,a=0;a<i.length;a++){var o=i[a],s=e.apply(t,[o,a,i]);s>r&&(r=s,n=o)}return{value:r,ele:n}},min:function(e,t){for(var n,r=1/0,i=this,a=0;a<i.length;a++){var o=i[a],s=e.apply(t,[o,a,i]);r>s&&(r=s,n=o)}return{value:r,ele:n}}})}(n),function(e){"use strict";e.fn.eles({isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source().id()===this.target().id()},isSimple:function(){return this.isEdge()&&this.source().id()!==this.target().id()},group:function(){var e=this[0];return e?e._private.group:void 0}})}(n),function(e){"use strict";e.fn.eles({each:function(t){if(e.is.fn(t))for(var n=0;n<this.length;n++){var r=this[n],i=t.apply(r,[n,r]);if(i===!1)break}return this},forEach:function(t,n){if(e.is.fn(t))for(var r=0;r<this.length;r++){var i=this[r],a=t.apply(n,[i,r,this]);if(a===!1)break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(t,n){var r=[],i=this.length;null==n&&(n=i),null==t&&(t=0),0>t&&(t=i+t),0>n&&(n=i+n);for(var a=t;a>=0&&n>a&&i>a;a++)r.push(this[a]);return new e.Collection(this.cy(),r)},size:function(){return this.length},eq:function(t){return this[t]||new e.Collection(this.cy())},first:function(){return this[0]||new e.Collection(this.cy())},last:function(){return this[this.length-1]||new e.Collection(this.cy())},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(t){if(!e.is.fn(t))return this;var n=this.cy(),r=this.toArray().sort(t);return new e.Collection(n,r)},sortByZIndex:function(){return this.sort(e.Collection.zIndexSort)},zDepth:function(){var e=this[0];if(!e)return void 0;var t=e._private,n=t.group;if("nodes"===n)return t.data.parent?e.parents().size():0;var r=t.source,i=t.target,a=r._private.data.parent?r.parents().size():0,o=i._private.data.parent?i.parents().size():0;return Math.max(a-1,o-1,0)+.5}}),e.Collection.zIndexSort=function(e,t){var n=e.cy(),r=e._private,i=t._private,a=r.style["z-index"].value-i.style["z-index"].value,o=0,s=0,u=n.hasCompoundNodes(),l="nodes"===r.group,c="edges"===r.group,d="nodes"===i.group,p="edges"===i.group;u&&(o=e.zDepth(),s=t.zDepth());var h=o-s,f=0===h;return f?l&&p?1:c&&d?-1:0===a?r.index-i.index:a:h}}(n),function(e){"use strict";e.fn.eles({layoutPositions:function(t,n,r){var i=this.nodes(),a=this.cy();if(t.trigger({type:"layoutstart",layout:t}),n.animate){for(var o=0;o<i.length;o++){var s=i[o],u=o===i.length-1,l=r.call(s,o,s),c=s.position();e.is.number(c.x)&&e.is.number(c.y)||s.silentPosition({x:0,y:0}),s.animate({position:l},{duration:n.animationDuration,step:u?function(){n.fit&&a.fit(n.padding)}:void 0,complete:u?function(){null!=n.zoom&&a.zoom(n.zoom),n.pan&&a.pan(n.pan),n.fit&&a.fit(n.padding),t.one("layoutstop",n.stop),t.trigger({type:"layoutstop",layout:t})}:void 0})}t.one("layoutready",n.ready),t.trigger({type:"layoutready",layout:t})}else i.positions(r),n.fit&&a.fit(n.padding),null!=n.zoom&&a.zoom(n.zoom),n.pan&&a.pan(n.pan),t.one("layoutready",n.ready),t.trigger({type:"layoutready",layout:t}),t.one("layoutstop",n.stop),t.trigger({type:"layoutstop",layout:t});return this},layout:function(t){var n=this.cy();return n.layout(e.util.extend({},t,{eles:this})),this},makeLayout:function(t){var n=this.cy();return n.makeLayout(e.util.extend({},t,{eles:this}))}})}(n),function(e){"use strict";e.fn.eles({updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t._private.batchingStyle){for(var n=t._private.batchStyleEles,r=0;r<this.length;r++){var i=this[r];n.ids[i._private.id]||n.push(i)}return this}var a=t.style();e=e||void 0===e?!0:!1,a.apply(this);var o=this.updateCompoundBounds(),s=o.length>0?this.add(o):this;return e?s.rtrigger("style"):s.trigger("style"),this},updateMappers:function(e){var t=this._private.cy,n=t.style();if(e=e||void 0===e?!0:!1,!t.styleEnabled())return this;n.updateMappers(this);var r=this.updateCompoundBounds(),i=r.length>0?this.add(r):this;return e?i.rtrigger("style"):i.trigger("style"),this},renderedCss:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];if(n){var r=n.cy().style().getRenderedStyle(n);return void 0===e?r:r[e]}},css:function(t,n){var r=this.cy();if(!r.styleEnabled())return this;var i=!1,a=r.style();if(e.is.plainObject(t)){var o=t;a.applyBypass(this,o,i);var s=this.updateCompoundBounds(),u=s.length>0?this.add(s):this;u.rtrigger("style")}else if(e.is.string(t)){if(void 0===n){var l=this[0];return l?l._private.style[t].strValue:void 0}a.applyBypass(this,t,n,i);var s=this.updateCompoundBounds(),u=s.length>0?this.add(s):this;u.rtrigger("style")}else if(void 0===t){var l=this[0];return l?a.getRawStyle(l):void 0}return this},removeCss:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=!1,r=t.style(),i=this;if(void 0===e)for(var a=0;a<i.length;a++){var o=i[a];r.removeAllBypasses(o,n)}else{e=e.split(/\s+/);for(var a=0;a<i.length;a++){var o=i[a];r.removeBypasses(o,e,n)}}var s=this.updateCompoundBounds(),u=s.length>0?this.add(s):this;return u.rtrigger("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},visible:function(){var e=this.cy();if(!e.styleEnabled())return!0;var t=this[0],n=e.hasCompoundNodes();if(t){var r=t._private.style;if("visible"!==r.visibility.value||"element"!==r.display.value)return!1;if("nodes"===t._private.group){if(!n)return!0;var i=t._private.data.parent?t.parents():null;if(i)for(var a=0;a<i.length;a++){var o=i[a],s=o._private.style,u=s.visibility.value,l=s.display.value;
if("visible"!==u||"element"!==l)return!1}return!0}var c=t._private.source,d=t._private.target;return c.visible()&&d.visible()}},hidden:function(){var e=this[0];return e?!e.visible():void 0},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var r=n._private,i=r.style.opacity.value;if(!t)return i;var a=r.data.parent?n.parents():null;if(a)for(var o=0;o<a.length;o++){var s=a[o],u=s._private.style.opacity.value;i=u*i}return i}},transparent:function(){var e=this[0],t=e.cy().hasCompoundNodes();return e?t?0===e.effectiveOpacity():0===e._private.style.opacity.value:void 0},isFullAutoParent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];if(t){var n="auto"===t._private.style.width.value,r="auto"===t._private.style.height.value;return t.isParent()&&n&&r}}}),e.elesfn.style=e.elesfn.css,e.elesfn.renderedStyle=e.elesfn.renderedCss,e.elesfn.removeStyle=e.elesfn.removeCss}(n),function(e){"use strict";function t(e){return function(){var t=arguments;if(2===t.length){var n=t[0],r=t[1];this.bind(e.event,n,r)}else if(1===t.length){var r=t[0];this.bind(e.event,r)}else if(0===t.length){for(var i=0;i<this.length;i++){var a=this[i],o=!e.ableField||a._private[e.ableField];if(e.overrideAble){var s=e.overrideAble(a);if(void 0!==s&&(o=s,!s))return this}o&&(a._private[e.field]=e.value)}this.updateStyle(),this.trigger(e.event)}return this}}function n(n){e.elesfn[n.field]=function(){var e=this[0];if(e){if(n.overrideField){var t=n.overrideField(e);if(void 0!==t)return t}return e._private[n.field]}},e.elesfn[n.on]=t({event:n.on,field:n.field,ableField:n.ableField,overrideAble:n.overrideAble,value:!0}),e.elesfn[n.off]=t({event:n.off,field:n.field,ableField:n.ableField,overrideAble:n.overrideAble,value:!1})}n({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"}),n({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()?!1:void 0},on:"grabify",off:"ungrabify"}),n({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"}),n({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"}),e.elesfn.grabbed=function(){var e=this[0];return e?e._private.grabbed:void 0},n({field:"active",on:"activate",off:"unactivate"}),e.elesfn.inactive=function(){var e=this[0];return e?!e._private.active:void 0}}(n),function(e){"use strict";function t(t){return function(n){for(var r=[],i=this._private.cy,a=0;a<this.length;a++){var o=this[a],s=o._private[t.attr];s&&r.push(s)}return new e.Collection(i,r,{unique:!0}).filter(n)}}function n(t){return function(n){var r=[],i=this._private.cy,a=t||{};e.is.string(n)&&(n=i.$(n));for(var o=n.connectedEdges(),s=this._private.ids,u=0;u<o.length;u++){var l,c=o[u],d=c._private.data;if(a.thisIs){var p=d[a.thisIs];l=s[p]}else l=s[d.source]||s[d.target];l&&r.push(c)}return new e.Collection(i,r,{unique:!0})}}function r(t){var n={codirected:!1};return t=e.util.extend({},n,t),function(n){for(var r=this._private.cy,i=[],a=this.edges(),o=t,s=0;s<a.length;s++)for(var u=a[s],l=u.source()[0],c=l.id(),d=u.target()[0],p=d.id(),h=l._private.edges,f=0;f<h.length;f++){var v=h[f],g=v._private.data,y=g.target,m=g.source,b=y===p&&m===c,x=c===y&&p===m;(o.codirected&&b||!o.codirected&&(b||x))&&i.push(v)}return new e.Collection(r,i,{unique:!0}).filter(n)}}e.fn.eles({roots:function(t){for(var n=this,r=[],i=0;i<n.length;i++){var a=n[i];if(a.isNode()){var o=a.connectedEdges(function(){return this.data("target")===a.id()&&this.data("source")!==a.id()}).length>0;o||r.push(a)}}return new e.Collection(this._private.cy,r,{unique:!0}).filter(t)},leaves:function(t){for(var n=this,r=[],i=0;i<n.length;i++){var a=n[i];if(a.isNode()){var o=a.connectedEdges(function(){return this.data("source")===a.id()&&this.data("target")!==a.id()}).length>0;o||r.push(a)}}return new e.Collection(this._private.cy,r,{unique:!0}).filter(t)},outgoers:function(t){for(var n=this,r=[],i=0;i<n.length;i++){var a=n[i],o=a.id();if(a.isNode())for(var s=a._private.edges,u=0;u<s.length;u++){var l=s[u],c=l._private.data.source,d=l._private.data.target;c===o&&d!==o&&(r.push(l),r.push(l.target()[0]))}}return new e.Collection(this._private.cy,r,{unique:!0}).filter(t)},successors:function(t){for(var n=this,r=[],i={};;){var a=n.outgoers();if(0===a.length)break;for(var o=!1,s=0;s<a.length;s++){var u=a[s],l=u.id();i[l]||(i[l]=!0,r.push(u),o=!0)}if(!o)break;n=a}return new e.Collection(this._private.cy,r,{unique:!0}).filter(t)},incomers:function(t){for(var n=this,r=[],i=0;i<n.length;i++){var a=n[i],o=a.id();if(a.isNode())for(var s=a._private.edges,u=0;u<s.length;u++){var l=s[u],c=l._private.data.source,d=l._private.data.target;d===o&&c!==o&&(r.push(l),r.push(l.source()[0]))}}return new e.Collection(this._private.cy,r,{unique:!0}).filter(t)},predecessors:function(t){for(var n=this,r=[],i={};;){var a=n.incomers();if(0===a.length)break;for(var o=!1,s=0;s<a.length;s++){var u=a[s],l=u.id();i[l]||(i[l]=!0,r.push(u),o=!0)}if(!o)break;n=a}return new e.Collection(this._private.cy,r,{unique:!0}).filter(t)}}),e.fn.eles({neighborhood:function(t){for(var n=[],r=this._private.cy,i=this.nodes(),a=0;a<i.length;a++)for(var o=i[a],s=o.connectedEdges(),u=0;u<s.length;u++){var l=s[u],c=l.connectedNodes().not(o);c.length>0&&n.push(c[0]),n.push(l[0])}return new e.Collection(r,n,{unique:!0}).filter(t)},closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}}),e.fn.eles({source:function(e){var t,n=this[0];return n&&(t=n._private.source),t&&e?t.filter(e):t},target:function(e){var t,n=this[0];return n&&(t=n._private.target),t&&e?t.filter(e):t},sources:t({attr:"source"}),targets:t({attr:"target"})}),e.fn.eles({edgesWith:n(),edgesTo:n({thisIs:"source"})}),e.fn.eles({connectedEdges:function(t){for(var n=[],r=this._private.cy,i=this,a=0;a<i.length;a++){var o=i[a];if(o.isNode())for(var s=o._private.edges,u=0;u<s.length;u++){var l=s[u];n.push(l)}}return new e.Collection(r,n,{unique:!0}).filter(t)},connectedNodes:function(t){for(var n=[],r=this._private.cy,i=this,a=0;a<i.length;a++){var o=i[a];o.isEdge()&&(n.push(o.source()[0]),n.push(o.target()[0]))}return new e.Collection(r,n,{unique:!0}).filter(t)},parallelEdges:r(),codirectedEdges:r({codirected:!0})})}(n),function(e){"use strict";e.fn.eles({fit:function(){},center:function(){}})}(n),function(e){"use strict";e.Minheap=function(t,n,r){return new e.Heap(t,n,e.Heap.minHeapComparator,r)},e.Maxheap=function(t,n,r){return new e.Heap(t,n,e.Heap.maxHeapComparator,r)},e.Heap=function(t,n,r,i){if("undefined"!=typeof r&&"undefined"!=typeof n){"undefined"==typeof i&&(i=e.Heap.idFn);var a,o,s,u=[],l={},c=[],d=0;for(n=this.getArgumentAsCollection(n,t),s=n.length,d=0;s>d;d+=1){if(u.push(i.call(t,n[d],d,n)),a=n[d].id(),l.hasOwnProperty(a))throw"ERROR: Multiple items with the same id found: "+a;l[a]=d,c.push(a)}for(this._private={cy:t,heap:u,pointers:l,elements:c,comparator:r,extractor:i,length:s},d=Math.floor(s/2);d>=0;d-=1)o=this.heapify(d);return o}},e.Heap.idFn=function(e){return e.id()},e.Heap.minHeapComparator=function(e,t){return e>=t},e.Heap.maxHeapComparator=function(e,t){return t>=e},e.fn.heap=function(t){for(var n in t){var r=t[n];e.Heap.prototype[n]=r}},e.heapfn=e.Heap.prototype,e.heapfn.size=function(){return this._private.length},e.heapfn.getArgumentAsCollection=function(t,n){var r;if("undefined"==typeof n&&(n=this._private.cy),e.is.elementOrCollection(t))r=t;else{for(var i=[],a=[].concat.apply([],[t]),o=0;o<a.length;o++){var s=a[o],u=n.getElementById(s);u.length>0&&i.push(u)}r=new e.Collection(n,i)}return r},e.heapfn.isHeap=function(){var e,t,n,r,i,a=this._private.heap,o=a.length,s=this._private.comparator;for(e=0;o>e;e+=1)if(t=2*e+1,n=t+1,r=o>t?s(a[t],a[e]):!0,i=o>n?s(a[n],a[e]):!0,!r||!i)return!1;return!0},e.heapfn.heapSwap=function(e,t){var n=this._private.heap,r=this._private.pointers,i=this._private.elements,a=n[e],o=i[e],s=i[e],u=i[t];n[e]=n[t],i[e]=i[t],r[s]=t,r[u]=e,n[t]=a,i[t]=o},e.heapfn.heapify=function(e,t){var n,r,i,a,o,s,u,l=0,c=!1;for("undefined"==typeof t&&(t=!0),n=this._private.heap,l=n.length,s=this._private.comparator,r=e;!c;)t?(i=2*r+1,a=i+1,o=r,l>i&&!s(n[i],n[o])&&(o=i),l>a&&!s(n[a],n[o])&&(o=a),c=o===r,c||(this.heapSwap(o,r),r=o)):(u=Math.floor((r-1)/2),o=r,c=0>u||s(n[o],n[u]),c||(this.heapSwap(o,u),r=u))},e.heapfn.insert=function(e){var t,n,r,i,a,o=this.getArgumentAsCollection(e),s=o.length;for(a=0;s>a;a+=1){if(t=o[a],n=this._private.heap.length,r=this._private.extractor(t),i=t.id(),this._private.pointers.hasOwnProperty(i))throw"ERROR: Multiple items with the same id found: "+i;this._private.heap.push(r),this._private.elements.push(i),this._private.pointers[i]=n,this.heapify(n,!1)}this._private.length=this._private.heap.length},e.heapfn.getValueById=function(e){if(this._private.pointers.hasOwnProperty(e)){var t=this._private.pointers[e];return this._private.heap[t]}},e.heapfn.contains=function(e){for(var t=this.getArgumentAsCollection(e),n=0;n<t.length;n+=1){var r=t[n].id();if(!this._private.pointers.hasOwnProperty(r))return!1}return!0},e.heapfn.top=function(){return this._private.length>0?{value:this._private.heap[0],id:this._private.elements[0]}:void 0},e.heapfn.pop=function(){if(this._private.length>0){var e,t,n,r=this.top(),i=this._private.length-1;return this.heapSwap(0,i),e=this._private.elements[i],t=this._private.heap[i],n=e,this._private.heap.pop(),this._private.elements.pop(),this._private.length=this._private.heap.length,this._private.pointers[n]=void 0,this.heapify(0),r}},e.heapfn.findDirectionHeapify=function(e){var t=Math.floor((e-1)/2),n=this._private.heap,r=0>t||this._private.comparator(n[e],n[t]);this.heapify(e,r)},e.heapfn.edit=function(t,n){for(var r=this.getArgumentAsCollection(t),i=0;i<r.length;i+=1){var a=r[i].id(),o=this._private.pointers[a],s=this._private.heap[o];e.is.number(n)?this._private.heap[o]=n:e.is.fn(n)&&(this._private.heap[o]=n.call(this._private.cy,s,o)),this.findDirectionHeapify(o)}},e.heapfn["delete"]=function(e){for(var t=this.getArgumentAsCollection(e),n=0;n<t.length;n+=1){var r,i,a,o=t[n].id(),s=this._private.pointers[o],u=this._private.length-1;s!==u&&this.heapSwap(s,u),r=this._private.elements[u],i=this._private.heap[u],a=r,this._private.heap.pop(),this._private.elements.pop(),this._private.length=this._private.heap.length,this._private.pointers[a]=void 0,this.findDirectionHeapify(s)}return i}}(n),function(e){"use strict";function t(e){t.CANVAS_LAYERS=5,t.SELECT_BOX=0,t.DRAG=2,t.NODE=4,t.TEXTURE_BUFFER=0,t.BUFFER_COUNT=2,this.options=e,this.data={select:[void 0,void 0,void 0,void 0,0],renderer:this,cy:e.cy,container:e.cy.container(),canvases:new Array(t.CANVAS_LAYERS),contexts:new Array(t.CANVAS_LAYERS),canvasNeedsRedraw:new Array(t.CANVAS_LAYERS),bufferCanvases:new Array(t.BUFFER_COUNT),bufferContexts:new Array(t.CANVAS_LAYERS)},this.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},this.timeoutData={panTimeout:null},this.dragData={possibleDragElements:[]},this.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},this.zoomData={freeToZoom:!1,lastPointerX:null},this.redraws=0,this.showFps=e.showFps,this.bindings=[],this.data.canvasContainer=document.createElement("div");var n=this.data.canvasContainer.style;n.position="absolute",n.zIndex="0",n.overflow="hidden",this.data.container.appendChild(this.data.canvasContainer);for(var r=0;r<t.CANVAS_LAYERS;r++)this.data.canvases[r]=document.createElement("canvas"),this.data.contexts[r]=this.data.canvases[r].getContext("2d"),this.data.canvases[r].style.position="absolute",this.data.canvases[r].setAttribute("data-id","layer"+r),this.data.canvases[r].style.zIndex=String(t.CANVAS_LAYERS-r),this.data.canvasContainer.appendChild(this.data.canvases[r]),this.data.canvasNeedsRedraw[r]=!1;this.data.topCanvas=this.data.canvases[0],this.data.canvases[t.NODE].setAttribute("data-id","layer"+t.NODE+"-node"),this.data.canvases[t.SELECT_BOX].setAttribute("data-id","layer"+t.SELECT_BOX+"-selectbox"),this.data.canvases[t.DRAG].setAttribute("data-id","layer"+t.DRAG+"-drag");for(var r=0;r<t.BUFFER_COUNT;r++)this.data.bufferCanvases[r]=document.createElement("canvas"),this.data.bufferContexts[r]=this.data.bufferCanvases[r].getContext("2d"),this.data.bufferCanvases[r].style.position="absolute",this.data.bufferCanvases[r].setAttribute("data-id","buffer"+r),this.data.bufferCanvases[r].style.zIndex=String(-r-1),this.data.bufferCanvases[r].style.visibility="hidden";this.hideEdgesOnViewport=e.hideEdgesOnViewport,this.hideLabelsOnViewport=e.hideLabelsOnViewport,this.textureOnViewport=e.textureOnViewport,this.wheelSensitivity=e.wheelSensitivity,this.motionBlurEnabled=void 0===e.motionBlur?!0:e.motionBlur,this.forcedPixelRatio=e.pixelRatio,this.motionBlur=!0,this.tapThreshold=e.tapThreshold,this.tapThreshold2=e.tapThreshold*e.tapThreshold,this.tapholdDuration=500,this.load()}t.panOrBoxSelectDelay=400,t.isTouch=e.is.touch();var n="undefined"!=typeof Path2D;t.usePaths=function(){return n},t.prototype.notify=function(n){var r;r=e.is.array(n.type)?n.type:[n.type];for(var i=0;i<r.length;i++){var a=r[i];switch(a){case"destroy":return void this.destroy();case"add":case"remove":case"load":this.updateNodesCache(),this.updateEdgesCache();break;case"viewport":this.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;break;case"style":this.updateCachedZSortedEles()}("load"===a||"resize"===a)&&(this.invalidateContainerClientCoordsCache(),this.matchCanvasSize(this.data.container))}this.data.canvasNeedsRedraw[t.NODE]=!0,this.data.canvasNeedsRedraw[t.DRAG]=!0,this.redraw()},t.prototype.destroy=function(){this.destroyed=!0;for(var e=0;e<this.bindings.length;e++){var t=this.bindings[e],n=t;n.target.removeEventListener(n.event,n.handler,n.useCapture)}this.removeObserver&&this.removeObserver.disconnect(),this.labelCalcDiv&&document.body.removeChild(this.labelCalcDiv)};for(var r in e.math)t.prototype[r]=e.math[r];e("renderer","canvas",t)}(n),function(e){"use strict";var t=e("renderer","canvas"),n=t.prototype,r=t.arrowShapes={};t.arrowShapeHeight=.3;var i=function(e,t,n,r,i,a){var o=n-i/2,s=n+i/2,u=r-a/2,l=r+a/2;return e>=o&&s>=e&&t>=u&&l>=t},a=function(e,t,n,r,i){r=-r;var a=e*Math.cos(r)-t*Math.sin(r),o=e*Math.sin(r)+t*Math.cos(r),s=a*n,u=o*n,l=s+i.x,c=u+i.y;return{x:l,y:c}};r.arrow={_points:[-.15,-.3,0,0,.15,-.3],collide:function(t,n,i,a,o,s,u,l){var c=r.arrow._points;return e.math.pointInsidePolygon(t,n,c,i,a,o,s,u,l)},roughCollide:i,draw:function(e,t,n,i){for(var o=r.arrow._points,s=0;s<o.length/2;s++){var u=a(o[2*s],o[2*s+1],t,n,i);e.lineTo(u.x,u.y)}},spacing:function(){return 0},gap:function(e){return 2*e._private.style.width.pxValue}},r.triangle=r.arrow,r["triangle-backcurve"]={_ctrlPt:[0,-.15],collide:function(t,n,i,a,o,s,u,l){var c=r.triangle._points;return e.math.pointInsidePolygon(t,n,c,i,a,o,s,u,l)},roughCollide:i,draw:function(e,t,n,i){for(var o,s=r.triangle._points,u=0;u<s.length/2;u++){var l=a(s[2*u],s[2*u+1],t,n,i);0===u&&(o=l),e.lineTo(l.x,l.y)}var c=this._ctrlPt,d=a(c[0],c[1],t,n,i);e.quadraticCurveTo(d.x,d.y,o.x,o.y)},spacing:function(){return 0},gap:function(e){return 2*e._private.style.width.pxValue}},r["triangle-tee"]={_points:[-.15,-.3,0,0,.15,-.3,-.15,-.3],_pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(t,n,i,a,o,s,u,l){var c=r["triangle-tee"]._points,d=r["triangle-tee"]._pointsTee,p=e.math.pointInsidePolygon(t,n,d,i,a,o,s,u,l)||e.math.pointInsidePolygon(t,n,c,i,a,o,s,u,l);return p},roughCollide:i,draw:function(e,t,n,i){for(var o=r["triangle-tee"]._points,s=0;s<o.length/2;s++){var u=a(o[2*s],o[2*s+1],t,n,i);e.lineTo(u.x,u.y)}var l=r["triangle-tee"]._pointsTee,c=a(l[0],l[1],t,n,i);e.moveTo(c.x,c.y);for(var s=0;s<l.length/2;s++){var u=a(l[2*s],l[2*s+1],t,n,i);e.lineTo(u.x,u.y)}},spacing:function(){return 0},gap:function(e){return 2*e._private.style.width.pxValue}},r["half-triangle-overshot"]={_points:[0,-.25,-.5,-.25,.5,.25],leavePathOpen:!0,matchEdgeWidth:!0,collide:function(t,n,r,i,a,o,s,u){var l=this._points;return e.math.pointInsidePolygon(t,n,l,r,i,a,o,s,u)},roughCollide:i,draw:function(e,t,n,r){for(var i=this._points,o=0;o<i.length/2;o++){var s=a(i[2*o],i[2*o+1],t,n,r);e.lineTo(s.x,s.y)}},spacing:function(){return 0},gap:function(e){return 2*e._private.style.width.pxValue}},r.none={collide:function(){return!1},roughCollide:function(){return!1},draw:function(){},spacing:function(){return 0},gap:function(){return 0}},r.circle={_baseRadius:.15,collide:function(e,t,n,i,a,o,s,u){if(a!=o){var l=(o+u)/(a+u);return t/=l,i/=l,Math.pow(n-e,2)+Math.pow(i-t,2)<=Math.pow((a+u)*r.circle._baseRadius,2)}return Math.pow(n-e,2)+Math.pow(i-t,2)<=Math.pow((a+u)*r.circle._baseRadius,2)},roughCollide:i,draw:function(e,t,n,i){e.arc(i.x,i.y,r.circle._baseRadius*t,0,2*Math.PI,!1)},spacing:function(e){return n.getArrowWidth(e._private.style.width.pxValue)*r.circle._baseRadius},gap:function(e){return 2*e._private.style.width.pxValue}},r.inhibitor={_points:[-.25,0,-.25,-.1,.25,-.1,.25,0],collide:function(t,n,i,a,o,s,u,l){var c=r.inhibitor._points;return e.math.pointInsidePolygon(t,n,c,i,a,o,s,u,l)},roughCollide:i,draw:function(e,t,n,i){for(var o=r.inhibitor._points,s=0;s<o.length/2;s++){var u=a(o[2*s],o[2*s+1],t,n,i);e.lineTo(u.x,u.y)}},spacing:function(){return 1},gap:function(){return 1}},r.tee=r.inhibitor,r.square={_points:[-.15,0,.15,0,.15,-.3,-.15,-.3],collide:function(t,n,i,a,o,s,u,l){var c=r.square._points;return e.math.pointInsidePolygon(t,n,c,i,a,o,s,u,l)},roughCollide:i,draw:function(e,t,n,i){for(var o=r.square._points,s=0;s<o.length/2;s++){var u=a(o[2*s],o[2*s+1],t,n,i);e.lineTo(u.x,u.y)}},spacing:function(){return 0},gap:function(e){return 2*e._private.style.width.pxValue}},r.diamond={_points:[-.15,-.15,0,-.3,.15,-.15,0,0],collide:function(t,n,i,a,o,s,u,l){var c=r.diamond._points;return e.math.pointInsidePolygon(t,n,c,i,a,o,s,u,l)},roughCollide:i,draw:function(e,t,n,i){for(var o=r.diamond._points,s=0;s<o.length/2;s++){var u=a(o[2*s],o[2*s+1],t,n,i);e.lineTo(u.x,u.y)}},spacing:function(){return 0},gap:function(e){return e._private.style.width.pxValue}}}(n),function(e){"use strict";var t=e("renderer","canvas");t.prototype.getCachedNodes=function(){var e=this.data,t=this.data.cy;return null==e.cache&&(e.cache={}),null==e.cache.cachedNodes&&(e.cache.cachedNodes=t.nodes()),e.cache.cachedNodes},t.prototype.updateNodesCache=function(){var e=this.data,t=this.data.cy;null==e.cache&&(e.cache={}),e.cache.cachedNodes=t.nodes()},t.prototype.getCachedEdges=function(){var e=this.data,t=this.data.cy;return null==e.cache&&(e.cache={}),null==e.cache.cachedEdges&&(e.cache.cachedEdges=t.edges()),e.cache.cachedEdges},t.prototype.updateEdgesCache=function(){var e=this.data,t=this.data.cy;null==e.cache&&(e.cache={}),e.cache.cachedEdges=t.edges()}}(n),function(e){"use strict";var t=e("renderer","canvas");t.prototype.projectIntoViewport=function(e,t){var n=this.findContainerClientCoords(),r=n[0],i=n[1],a=e-r,o=t-i;return a-=this.data.cy.pan().x,o-=this.data.cy.pan().y,a/=this.data.cy.zoom(),o/=this.data.cy.zoom(),[a,o]},t.prototype.findContainerClientCoords=function(){var e=this.data.container,t=this.containerBB=this.containerBB||e.getBoundingClientRect();return[t.left,t.top,t.right-t.left,t.bottom-t.top]},t.prototype.invalidateContainerClientCoordsCache=function(){this.containerBB=null},t.prototype.findNearestElement=function(n,r,i){function a(e){var a=e.outerWidth(),o=e.outerHeight(),u=a/2,c=o/2,d=e._private.position;if(d.x-u<=n&&n<=d.x+u&&d.y-c<=r&&r<=d.y+c){var p=!i||e.visible()&&!e.transparent();if(i&&!p)return;var h=t.nodeShapes[s.getNodeShape(e)],v=e._private.style["border-width"].pxValue/2;h.checkPoint(n,r,v,a+f,o+f,d.x,d.y)&&l.push(e)}}function o(o){var u,c=o._private.rscratch,d=o._private.style,f=d.width.pxValue,v=f*f,g=2*f,y=o._private.source,m=o._private.target,b=!1,x=function(){if(void 0!==u)return u;if(!i)return u=!0,!0;var e=o.visible()&&!o.transparent();return e?(u=!0,!0):(u=!1,!1)};if("self"===c.edgeType)((b=e.math.inBezierVicinity(n,r,c.startX,c.startY,c.cp2ax,c.cp2ay,c.selfEdgeMidX,c.selfEdgeMidY,v))&&x()&&v+h>e.math.sqDistanceToQuadraticBezier(n,r,c.startX,c.startY,c.cp2ax,c.cp2ay,c.selfEdgeMidX,c.selfEdgeMidY)||(b=e.math.inBezierVicinity(n,r,c.selfEdgeMidX,c.selfEdgeMidY,c.cp2cx,c.cp2cy,c.endX,c.endY,v))&&x()&&v+h>e.math.sqDistanceToQuadraticBezier(n,r,c.selfEdgeMidX,c.selfEdgeMidY,c.cp2cx,c.cp2cy,c.endX,c.endY))&&l.push(o);else if("haystack"===c.edgeType){var w=d["haystack-radius"].value,_=w/2,E=m._private.position,S=m.width(),k=m.height(),P=y._private.position,C=y.width(),D=y.height(),T=P.x+c.source.x*C*_,N=P.y+c.source.y*D*_,M=E.x+c.target.x*S*_,B=E.y+c.target.y*k*_;(b=e.math.inLineVicinity(n,r,T,N,M,B,g))&&x()&&v+h>e.math.sqDistanceToFiniteLine(n,r,T,N,M,B)&&l.push(o)}else"straight"===c.edgeType?(b=e.math.inLineVicinity(n,r,c.startX,c.startY,c.endX,c.endY,g))&&x()&&v+h>e.math.sqDistanceToFiniteLine(n,r,c.startX,c.startY,c.endX,c.endY)&&l.push(o):"bezier"===c.edgeType&&(b=e.math.inBezierVicinity(n,r,c.startX,c.startY,c.cp2x,c.cp2y,c.endX,c.endY,v))&&x()&&v+h>e.math.sqDistanceToQuadraticBezier(n,r,c.startX,c.startY,c.cp2x,c.cp2y,c.endX,c.endY)&&l.push(o);if(b&&x()&&0===l.length||l[l.length-1]!==o){var I=t.arrowShapes[d["source-arrow-shape"].value],A=t.arrowShapes[d["target-arrow-shape"].value],y=y||o._private.source,m=m||o._private.target,E=m._private.position,P=y._private.position,L=s.getArrowWidth(d.width.pxValue),O=s.getArrowHeight(d.width.pxValue),z=L,j=O;(I.roughCollide(n,r,c.arrowStartX,c.arrowStartY,L,O,[c.arrowStartX-P.x,c.arrowStartY-P.y],0)&&I.collide(n,r,c.arrowStartX,c.arrowStartY,L,O,[c.arrowStartX-P.x,c.arrowStartY-P.y],0)||A.roughCollide(n,r,c.arrowEndX,c.arrowEndY,z,j,[c.arrowEndX-E.x,c.arrowEndY-E.y],0)&&A.collide(n,r,c.arrowEndX,c.arrowEndY,z,j,[c.arrowEndX-E.x,c.arrowEndY-E.y],0))&&l.push(o)}p&&l.length>0&&l[l.length-1]===o&&(a(y),a(m))}for(var s=this,u=this.getCachedZSortedEles(),l=[],c=t.isTouch,d=this.data.cy.zoom(),p=this.data.cy.hasCompoundNodes(),h=(c?256:32)/d,f=(c?16:0)/d,v=u.length-1;v>=0;v--){var g=u[v];if(l.length>0)break;"nodes"===g._private.group?a(u[v]):o(u[v])}return l.length>0?l[l.length-1]:null},t.prototype.getAllInBox=function(n,r,i,a){var o=this.getCachedNodes(),s=this.getCachedEdges(),u=[],l=Math.min(n,i),c=Math.max(n,i),d=Math.min(r,a),p=Math.max(r,a);n=l,i=c,r=d,a=p;for(var h,f=0;f<o.length;f++){var v=o[f]._private.position,g=this.getNodeShape(o[f]),y=this.getNodeWidth(o[f]),m=this.getNodeHeight(o[f]),b=o[f]._private.style["border-width"].pxValue/2,x=t.nodeShapes[g];x.intersectBox(n,r,i,a,y,m,v.x,v.y,b)&&u.push(o[f])}for(var f=0;f<s.length;f++){var w=s[f]._private.rscratch;if("self"==s[f]._private.rscratch.edgeType&&((h=e.math.boxInBezierVicinity(n,r,i,a,w.startX,w.startY,w.cp2ax,w.cp2ay,w.endX,w.endY,s[f]._private.style.width.pxValue))&&(2==h||1==h&&e.math.checkBezierInBox(n,r,i,a,w.startX,w.startY,w.cp2ax,w.cp2ay,w.endX,w.endY,s[f]._private.style.width.pxValue))||(h=e.math.boxInBezierVicinity(n,r,i,a,w.startX,w.startY,w.cp2cx,w.cp2cy,w.endX,w.endY,s[f]._private.style.width.pxValue))&&(2==h||1==h&&e.math.checkBezierInBox(n,r,i,a,w.startX,w.startY,w.cp2cx,w.cp2cy,w.endX,w.endY,s[f]._private.style.width.pxValue)))&&u.push(s[f]),"bezier"==w.edgeType&&(h=e.math.boxInBezierVicinity(n,r,i,a,w.startX,w.startY,w.cp2x,w.cp2y,w.endX,w.endY,s[f]._private.style.width.pxValue))&&(2==h||1==h&&e.math.checkBezierInBox(n,r,i,a,w.startX,w.startY,w.cp2x,w.cp2y,w.endX,w.endY,s[f]._private.style.width.pxValue))&&u.push(s[f]),"straight"==w.edgeType&&(h=e.math.boxInBezierVicinity(n,r,i,a,w.startX,w.startY,.5*w.startX+.5*w.endX,.5*w.startY+.5*w.endY,w.endX,w.endY,s[f]._private.style.width.pxValue))&&(2==h||1==h&&e.math.checkStraightEdgeInBox(n,r,i,a,w.startX,w.startY,w.endX,w.endY,s[f]._private.style.width.pxValue))&&u.push(s[f]),"haystack"==w.edgeType){var _=s[f].target()[0],E=_.position(),S=s[f].source()[0],k=S.position(),P=k.x+w.source.x,C=k.y+w.source.y,D=E.x+w.target.x,T=E.y+w.target.y,N=P>=n&&i>=P&&C>=r&&a>=C,M=D>=n&&i>=D&&T>=r&&a>=T;N&&M&&u.push(s[f])}}return u},t.prototype.getNodeWidth=function(e){return e.width()},t.prototype.getNodeHeight=function(e){return e.height()},t.prototype.getNodeShape=function(e){var t=e._private.style.shape.value;return e.isParent()?"rectangle"===t||"roundrectangle"===t?t:"rectangle":t},t.prototype.getNodePadding=function(e){var t=e._private.style["padding-left"].pxValue,n=e._private.style["padding-right"].pxValue,r=e._private.style["padding-top"].pxValue,i=e._private.style["padding-bottom"].pxValue;return isNaN(t)&&(t=0),isNaN(n)&&(n=0),isNaN(r)&&(r=0),isNaN(i)&&(i=0),{left:t,right:n,top:r,bottom:i}},t.prototype.zOrderSort=e.Collection.zIndexSort,t.prototype.updateCachedZSortedEles=function(){this.getCachedZSortedEles(!0)},t.prototype.getCachedZSortedEles=function(e){var t=this.lastZOrderCachedNodes,n=this.lastZOrderCachedEdges,r=this.getCachedNodes(),i=this.getCachedEdges(),a=[];if(!e&&t&&n&&t===r&&n===i)a=this.cachedZSortedEles;else{for(var o=0;o<r.length;o++)r[o].visible()&&!r[o].transparent()&&a.push(r[o]);for(var o=0;o<i.length;o++)i[o].visible()&&!i[o].transparent()&&a.push(i[o]);a.sort(this.zOrderSort),this.cachedZSortedEles=a}return this.lastZOrderCachedNodes=r,this.lastZOrderCachedEdges=i,a},t.prototype.projectBezier=function(t){function n(e){a.push({x:r(e[0],e[2],e[4],.05),y:r(e[1],e[3],e[5],.05)}),a.push({x:r(e[0],e[2],e[4],.25),y:r(e[1],e[3],e[5],.25)}),a.push({x:r(e[0],e[2],e[4],.4),y:r(e[1],e[3],e[5],.4)});var t={x:r(e[0],e[2],e[4],.5),y:r(e[1],e[3],e[5],.5)};a.push(t),"self"===i.edgeType?(i.midX=i.selfEdgeMidX,i.midY=i.selfEdgeMidY):(i.midX=t.x,i.midY=t.y),a.push({x:r(e[0],e[2],e[4],.6),y:r(e[1],e[3],e[5],.6)}),a.push({x:r(e[0],e[2],e[4],.75),y:r(e[1],e[3],e[5],.75)}),a.push({x:r(e[0],e[2],e[4],.95),y:r(e[1],e[3],e[5],.95)})}var r=e.math.qbezierAt,i=t._private.rscratch,a=t._private.rstyle.bezierPts=[];"self"===i.edgeType?(n([i.startX,i.startY,i.cp2ax,i.cp2ay,i.selfEdgeMidX,i.selfEdgeMidY]),n([i.selfEdgeMidX,i.selfEdgeMidY,i.cp2cx,i.cp2cy,i.endX,i.endY])):"bezier"===i.edgeType&&n([i.startX,i.startY,i.cp2x,i.cp2y,i.endX,i.endY])},t.prototype.recalculateNodeLabelProjection=function(e){var t=e._private.style.content.strValue;if(t&&!t.match(/^\s+$/)){var n,r,i=e.outerWidth(),a=e.outerHeight(),o=e._private.position,s=e._private.style["text-halign"].strValue,u=e._private.style["text-valign"].strValue,l=e._private.rscratch,c=e._private.rstyle;switch(s){case"left":n=o.x-i/2;break;case"right":n=o.x+i/2;break;default:n=o.x}switch(u){case"top":r=o.y-a/2;break;case"bottom":r=o.y+a/2;break;default:r=o.y}l.labelX=n,l.labelY=r,c.labelX=n,c.labelY=r,this.applyLabelDimensions(e)}},t.prototype.recalculateEdgeLabelProjection=function(t){var n=t._private.style.content.strValue;if(n&&!n.match(/^\s+$/)){var r,i,a,o,s=t._private.rscratch,u=t._private.rstyle;if("self"==s.edgeType)a=s.selfEdgeMidX,o=s.selfEdgeMidY;else if("straight"==s.edgeType)a=(s.startX+s.endX)/2,o=(s.startY+s.endY)/2;else if("bezier"==s.edgeType)a=e.math.qbezierAt(s.startX,s.cp2x,s.endX,.5),o=e.math.qbezierAt(s.startY,s.cp2y,s.endY,.5);else if("haystack"==s.edgeType){var l=t._private.source._private.position,c=t._private.target._private.position;a=(l.x+s.source.x+c.x+s.target.x)/2,o=(l.y+s.source.y+c.y+s.target.y)/2}r=a,i=o,s.labelX=r,s.labelY=i,u.labelX=r,u.labelY=i,this.applyLabelDimensions(t)}},t.prototype.applyLabelDimensions=function(e){var t=e._private.rscratch,n=e._private.rstyle,r=this.getLabelText(e),i=this.calculateLabelDimensions(e,r);n.labelWidth=i.width,t.labelWidth=i.width,n.labelHeight=i.height,t.labelHeight=i.height},t.prototype.getLabelText=function(e){var t=e._private.style,n=e._private.style.content.strValue,r=t["text-transform"].value;return"none"==r||("uppercase"==r?n=n.toUpperCase():"lowercase"==r&&(n=n.toLowerCase())),n},t.prototype.calculateLabelDimensions=function(e,t){var n=this,r=e._private.style,i=r["font-style"].strValue,a=r["font-size"].pxValue+"px",o=r["font-family"].strValue,s=r["font-weight"].strValue,u=e._private.labelKey,l=n.labelDimCache||(n.labelDimCache={});if(l[u])return l[u];var c=this.labelCalcDiv;c||(c=this.labelCalcDiv=document.createElement("div"),document.body.appendChild(c));var d=c.style;return d.fontFamily=o,d.fontStyle=i,d.fontSize=a,d.fontWeight=s,d.position="absolute",d.left="-9999px",d.top="-9999px",d.zIndex="-1",d.visibility="hidden",d.pointerEvents="none",d.padding="0",d.lineHeight="1",c.textContent=t,l[u]={width:c.clientWidth,height:c.clientHeight},l[u]},t.prototype.recalculateRenderedStyle=function(e){for(var t=[],n=[],r={},i=0;i<e.length;i++){var a=e[i],o=a._private,s=o.rscratch,u=o.rstyle,l=o.data.id,c=null!=s.boundingBoxKey&&o.boundingBoxKey===s.boundingBoxKey,d=null!=s.labelKey&&o.labelKey===s.labelKey,p=c&&d;if("nodes"===a._private.group){var h=o.position,f=null!=u.nodeX&&null!=u.nodeY&&h.x===u.nodeX&&h.y===u.nodeY;f&&p||n.push(a),u.nodeX=h.x,u.nodeY=h.y}else{var v=a._private.source._private.position,g=a._private.target._private.position,y=null!=u.srcX&&null!=u.srcY&&v.x===u.srcX&&v.y===u.srcY,m=null!=u.tgtX&&null!=u.tgtY&&g.x===u.tgtX&&g.y===u.tgtY,b=y&&m;if(!b||!p){var x=o.style["curve-style"].value;if("bezier"===x){if(!r[l]){t.push(a),r[l]=!0;for(var w=a.parallelEdges(),i=0;i<w.length;i++){var _=w[i],E=_._private.data.id;r[E]||(t.push(_),r[E]=!0)}}}else t.push(a)}u.srcX=v.x,u.srcY=v.y,u.tgtX=g.x,u.tgtY=g.y}s.boundingBoxKey=o.boundingBoxKey,s.labelKey=o.labelKey}this.recalculateEdgeProjections(t),this.recalculateLabelProjections(n,t)},t.prototype.recalculateLabelProjections=function(e,t){for(var n=0;n<e.length;n++)this.recalculateNodeLabelProjection(e[n]);for(var n=0;n<t.length;n++)this.recalculateEdgeLabelProjection(t[n])},t.prototype.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)},t.prototype.findEdgeControlPoints=function(n){if(n&&0!==n.length){for(var r,i={},a=[],o=[],s=0;s<n.length;s++){var u=n[s],l=u._private.style,c="unbundled-bezier"===l["curve-style"].value;if("none"!==l.display.value)if("haystack"!==l["curve-style"].value){var d=u._private.data.source,p=u._private.data.target;r=d>p?p+"-"+d:d+"-"+p,c&&(r="unbundled"+u._private.data.id),null==i[r]&&(i[r]=[],a.push(r)),i[r].push(u),c&&(i[r].hasUnbundled=!0)}else o.push(u)}for(var h,f,v,g,y,m,b,x,w,_,E,S,k,P,C=0;C<a.length;C++){r=a[C];var D=i[r];if(D.sort(function(e,t){return e._private.index-t._private.index}),h=D[0]._private.source,f=D[0]._private.target,h._private.data.id>f._private.data.id){var T=h;h=f,f=T}if(v=h._private.position,g=f._private.position,y=this.getNodeWidth(h),m=this.getNodeHeight(h),b=this.getNodeWidth(f),x=this.getNodeHeight(f),w=t.nodeShapes[this.getNodeShape(h)],_=t.nodeShapes[this.getNodeShape(f)],E=h._private.style["border-width"].pxValue,S=f._private.style["border-width"].pxValue,P=!1,D.length>1&&h!==f||D.hasUnbundled){var N=w.intersectLine(v.x,v.y,y,m,g.x,g.y,E/2),M=_.intersectLine(g.x,g.y,b,x,v.x,v.y,S/2),B={x1:N[0],x2:M[0],y1:N[1],y2:M[1]},I=M[1]-N[1],A=M[0]-N[0],L=Math.sqrt(A*A+I*I),O={x:A,y:I},z={x:O.x/L,y:O.y/L};k={x:-z.y,y:z.x},(_.checkPoint(N[0],N[1],S/2,b,x,g.x,g.y)||w.checkPoint(M[0],M[1],E/2,y,m,v.x,v.y))&&(k={},P=!0)}for(var u,j,s=0;s<D.length;s++){u=D[s],j=u._private.rscratch;var R=j.lastEdgeIndex,Y=s,X=j.lastNumEdges,V=D.length,q=u._private.style,F=q["control-point-step-size"].pxValue,Z=void 0!==q["control-point-distance"]?q["control-point-distance"].pxValue:void 0,W=q["control-point-weight"].value,c="unbundled-bezier"===q["curve-style"].value,H=j.lastSrcCtlPtX,U=v.x,$=j.lastSrcCtlPtY,K=v.y,G=j.lastSrcCtlPtW,J=h.outerWidth(),Q=j.lastSrcCtlPtH,et=h.outerHeight(),tt=j.lastTgtCtlPtX,nt=g.x,rt=j.lastTgtCtlPtY,it=g.y,at=j.lastTgtCtlPtW,ot=f.outerWidth(),st=j.lastTgtCtlPtH,ut=f.outerHeight(),lt=j.lastW,ct=q["control-point-step-size"].pxValue;
if(j.badBezier=P?!0:!1,H!==U||$!==K||G!==J||Q!==et||tt!==nt||rt!==it||at!==ot||st!==ut||lt!==ct||!(R===Y&&X===V||c)){if(j.lastSrcCtlPtX=U,j.lastSrcCtlPtY=K,j.lastSrcCtlPtW=J,j.lastSrcCtlPtH=et,j.lastTgtCtlPtX=nt,j.lastTgtCtlPtY=it,j.lastTgtCtlPtW=ot,j.lastTgtCtlPtH=ut,j.lastEdgeIndex=Y,j.lastNumEdges=V,j.lastWidth=ct,h===f){j.edgeType="self";var dt=s,pt=F;c&&(dt=0,pt=Z),j.cp2ax=v.x,j.cp2ay=v.y-(1+Math.pow(m,1.12)/100)*pt*(dt/3+1),j.cp2cx=h._private.position.x-(1+Math.pow(y,1.12)/100)*pt*(dt/3+1),j.cp2cy=v.y,j.selfEdgeMidX=(j.cp2ax+j.cp2cx)/2,j.selfEdgeMidY=(j.cp2ay+j.cp2cy)/2}else if(D.length%2!==1||s!==Math.floor(D.length/2)||c){var ht,ft=(.5-D.length/2+s)*F,vt=e.math.signum(ft);ht=c?Z:void 0!==Z?vt*Z:void 0;var gt=void 0!==ht?ht:ft,yt=1-W,mt=W,bt=u._private.source!==h;bt&&(yt=W,mt=1-W);var xt={x:B.x1*yt+B.x2*mt,y:B.y1*yt+B.y2*mt};j.edgeType="bezier",j.cp2x=xt.x+k.x*gt,j.cp2y=xt.y+k.y*gt}else j.edgeType="straight";this.findEndpoints(u);var wt=!e.is.number(j.startX)||!e.is.number(j.startY),_t=!e.is.number(j.arrowStartX)||!e.is.number(j.arrowStartY),Et=!e.is.number(j.endX)||!e.is.number(j.endY),St=!e.is.number(j.arrowEndX)||!e.is.number(j.arrowEndY),kt=3,Pt=this.getArrowWidth(u._private.style.width.pxValue)*t.arrowShapeHeight,Ct=kt*Pt,Dt=e.math.distance({x:j.cp2x,y:j.cp2y},{x:j.startX,y:j.startY}),Tt=Ct>Dt,Nt=e.math.distance({x:j.cp2x,y:j.cp2y},{x:j.endX,y:j.endY}),Mt=Ct>Nt;if("bezier"===j.edgeType){var Bt=!1;if(wt||_t||Tt){Bt=!0;var It={x:j.cp2x-v.x,y:j.cp2y-v.y},At=Math.sqrt(It.x*It.x+It.y*It.y),Lt={x:It.x/At,y:It.y/At},Ot=Math.max(y,m),zt={x:j.cp2x+2*Lt.x*Ot,y:j.cp2y+2*Lt.y*Ot},jt=w.intersectLine(v.x,v.y,y,m,zt.x,zt.y,E/2);Tt?(j.cp2x=j.cp2x+Lt.x*(Ct-Dt),j.cp2y=j.cp2y+Lt.y*(Ct-Dt)):(j.cp2x=jt[0]+Lt.x*Ct,j.cp2y=jt[1]+Lt.y*Ct)}if(Et||St||Mt){Bt=!0;var It={x:j.cp2x-g.x,y:j.cp2y-g.y},At=Math.sqrt(It.x*It.x+It.y*It.y),Lt={x:It.x/At,y:It.y/At},Ot=Math.max(y,m),zt={x:j.cp2x+2*Lt.x*Ot,y:j.cp2y+2*Lt.y*Ot},Rt=_.intersectLine(g.x,g.y,b,x,zt.x,zt.y,S/2);Mt?(j.cp2x=j.cp2x+Lt.x*(Ct-Nt),j.cp2y=j.cp2y+Lt.y*(Ct-Nt)):(j.cp2x=Rt[0]+Lt.x*Ct,j.cp2y=Rt[1]+Lt.y*Ct)}Bt&&this.findEndpoints(u)}else"straight"===j.edgeType&&(j.midX=(U+nt)/2,j.midY=(K+it)/2);this.projectBezier(u)}}}for(var s=0;s<o.length;s++){var u=o[s],Yt=u._private.rscratch;if(!Yt.haystack){var Xt=2*Math.random()*Math.PI;Yt.source={x:Math.cos(Xt),y:Math.sin(Xt)};var Xt=2*Math.random()*Math.PI;Yt.target={x:Math.cos(Xt),y:Math.sin(Xt)}}Yt.edgeType="haystack",Yt.haystack=!0}return i}},t.prototype.findEndpoints=function(n){var r,i=n.source()[0],a=n.target()[0],o=n._private.style["target-arrow-shape"].value,s=n._private.style["source-arrow-shape"].value,u=a._private.style["border-width"].pxValue,l=i._private.style["border-width"].pxValue,c=n._private.rscratch;if("self"==n._private.rscratch.edgeType){var d=[c.cp2cx,c.cp2cy];r=t.nodeShapes[this.getNodeShape(a)].intersectLine(a._private.position.x,a._private.position.y,this.getNodeWidth(a),this.getNodeHeight(a),d[0],d[1],u/2);var p=e.math.shortenIntersection(r,d,t.arrowShapes[o].spacing(n)),h=e.math.shortenIntersection(r,d,t.arrowShapes[o].gap(n));c.endX=h[0],c.endY=h[1],c.arrowEndX=p[0],c.arrowEndY=p[1];var d=[c.cp2ax,c.cp2ay];r=t.nodeShapes[this.getNodeShape(i)].intersectLine(i._private.position.x,i._private.position.y,this.getNodeWidth(i),this.getNodeHeight(i),d[0],d[1],l/2);var f=e.math.shortenIntersection(r,d,t.arrowShapes[s].spacing(n)),v=e.math.shortenIntersection(r,d,t.arrowShapes[s].gap(n));c.startX=v[0],c.startY=v[1],c.arrowStartX=f[0],c.arrowStartY=f[1]}else if("straight"==c.edgeType){r=t.nodeShapes[this.getNodeShape(a)].intersectLine(a._private.position.x,a._private.position.y,this.getNodeWidth(a),this.getNodeHeight(a),i.position().x,i.position().y,u/2),c.noArrowPlacement=0===r.length?!0:!1;var p=e.math.shortenIntersection(r,[i.position().x,i.position().y],t.arrowShapes[o].spacing(n)),h=e.math.shortenIntersection(r,[i.position().x,i.position().y],t.arrowShapes[o].gap(n));c.endX=h[0],c.endY=h[1],c.arrowEndX=p[0],c.arrowEndY=p[1],r=t.nodeShapes[this.getNodeShape(i)].intersectLine(i._private.position.x,i._private.position.y,this.getNodeWidth(i),this.getNodeHeight(i),a.position().x,a.position().y,l/2),c.noArrowPlacement=0===r.length?!0:!1;var f=e.math.shortenIntersection(r,[a.position().x,a.position().y],t.arrowShapes[s].spacing(n)),v=e.math.shortenIntersection(r,[a.position().x,a.position().y],t.arrowShapes[s].gap(n));c.startX=v[0],c.startY=v[1],c.arrowStartX=f[0],c.arrowStartY=f[1]}else if("bezier"==c.edgeType){var d=[c.cp2x,c.cp2y];r=t.nodeShapes[this.getNodeShape(a)].intersectLine(a._private.position.x,a._private.position.y,this.getNodeWidth(a),this.getNodeHeight(a),d[0],d[1],u/2);var p=e.math.shortenIntersection(r,d,t.arrowShapes[o].spacing(n)),h=e.math.shortenIntersection(r,d,t.arrowShapes[o].gap(n));c.endX=h[0],c.endY=h[1],c.arrowEndX=p[0],c.arrowEndY=p[1],r=t.nodeShapes[this.getNodeShape(i)].intersectLine(i._private.position.x,i._private.position.y,this.getNodeWidth(i),this.getNodeHeight(i),d[0],d[1],l/2);var f=e.math.shortenIntersection(r,d,t.arrowShapes[s].spacing(n)),v=e.math.shortenIntersection(r,d,t.arrowShapes[s].gap(n));c.startX=v[0],c.startY=v[1],c.arrowStartX=f[0],c.arrowStartY=f[1]}else if(c.isArcEdge)return},t.prototype.findEdges=function(e){for(var t=this.getCachedEdges(),n={},r=[],i=0;i<e.length;i++)n[e[i]._private.data.id]=e[i];for(var i=0;i<t.length;i++)(n[t[i]._private.data.source]||n[t[i]._private.data.target])&&r.push(t[i]);return r},t.prototype.getArrowWidth=t.prototype.getArrowHeight=function(e){var t=this.arrowWidthCache=this.arrowWidthCache||{},n=t[e];return n?n:(n=Math.max(Math.pow(13.37*e,.9),29),t[e]=n,n)}}(n),function(e){"use strict";var t=e("renderer","canvas");t.prototype.drawEdge=function(e,n,r){var i=n._private.rscratch,a=t.usePaths();if(!i.badBezier&&("bezier"!==i.edgeType&&"straight"!==i.edgeType||!isNaN(i.startX))){var o=n._private.style;if(!(o.width.pxValue<=0)){var s=o["overlay-padding"].pxValue,u=o["overlay-opacity"].value,l=o["overlay-color"].value;if(r){if(0===u)return;this.strokeStyle(e,l[0],l[1],l[2],u),e.lineCap="round","self"!=n._private.rscratch.edgeType||a||(e.lineCap="butt")}else{var c=o["line-color"].value;this.strokeStyle(e,c[0],c[1],c[2],o.opacity.value),e.lineCap="butt"}var d,p,h,f;h=d=n._private.source,f=p=n._private.target;var v=f._private.position,g=f.width(),y=f.height(),m=h._private.position,b=h.width(),x=h.height(),w=o.width.pxValue+(r?2*s:0),_=r?"solid":o["line-style"].value;if(e.lineWidth=w,"haystack"!==i.edgeType,"haystack"===i.edgeType){var E=o["haystack-radius"].value,S=E/2;this.drawStyledEdge(n,e,i.haystackPts=[i.source.x*b*S+m.x,i.source.y*x*S+m.y,i.target.x*g*S+v.x,i.target.y*y*S+v.y],_,w)}else if("self"===i.edgeType){var k=n._private.rscratch,P=[k.startX,k.startY,k.cp2ax,k.cp2ay,k.selfEdgeMidX,k.selfEdgeMidY,k.selfEdgeMidX,k.selfEdgeMidY,k.cp2cx,k.cp2cy,k.endX,k.endY],k=n._private.rscratch;this.drawStyledEdge(n,e,P,_,w)}else if("straight"===i.edgeType){var C=p._private.position.x-d._private.position.x,D=p._private.position.y-d._private.position.y,T=i.endX-i.startX,N=i.endY-i.startY;if(0>C*T+D*N)i.straightEdgeTooShort=!0;else{var k=i;this.drawStyledEdge(n,e,[k.startX,k.startY,k.endX,k.endY],_,w),i.straightEdgeTooShort=!1}}else{var k=i;this.drawStyledEdge(n,e,[k.startX,k.startY,k.cp2x,k.cp2y,k.endX,k.endY],_,w)}"haystack"===i.edgeType?this.drawArrowheads(e,n,r):i.noArrowPlacement!==!0&&void 0!==i.startX&&this.drawArrowheads(e,n,r)}}},t.prototype.drawStyledEdge=function(e,n,r,i){var a,o=e._private.rscratch,s=n,u=!1,l=t.usePaths();if(l){for(var c=r,d=o.pathCacheKey&&c.length===o.pathCacheKey.length,p=d,h=0;p&&h<c.length;h++)o.pathCacheKey[h]!==c[h]&&(p=!1);p?(a=n=o.pathCache,u=!0):(a=n=new Path2D,o.pathCacheKey=c,o.pathCache=a)}if(s.setLineDash)switch(i){case"dotted":s.setLineDash([1,1]);break;case"dashed":s.setLineDash([6,3]);break;case"solid":s.setLineDash([])}u||(n.beginPath&&n.beginPath(),n.moveTo(r[0],r[1]),6===r.length?n.quadraticCurveTo(r[2],r[3],r[4],r[5]):12===r.length?(n.quadraticCurveTo(r[2],r[3],r[4],r[5]),n.quadraticCurveTo(r[8],r[9],r[10],r[11])):n.lineTo(r[2],r[3])),n=s,l?n.stroke(a):n.stroke(),n.setLineDash&&n.setLineDash([])},t.prototype.drawArrowheads=function(e,t,n){function r(n,r,i,a,o){var s=v[n+"-arrow-shape"].value;if("none"!==s){var u=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",d.fillStyle(e,255,255,255,1);var l="hollow"===v[n+"-arrow-fill"].value?"both":"filled",c=v[n+"-arrow-fill"].value;"half-triangle-overshot"===s&&(c="hollow",l="hollow"),d.drawArrowShape(t,n,e,l,v.width.pxValue,v[n+"-arrow-shape"].value,r,i,a,o),e.globalCompositeOperation=u;var p=v[n+"-arrow-color"].value;d.fillStyle(e,p[0],p[1],p[2],v.opacity.value),d.drawArrowShape(t,n,e,c,v.width.pxValue,v[n+"-arrow-shape"].value,r,i,a,o)}}if(!n){var i,a,o,s,u,l,c=t._private.rscratch,d=this,p="haystack"===c.edgeType,h=t.source().position(),f=t.target().position();p?(o=c.haystackPts[0],s=c.haystackPts[1],u=c.haystackPts[2],l=c.haystackPts[3]):(o=c.arrowStartX,s=c.arrowStartY,u=c.arrowEndX,l=c.arrowEndY);var v=t._private.style;i=o-h.x,a=s-h.y,p||isNaN(o)||isNaN(s)||isNaN(i)||isNaN(a)||r("source",o,s,i,a);var g=c.midX,y=c.midY;p&&(g=(o+u)/2,y=(s+l)/2),i=o-u,a=s-l,"self"===c.edgeType&&(i=1,a=-1),isNaN(g)||isNaN(y)||r("mid-target",g,y,i,a),i*=-1,a*=-1,isNaN(g)||isNaN(y)||r("mid-source",g,y,i,a),i=u-f.x,a=l-f.y,p||isNaN(u)||isNaN(l)||isNaN(i)||isNaN(a)||r("target",u,l,i,a)}},t.prototype.drawArrowShape=function(e,n,r,i,a,o,s,u,l,c){var d,p=t.usePaths(),h=e._private.rscratch,f=!1,v=r,g={x:s,y:u},y=Math.asin(c/Math.sqrt(l*l+c*c));0>l?y+=Math.PI/2:y=-(Math.PI/2+y);var m=this.getArrowWidth(a),b=t.arrowShapes[o];if(p){var x=m+"$"+o+"$"+y+"$"+s+"$"+u;h.arrowPathCacheKey=h.arrowPathCacheKey||{},h.arrowPathCache=h.arrowPathCache||{};var w=h.arrowPathCacheKey[n]===x;w?(d=r=h.arrowPathCache[n],f=!0):(d=r=new Path2D,h.arrowPathCacheKey[n]=x,h.arrowPathCache[n]=d)}r.beginPath&&r.beginPath(),f||b.draw(r,m,y,g),!b.leavePathOpen&&r.closePath&&r.closePath(),r=v,("filled"===i||"both"===i)&&(p?r.fill(d):r.fill()),("hollow"===i||"both"===i)&&(r.lineWidth=b.matchEdgeWidth?a:1,r.lineJoin="miter",p?r.stroke(d):r.stroke())}}(n),function(e){"use strict";var t=e("renderer","canvas");t.prototype.getCachedImage=function(e,t){var n=this,r=n.imageCache=n.imageCache||{};if(r[e]&&r[e].image)return r[e].image;var i=r[e]=r[e]||{},a=i.image=new Image;return a.addEventListener("load",t),a.src=e,a},t.prototype.drawInscribedImage=function(e,n,r){var i=this,a=r._private.position.x,o=r._private.position.y,s=r._private.style,u=s["background-fit"].value,l=s["background-position-x"],c=s["background-position-y"],d=s["background-repeat"].value,p=r.width(),h=r.height(),f=r._private.rscratch,v=s["background-clip"].value,g="node"===v,y=s["background-image-opacity"].value,m=n.width,b=n.height;if(0!==m&&0!==b){if("contain"===u){var x=Math.min(p/m,h/b);m*=x,b*=x}else if("cover"===u){var x=Math.max(p/m,h/b);m*=x,b*=x}var w=a-p/2;w+="%"===l.units?(p-m)*l.value/100:l.pxValue;var _=o-h/2;_+="%"===c.units?(h-b)*c.value/100:c.pxValue,f.pathCache&&(w-=a,_-=o,a=0,o=0);var E=e.globalAlpha;if(e.globalAlpha=y,"no-repeat"===d)g&&(e.save(),f.pathCache?e.clip(f.pathCache):(t.nodeShapes[i.getNodeShape(r)].drawPath(e,a,o,p,h),e.clip())),e.drawImage(n,0,0,n.width,n.height,w,_,m,b),g&&e.restore();else{var S=e.createPattern(n,d);e.fillStyle=S,t.nodeShapes[i.getNodeShape(r)].drawPath(e,a,o,p,h),e.translate(w,_),e.fill(),e.translate(-w,-_)}e.globalAlpha=E}}}(n),function(e){"use strict";var t=e("renderer","canvas");t.prototype.drawEdgeText=function(e,t){var n=t._private.style.content.strValue;if(!(!n||n.match(/^\s+$/)||this.hideEdgesOnViewport&&(this.dragData.didDrag||this.pinching||this.hoverData.dragging||this.data.wheel||this.swipePanning))){var r=t._private.style["font-size"].pxValue*t.cy().zoom(),i=t._private.style["min-zoomed-font-size"].pxValue;if(!(i>r)){e.textAlign="center",e.textBaseline="middle";var a=t._private.rscratch;this.drawText(e,t,a.labelX,a.labelY)}}},t.prototype.drawNodeText=function(e,t){var n=t._private.style.content.strValue;if(n&&!n.match(/^\s+$/)){var r=t._private.style["font-size"].pxValue*t.cy().zoom(),i=t._private.style["min-zoomed-font-size"].pxValue;if(!(i>r)){var a=t._private.style["text-halign"].strValue,o=t._private.style["text-valign"].strValue,s=t._private.rscratch;switch(a){case"left":e.textAlign="right";break;case"right":e.textAlign="left";break;default:e.textAlign="center"}switch(o){case"top":e.textBaseline="bottom";break;case"bottom":e.textBaseline="top";break;default:e.textBaseline="middle"}this.drawText(e,t,s.labelX,s.labelY)}}},t.prototype.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if(t=this.fontCaches[n],t.context===e)return t;return t={context:e},this.fontCaches.push(t),t},t.prototype.setupTextStyle=function(e,t){var n=t.effectiveOpacity(),r=t._private.style,i=r["font-style"].strValue,a=r["font-size"].pxValue+"px",o=r["font-family"].strValue,s=r["font-weight"].strValue,u=r["text-opacity"].value*r.opacity.value*n,l=r["text-outline-opacity"].value*u,c=r.color.value,d=r["text-outline-color"].value,p=t._private.fontKey,h=this.getFontCache(e);h.key!==p&&(e.font=i+" "+s+" "+a+" "+o,h.key=p);var f=String(r.content.value),v=r["text-transform"].value;return"none"==v||("uppercase"==v?f=f.toUpperCase():"lowercase"==v&&(f=f.toLowerCase())),e.lineJoin="round",this.fillStyle(e,c[0],c[1],c[2],u),this.strokeStyle(e,d[0],d[1],d[2],l),f},t.prototype.drawText=function(e,t,n,r){var i=t._private.style,a=t.effectiveOpacity();if(0!==a){var o=this.setupTextStyle(e,t);if(null!=o&&!isNaN(n)&&!isNaN(r)){var s=2*i["text-outline-width"].value;s>0&&(e.lineWidth=s,e.strokeText(o,n,r)),e.fillText(o,n,r)}}}}(n),function(e){"use strict";var t=e("renderer","canvas");t.prototype.drawNode=function(e,n,r){var i,a,o,s=this,u=n._private.style,l=n._private.rscratch,c=t.usePaths(),d=e,p=!1,h=u["overlay-padding"].pxValue,f=u["overlay-opacity"].value,v=u["overlay-color"].value;if(!r||0!==f){var g=n.effectiveOpacity();if(0!==g)if(i=this.getNodeWidth(n),a=this.getNodeHeight(n),e.lineWidth=u["border-width"].pxValue,void 0!==r&&r)f>0&&(this.fillStyle(e,v[0],v[1],v[2],f),t.nodeShapes.roundrectangle.drawPath(e,n._private.position.x,n._private.position.y,i+2*h,a+2*h),e.fill());else{var y=u["background-color"].value,m=u["border-color"].value,b=u["border-style"].value;if(this.fillStyle(e,y[0],y[1],y[2],u["background-opacity"].value*u.opacity.value*g),this.strokeStyle(e,m[0],m[1],m[2],u["border-opacity"].value*u.opacity.value*g),e.lineJoin="miter",e.setLineDash)switch(b){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([])}var x=u["background-image"].value[2]||u["background-image"].value[1],w=u.shape.strValue,_=n._private.position;if(c){var E=w+"$"+i+"$"+a;e.translate(_.x,_.y),l.pathCacheKey===E?(o=e=l.pathCache,p=!0):(o=e=new Path2D,l.pathCacheKey=E,l.pathCache=o)}if(!p){var S=_;c&&(S={x:0,y:0}),t.nodeShapes[this.getNodeShape(n)].drawPath(e,S.x,S.y,i,a)}if(e=d,c?e.fill(o):e.fill(),void 0!==x){var k=this.getCachedImage(x,function(){s.data.canvasNeedsRedraw[t.NODE]=!0,s.data.canvasNeedsRedraw[t.DRAG]=!0,s.redraw()});k.complete&&this.drawInscribedImage(e,k,n)}var P=u["background-blacken"].value,C=u["border-width"].pxValue;if(this.hasPie(n)&&(this.drawPie(e,n),(0!==P||0!==C)&&(c||t.nodeShapes[this.getNodeShape(n)].drawPath(e,_.x,_.y,i,a))),P>0?(this.fillStyle(e,0,0,0,P),c?e.fill(o):e.fill()):0>P&&(this.fillStyle(e,255,255,255,-P),c?e.fill(o):e.fill()),C>0&&(c?e.stroke(o):e.stroke(),"double"===b)){e.lineWidth=u["border-width"].pxValue/3;var D=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",c?e.stroke(o):e.stroke(),e.globalCompositeOperation=D}c&&e.translate(-_.x,-_.y),e.setLineDash&&e.setLineDash([])}}},t.prototype.hasPie=function(e){return e=e[0],e._private.hasPie},t.prototype.drawPie=function(n,r){r=r[0];var i=r._private.style["pie-size"],a=this.getNodeWidth(r),o=this.getNodeHeight(r),s=r._private.position.x,u=r._private.position.y,l=Math.min(a,o)/2,c=0,d=t.usePaths();d&&(s=0,u=0),"%"===i.units?l=l*i.value/100:void 0!==i.pxValue&&(l=i.pxValue/2);for(var p=1;p<=e.style.pieBackgroundN;p++){var h=r._private.style["pie-"+p+"-background-size"].value,f=r._private.style["pie-"+p+"-background-color"].value,v=r._private.style["pie-"+p+"-background-opacity"].value,g=h/100,y=1.5*Math.PI+2*Math.PI*c,m=2*Math.PI*g,b=y+m;0===h||c>=1||c+g>1||(n.beginPath(),n.moveTo(s,u),n.arc(s,u,l,y,b),n.closePath(),this.fillStyle(n,f[0],f[1],f[2],v),n.fill(),c+=g)}}}(n),function(e){"use strict";var t=e("renderer","canvas");t.prototype.getPixelRatio=function(){var e=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t},t.prototype.paintCache=function(e){for(var t,n=this.paintCaches=this.paintCaches||[],r=!0,i=0;i<n.length;i++)if(t=n[i],t.context===e){r=!1;break}return r&&(t={context:e},n.push(t)),t},t.prototype.fillStyle=function(e,t,n,r,i){e.fillStyle="rgba("+t+","+n+","+r+","+i+")"},t.prototype.strokeStyle=function(e,t,n,r,i){e.strokeStyle="rgba("+t+","+n+","+r+","+i+")"},t.prototype.matchCanvasSize=function(e){var n,r=this.data,i=e.clientWidth,a=e.clientHeight,o=this.getPixelRatio(),s=i*o,u=a*o;if(s!==this.canvasWidth||u!==this.canvasHeight){this.fontCaches=null;var l=r.canvasContainer;l.style.width=i+"px",l.style.height=a+"px";for(var c=0;c<t.CANVAS_LAYERS;c++)n=r.canvases[c],(n.width!==s||n.height!==u)&&(n.width=s,n.height=u,n.style.width=i+"px",n.style.height=a+"px");for(var c=0;c<t.BUFFER_COUNT;c++)n=r.bufferCanvases[c],(n.width!==s||n.height!==u)&&(n.width=s,n.height=u,n.style.width=i+"px",n.style.height=a+"px");this.textureMult=1,1>=o&&(n=r.bufferCanvases[t.TEXTURE_BUFFER],this.textureMult=2,n.width=s*this.textureMult,n.height=u*this.textureMult),this.canvasWidth=s,this.canvasHeight=u}},t.prototype.renderTo=function(e,t,n,r){this.redraw({forcedContext:e,forcedZoom:t,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})},t.prototype.timeToRender=function(){return this.redrawTotalTime/this.redrawCount},t.minRedrawLimit=1e3/60,t.maxRedrawLimit=1e3,t.motionBlurDelay=100,t.prototype.redraw=function(n){function r(){function n(e,t){if(e.setTransform(1,0,0,1,0,0),"motionBlur"===t){var n=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",l.fillStyle(e,255,255,255,.666),e.fillRect(0,0,l.canvasWidth,l.canvasHeight),e.globalCompositeOperation=n}else i||void 0!==t&&!t||e.clearRect(0,0,l.canvasWidth,l.canvasHeight);a||(e.translate(x.x,x.y),e.scale(m,m)),u&&e.translate(u.x,u.y),s&&e.scale(s,s)}function r(e,t){for(var n=e.eles,r=0;r<n.length;r++){var i=n[r];i.isNode()?(l.drawNode(t,i),I||l.drawNodeText(t,i),l.drawNode(t,i,!0)):B||(l.drawEdge(t,i),I||l.drawEdgeText(t,i),l.drawEdge(t,i,!0))}}var v=l.getCachedEdges(),g=d.style()._private.coreStyle,y=d.zoom(),m=void 0!==s?s:y,b=d.pan(),x={x:b.x,y:b.y};u&&(x=u),m*=c,x.x*=c,x.y*=c;var _={drag:{nodes:[],edges:[],eles:[]},nondrag:{nodes:[],edges:[],eles:[]}},E=l.textureOnViewport&&!i&&(l.pinching||l.hoverData.dragging||l.swipePanning||l.data.wheelZooming);if(E){var S;if(!l.textureCache){l.textureCache={},S=l.textureCache.bb=d.elements().boundingBox(),l.textureCache.texture=l.data.bufferCanvases[t.TEXTURE_BUFFER];var k=l.data.bufferContexts[t.TEXTURE_BUFFER];k.setTransform(1,0,0,1,0,0),k.clearRect(0,0,l.canvasWidth*l.textureMult,l.canvasHeight*l.textureMult),l.redraw({forcedContext:k,drawOnlyNodeLayer:!0,forcedPxRatio:c*l.textureMult});var P=l.textureCache.viewport={zoom:d.zoom(),pan:d.pan(),width:l.canvasWidth,height:l.canvasHeight};P.mpan={x:(0-P.pan.x)/P.zoom,y:(0-P.pan.y)/P.zoom}}h[t.DRAG]=!1,h[t.NODE]=!1;var C=p.contexts[t.NODE],D=l.textureCache.texture,P=l.textureCache.viewport;S=l.textureCache.bb,C.setTransform(1,0,0,1,0,0),C.clearRect(0,0,P.width,P.height);var T=g["outside-texture-bg-color"].value,N=g["outside-texture-bg-opacity"].value;l.fillStyle(C,T[0],T[1],T[2],N),C.fillRect(0,0,P.width,P.height);var y=d.zoom();n(C,!1),C.clearRect(P.mpan.x,P.mpan.y,P.width/P.zoom/c,P.height/P.zoom/c),C.drawImage(D,P.mpan.x,P.mpan.y,P.width/P.zoom/c,P.height/P.zoom/c)}else l.textureOnViewport&&!i&&(l.textureCache=null);var M=l.pinching||l.hoverData.dragging||l.swipePanning||l.data.wheelZooming||l.hoverData.draggingEles,B=l.hideEdgesOnViewport&&M,I=l.hideLabelsOnViewport&&M;if(h[t.DRAG]||h[t.NODE]||a||o){B||l.findEdgeControlPoints(v);for(var A=l.getCachedZSortedEles(),L=d.extent(),O=0;O<A.length;O++){var z,j=A[O],S=i?null:j.boundingBox(),R=i?!0:e.math.boundingBoxesIntersect(L,S);R&&(z=j._private.rscratch.inDragLayer?_.drag:_.nondrag,z.eles.push(j))}}var Y=h[t.DRAG]&&!h[t.NODE]&&f&&!l.clearedNodeLayerForMotionBlur;if(Y&&(l.clearedNodeLayerForMotionBlur=!0),h[t.NODE]||a||o||Y){var C=i||p.contexts[t.NODE];n(C,f&&!Y?"motionBlur":void 0),r(_.nondrag,C),a||(h[t.NODE]=!1)}if(!o&&(h[t.DRAG]||a)){var C=i||p.contexts[t.DRAG];n(C,f?"motionBlur":void 0),r(_.drag,C),a||(h[t.DRAG]=!1)}if(l.showFps||!o&&h[t.SELECT_BOX]&&!a){var C=i||p.contexts[t.SELECT_BOX];if(n(C),1==p.select[4]&&l.hoverData.selecting){var y=p.cy.zoom(),X=g["selection-box-border-width"].value/y;C.lineWidth=X,C.fillStyle="rgba("+g["selection-box-color"].value[0]+","+g["selection-box-color"].value[1]+","+g["selection-box-color"].value[2]+","+g["selection-box-opacity"].value+")",C.fillRect(p.select[0],p.select[1],p.select[2]-p.select[0],p.select[3]-p.select[1]),X>0&&(C.strokeStyle="rgba("+g["selection-box-border-color"].value[0]+","+g["selection-box-border-color"].value[1]+","+g["selection-box-border-color"].value[2]+","+g["selection-box-opacity"].value+")",C.strokeRect(p.select[0],p.select[1],p.select[2]-p.select[0],p.select[3]-p.select[1]))}if(p.bgActivePosistion&&!l.hoverData.selecting){var y=p.cy.zoom(),V=p.bgActivePosistion;C.fillStyle="rgba("+g["active-bg-color"].value[0]+","+g["active-bg-color"].value[1]+","+g["active-bg-color"].value[2]+","+g["active-bg-opacity"].value+")",C.beginPath(),C.arc(V.x,V.y,g["active-bg-size"].pxValue/y,0,2*Math.PI),C.fill()}var q=l.averageRedrawTime;if(l.showFps&&q){q=Math.round(q);var F=Math.round(1e3/q);C.setTransform(1,0,0,1,0,0),C.fillStyle="rgba(255, 0, 0, 0.75)",C.strokeStyle="rgba(255, 0, 0, 0.75)",C.lineWidth=1,C.fillText("1 frame = "+q+" ms = "+F+" fps",0,20);var Z=60;C.strokeRect(0,30,250,20),C.fillRect(0,30,250*Math.min(F/Z,1),20)}a||(h[t.SELECT_BOX]=!1)}var W=+new Date;void 0===l.averageRedrawTime&&(l.averageRedrawTime=W-w),void 0===l.redrawCount&&(l.redrawCount=0),l.redrawCount++,void 0===l.redrawTotalTime&&(l.redrawTotalTime=0),l.redrawTotalTime+=W-w,l.lastRedrawTime=W-w,l.averageRedrawTime=l.averageRedrawTime/2+(W-w)/2,l.currentlyDrawing=!1,l.clearingMotionBlur&&(l.clearingMotionBlur=!1,l.motionBlurCleared=!0,l.motionBlur=!0),f&&(l.motionBlurTimeout=setTimeout(function(){l.motionBlurTimeout=null,l.clearedNodeLayerForMotionBlur=!1,l.motionBlur=!1,l.clearingMotionBlur=!0,h[t.NODE]=!0,h[t.DRAG]=!0,l.redraw()},t.motionBlurDelay))}n=n||{};var i=n.forcedContext,a=n.drawAllLayers,o=n.drawOnlyNodeLayer,s=n.forcedZoom,u=n.forcedPan,l=this,c=void 0===n.forcedPxRatio?this.getPixelRatio():n.forcedPxRatio,d=l.data.cy,p=l.data,h=p.canvasNeedsRedraw,f=void 0!==n.motionBlur?n.motionBlur:l.motionBlur;f=f&&!i&&l.motionBlurEnabled,f&&l.motionBlurTimeout&&clearTimeout(l.motionBlurTimeout),!i&&this.redrawTimeout&&clearTimeout(this.redrawTimeout),this.redrawTimeout=null,void 0===this.averageRedrawTime&&(this.averageRedrawTime=0);var v=t.minRedrawLimit,g=t.maxRedrawLimit,y=this.averageRedrawTime;y=v>y?v:y,y=g>y?y:g,void 0===this.lastDrawTime&&(this.lastDrawTime=0);var m=+new Date,b=m-this.lastDrawTime,x=b>=y;if(!i){if(!x||this.currentlyDrawing)return void(this.redrawTimeout=setTimeout(function(){l.redraw()},y));this.lastDrawTime=m,this.currentlyDrawing=!0}var w=+new Date;i?r():e.util.requestAnimationFrame(r),i||l.initrender||(l.initrender=!0,d.trigger("initrender"))}}(n),function(e){"use strict";var t=e("renderer","canvas");t.prototype.drawPolygonPath=function(e,t,n,r,i,a){var o=r/2,s=i/2;e.beginPath&&e.beginPath(),e.moveTo(t+o*a[0],n+s*a[1]);for(var u=1;u<a.length/2;u++)e.lineTo(t+o*a[2*u],n+s*a[2*u+1]);e.closePath()},t.prototype.drawPolygon=function(e,t,n,r,i,a){this.drawPolygonPath(e,t,n,r,i,a),e.fill()},t.prototype.drawRoundRectanglePath=function(t,n,r,i,a){var o=i/2,s=a/2,u=e.math.getRoundRectangleRadius(i,a);t.beginPath&&t.beginPath(),t.moveTo(n,r-s),t.arcTo(n+o,r-s,n+o,r,u),t.arcTo(n+o,r+s,n,r+s,u),t.arcTo(n-o,r+s,n-o,r,u),t.arcTo(n-o,r-s,n,r-s,u),t.lineTo(n,r-s),t.closePath()},t.prototype.drawRoundRectangle=function(e,t,n,r,i,a){this.drawRoundRectanglePath(e,t,n,r,i,a),e.fill()}}(n),function(e){"use strict";var t=e("renderer","canvas");t.prototype.createBuffer=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,[n,n.getContext("2d")]},t.prototype.bufferCanvasImage=function(e){var t=this.data,n=t.cy,r=n.elements().boundingBox(),i=e.full?Math.ceil(r.w):this.data.container.clientWidth,a=e.full?Math.ceil(r.h):this.data.container.clientHeight,o=1;void 0!==e.scale&&(i*=e.scale,a*=e.scale,o=e.scale);var s=document.createElement("canvas");s.width=i,s.height=a,s.style.width=i+"px",s.style.height=a+"px";var u=s.getContext("2d");if(i>0&&a>0)if(u.clearRect(0,0,i,a),e.bg&&(u.fillStyle=e.bg,u.rect(0,0,i,a),u.fill()),u.globalCompositeOperation="source-over",e.full)this.redraw({forcedContext:u,drawAllLayers:!0,forcedZoom:o,forcedPan:{x:-r.x1*o,y:-r.y1*o},forcedPxRatio:1});else{var l=n.pan(),c={x:l.x*o,y:l.y*o},d=n.zoom()*o;this.redraw({forcedContext:u,drawAllLayers:!0,forcedZoom:d,forcedPan:c,forcedPxRatio:1})}return s},t.prototype.png=function(e){return this.bufferCanvasImage(e).toDataURL("image/png")}}(n),function(e){"use strict";var t=e("renderer","canvas");t.prototype.registerBinding=function(e,t,n,r){this.bindings.push({target:e,event:t,handler:n,useCapture:r}),e.addEventListener(t,n,r)},t.prototype.nodeIsDraggable=function(e){return 0!==e._private.style.opacity.value&&"visible"==e._private.style.visibility.value&&"element"==e._private.style.display.value&&!e.locked()&&e.grabbable()?!0:!1},t.prototype.load=function(){var n=this,r=function(e){var t;if(e.addToList&&n.data.cy.hasCompoundNodes()){if(!e.addToList.hasId){e.addToList.hasId={};for(var r=0;r<e.addToList.length;r++){var i=e.addToList[r];e.addToList.hasId[i.id()]=!0}}t=e.addToList.hasId}return t||{}},i=function(e,t){if(e._private.cy.hasCompoundNodes())for(var n=r(t),i=e.descendants(),a=0;a<i.size();a++){var o=i[a],s=o._private;t.inDragLayer&&(s.rscratch.inDragLayer=!0),t.addToList&&!n[o.id()]&&(t.addToList.push(o),n[o.id()]=!0,s.grabbed=!0);for(var u=s.edges,l=0;t.inDragLayer&&l<u.length;l++)u[l]._private.rscratch.inDragLayer=!0}},a=function(e,t){var n=e._private,a=r(t);t.inDragLayer&&(n.rscratch.inDragLayer=!0),t.addToList&&!a[e.id()]&&(t.addToList.push(e),a[e.id()]=!0,n.grabbed=!0);for(var s=n.edges,u=0;t.inDragLayer&&u<s.length;u++)s[u]._private.rscratch.inDragLayer=!0;i(e,t),o(e,{inDragLayer:!0})},o=function(e,t){var n=e;if(e._private.cy.hasCompoundNodes()){for(;n.parent().nonempty();)n=n.parent()[0];if(n!=e){for(var i=n.descendants().add(n).not(e).not(e.descendants()),a=i.connectedEdges(),o=r(t),s=0;s<i.size();s++)void 0!==t.inDragLayer&&(i[s]._private.rscratch.inDragLayer=t.inDragLayer),t.addToList&&!o[i[s].id()]&&(t.addToList.push(i[s]),o[i[s].id()]=!0,i[s]._private.grabbed=!0);for(var u=0;void 0!==t.inDragLayer&&u<a.length;u++)a[u]._private.rscratch.inDragLayer=t.inDragLayer}}};"undefined"!=typeof MutationObserver?(n.removeObserver=new MutationObserver(function(e){for(var t=0;t<e.length;t++){var r=e[t],i=r.removedNodes;if(i)for(var a=0;a<i.length;a++){var o=i[a];if(o===n.data.container){n.destroy();break}}}}),n.removeObserver.observe(n.data.container.parentNode,{childList:!0})):n.registerBinding(n.data.container,"DOMNodeRemoved",function(){n.destroy()}),n.registerBinding(window,"resize",e.util.debounce(function(){n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.data.container),n.data.canvasNeedsRedraw[t.NODE]=!0,n.redraw()},100));for(var s=function(e){n.registerBinding(e,"scroll",function(){n.invalidateContainerClientCoordsCache()})},u=n.data.cy.container();s(u),u.parentNode;)u=u.parentNode;n.registerBinding(n.data.container,"contextmenu",function(e){e.preventDefault()});var l=function(){return 0!==n.data.select[4]};n.registerBinding(n.data.container,"mousedown",function(r){r.preventDefault(),n.hoverData.capture=!0,n.hoverData.which=r.which;var i=n.data.cy,o=n.projectIntoViewport(r.clientX,r.clientY),s=n.data.select,u=n.findNearestElement(o[0],o[1],!0),l=n.dragData.possibleDragElements;n.hoverData.mdownPos=o;var c=function(){n.hoverData.tapholdCancelled=!1,clearTimeout(n.hoverData.tapholdTimeout),n.hoverData.tapholdTimeout=setTimeout(function(){if(!n.hoverData.tapholdCancelled){var t=n.hoverData.down;t?t.trigger(new e.Event(r,{type:"taphold",cyPosition:{x:o[0],y:o[1]}})):i.trigger(new e.Event(r,{type:"taphold",cyPosition:{x:o[0],y:o[1]}}))}},n.tapholdDuration)};if(3==r.which){n.hoverData.cxtStarted=!0;var d=new e.Event(r,{type:"cxttapstart",cyPosition:{x:o[0],y:o[1]}});u?(u.activate(),u.trigger(d),n.hoverData.down=u):i.trigger(d),n.hoverData.downTime=(new Date).getTime(),n.hoverData.cxtDragged=!1}else if(1==r.which){if(u&&u.activate(),null!=u){if(n.nodeIsDraggable(u)){var p=new e.Event(r,{type:"grab",cyPosition:{x:o[0],y:o[1]}});if(u.isNode()&&!u.selected())l=n.dragData.possibleDragElements=[],a(u,{addToList:l}),u.trigger(p);else if(u.isNode()&&u.selected()){l=n.dragData.possibleDragElements=[];for(var h=i.$(function(){return this.isNode()&&this.selected()}),f=0;f<h.length;f++)n.nodeIsDraggable(h[f])&&a(h[f],{addToList:l});u.trigger(p)}n.data.canvasNeedsRedraw[t.NODE]=!0,n.data.canvasNeedsRedraw[t.DRAG]=!0}u.trigger(new e.Event(r,{type:"mousedown",cyPosition:{x:o[0],y:o[1]}})).trigger(new e.Event(r,{type:"tapstart",cyPosition:{x:o[0],y:o[1]}})).trigger(new e.Event(r,{type:"vmousedown",cyPosition:{x:o[0],y:o[1]}}))}else null==u&&i.trigger(new e.Event(r,{type:"mousedown",cyPosition:{x:o[0],y:o[1]}})).trigger(new e.Event(r,{type:"tapstart",cyPosition:{x:o[0],y:o[1]}})).trigger(new e.Event(r,{type:"vmousedown",cyPosition:{x:o[0],y:o[1]}}));if(n.hoverData.down=u,n.hoverData.downTime=(new Date).getTime(),null==u||u.isEdge()){s[4]=1;var v=Math.max(0,t.panOrBoxSelectDelay-(+new Date-n.hoverData.downTime));clearTimeout(n.bgActiveTimeout),i.boxSelectionEnabled()||u&&u.isEdge()?n.bgActiveTimeout=setTimeout(function(){u&&u.unactivate(),n.data.bgActivePosistion={x:o[0],y:o[1]},c(),n.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,n.redraw()},v):(n.data.bgActivePosistion={x:o[0],y:o[1]},c(),n.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,n.redraw())}}s[0]=s[2]=o[0],s[1]=s[3]=o[1]},!1),n.registerBinding(window,"mousemove",e.util.throttle(function(r){var i=!1,o=n.hoverData.capture;if(!o){var s=n.findContainerClientCoords();if(!(r.clientX>s[0]&&r.clientX<s[0]+n.canvasWidth&&r.clientY>s[1]&&r.clientY<s[1]+n.canvasHeight))return;for(var u=n.data.container,l=r.target,c=l.parentNode,d=!1;c;){if(c===u){d=!0;break}c=c.parentNode}if(!d)return}var p=n.data.cy,h=p.zoom(),f=(p.pan(),n.projectIntoViewport(r.clientX,r.clientY)),v=n.data.select,g=null;n.hoverData.draggingEles||(g=n.findNearestElement(f[0],f[1],!0));var y=n.hoverData.last,m=n.hoverData.down,b=[f[0]-v[2],f[1]-v[3]],x=n.dragData.possibleDragElements,w=v[2]-v[0],_=w*w,E=v[3]-v[1],S=E*E,k=_+S,P=k*h*h;n.hoverData.tapholdCancelled=!0;var C=function(){var e=n.hoverData.dragDelta=n.hoverData.dragDelta||[];0===e.length?(e.push(0),e.push(0)):(e[0]+=b[0],e[1]+=b[1])};if(i=!0,null!=g?g.trigger(new e.Event(r,{type:"mousemove",cyPosition:{x:f[0],y:f[1]}})).trigger(new e.Event(r,{type:"vmousemove",cyPosition:{x:f[0],y:f[1]}})).trigger(new e.Event(r,{type:"tapdrag",cyPosition:{x:f[0],y:f[1]}})):null==g&&p.trigger(new e.Event(r,{type:"mousemove",cyPosition:{x:f[0],y:f[1]}})).trigger(new e.Event(r,{type:"vmousemove",cyPosition:{x:f[0],y:f[1]}})).trigger(new e.Event(r,{type:"tapdrag",cyPosition:{x:f[0],y:f[1]}})),3===n.hoverData.which){var D=new e.Event(r,{type:"cxtdrag",cyPosition:{x:f[0],y:f[1]}});
m?m.trigger(D):p.trigger(D),n.hoverData.cxtDragged=!0,n.hoverData.cxtOver&&g===n.hoverData.cxtOver||(n.hoverData.cxtOver&&n.hoverData.cxtOver.trigger(new e.Event(r,{type:"cxtdragout",cyPosition:{x:f[0],y:f[1]}})),n.hoverData.cxtOver=g,g&&g.trigger(new e.Event(r,{type:"cxtdragover",cyPosition:{x:f[0],y:f[1]}})))}else if(n.hoverData.dragging){if(i=!0,p.panningEnabled()&&p.userPanningEnabled()){var T;if(n.hoverData.justStartedPan){var N=n.hoverData.mdownPos;T={x:(f[0]-N[0])*h,y:(f[1]-N[1])*h},n.hoverData.justStartedPan=!1}else T={x:b[0]*h,y:b[1]*h};p.panBy(T)}f=n.projectIntoViewport(r.clientX,r.clientY)}else if(1==v[4]&&(null==m||m.isEdge())&&(!p.boxSelectionEnabled()||+new Date-n.hoverData.downTime>=t.panOrBoxSelectDelay)&&!n.hoverData.selecting&&P>=n.tapThreshold2&&p.panningEnabled()&&p.userPanningEnabled())n.hoverData.dragging=!0,n.hoverData.selecting=!1,n.hoverData.justStartedPan=!0,v[4]=0;else{if(p.boxSelectionEnabled()&&Math.pow(v[2]-v[0],2)+Math.pow(v[3]-v[1],2)>7&&v[4]&&(clearTimeout(n.bgActiveTimeout),n.data.bgActivePosistion=void 0,n.hoverData.selecting=!0,n.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,n.redraw()),m&&m.isEdge()&&m.active()&&m.unactivate(),g!=y&&(y&&(y.trigger(new e.Event(r,{type:"mouseout",cyPosition:{x:f[0],y:f[1]}})),y.trigger(new e.Event(r,{type:"tapdragout",cyPosition:{x:f[0],y:f[1]}}))),g&&(g.trigger(new e.Event(r,{type:"mouseover",cyPosition:{x:f[0],y:f[1]}})),g.trigger(new e.Event(r,{type:"tapdragover",cyPosition:{x:f[0],y:f[1]}}))),n.hoverData.last=g),m&&m.isNode()&&n.nodeIsDraggable(m))if(P>=n.tapThreshold2){var M=!n.dragData.didDrag;M&&(n.data.canvasNeedsRedraw[t.NODE]=!0),n.dragData.didDrag=!0;for(var B=[],I=0;I<x.length;I++){var A=x[I];if(n.hoverData.draggingEles||a(A,{inDragLayer:!0}),A.isNode()&&n.nodeIsDraggable(A)&&A.grabbed()){var L=A._private.position;if(B.push(A),e.is.number(b[0])&&e.is.number(b[1])&&(L.x+=b[0],L.y+=b[1],M)){var O=n.hoverData.dragDelta;e.is.number(O[0])&&e.is.number(O[1])&&(L.x+=O[0],L.y+=O[1])}}}n.hoverData.draggingEles=!0;var z=new e.Collection(p,B);z.updateCompoundBounds(),z.trigger("position drag"),n.data.canvasNeedsRedraw[t.DRAG]=!0,n.redraw()}else C();i=!0}return v[2]=f[0],v[3]=f[1],i?(r.stopPropagation&&r.stopPropagation(),r.preventDefault&&r.preventDefault(),!1):void 0},1e3/30,{trailing:!0}),!1),n.registerBinding(window,"mouseup",function(r){var i=n.hoverData.capture;if(i){n.hoverData.capture=!1;var a=n.data.cy,s=n.projectIntoViewport(r.clientX,r.clientY),u=n.data.select,l=n.findNearestElement(s[0],s[1],!0),c=n.dragData.possibleDragElements,d=n.hoverData.down,p=r.shiftKey;if(n.data.bgActivePosistion&&(n.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,n.redraw()),n.data.bgActivePosistion=void 0,clearTimeout(n.bgActiveTimeout),n.hoverData.cxtStarted=!1,n.hoverData.draggingEles=!1,n.hoverData.selecting=!1,d&&d.unactivate(),3===n.hoverData.which){var h=new e.Event(r,{type:"cxttapend",cyPosition:{x:s[0],y:s[1]}});if(d?d.trigger(h):a.trigger(h),!n.hoverData.cxtDragged){var f=new e.Event(r,{type:"cxttap",cyPosition:{x:s[0],y:s[1]}});d?d.trigger(f):a.trigger(f)}n.hoverData.cxtDragged=!1,n.hoverData.which=null}else{if(null!=d||n.dragData.didDrag||Math.pow(u[2]-u[0],2)+Math.pow(u[3]-u[1],2)>7&&u[4]||n.hoverData.dragging||(a.$(function(){return this.selected()}).unselect(),c.length>0&&(n.data.canvasNeedsRedraw[t.NODE]=!0),n.dragData.possibleDragElements=c=[]),null!=l?l.trigger(new e.Event(r,{type:"mouseup",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(r,{type:"tapend",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(r,{type:"vmouseup",cyPosition:{x:s[0],y:s[1]}})):null==l&&a.trigger(new e.Event(r,{type:"mouseup",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(r,{type:"tapend",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(r,{type:"vmouseup",cyPosition:{x:s[0],y:s[1]}})),Math.pow(u[2]-u[0],2)+Math.pow(u[3]-u[1],2)===0&&(null!=l?l.trigger(new e.Event(r,{type:"click",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(r,{type:"tap",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(r,{type:"vclick",cyPosition:{x:s[0],y:s[1]}})):null==l&&a.trigger(new e.Event(r,{type:"click",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(r,{type:"tap",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(r,{type:"vclick",cyPosition:{x:s[0],y:s[1]}}))),l!=d||n.dragData.didDrag||null!=l&&l._private.selectable&&(n.hoverData.dragging||("additive"===a.selectionType()||p?l.selected()?l.unselect():l.select():p||(a.$(":selected").not(l).unselect(),l.select())),n.data.canvasNeedsRedraw[t.NODE]=!0),a.boxSelectionEnabled()&&Math.pow(u[2]-u[0],2)+Math.pow(u[3]-u[1],2)>7&&u[4]){var v=[],g=n.getAllInBox(u[0],u[1],u[2],u[3]);n.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,g.length>0&&(n.data.canvasNeedsRedraw[t.NODE]=!0);for(var y=0;y<g.length;y++)g[y]._private.selectable&&v.push(g[y]);var m=new e.Collection(a,v);"additive"===a.selectionType()?m.select():(p||a.$(":selected").not(m).unselect(),m.select()),n.redraw()}if(n.hoverData.dragging&&(n.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,n.redraw()),n.hoverData.dragging=!1,!u[4]){n.data.canvasNeedsRedraw[t.DRAG]=!0,n.data.canvasNeedsRedraw[t.NODE]=!0;for(var y=0;y<c.length;y++)if("nodes"===c[y]._private.group){c[y]._private.rscratch.inDragLayer=!1,c[y]._private.grabbed=!1;for(var b=c[y]._private.edges,x=0;x<b.length;x++)b[x]._private.rscratch.inDragLayer=!1;o(c[y],{inDragLayer:!1})}else"edges"===c[y]._private.group&&(c[y]._private.rscratch.inDragLayer=!1);d&&d.trigger("free")}}u[4]=0,n.hoverData.down=null,n.dragData.didDrag=!1,n.hoverData.dragDelta=[]}},!1);var c=function(e){if(!n.scrollingPage){var r=n.data.cy,i=n.projectIntoViewport(e.clientX,e.clientY),a=[i[0]*r.zoom()+r.pan().x,i[1]*r.zoom()+r.pan().y];if(n.hoverData.draggingEles||n.hoverData.dragging||n.hoverData.cxtStarted||l())return void e.preventDefault();if(r.panningEnabled()&&r.userPanningEnabled()&&r.zoomingEnabled()&&r.userZoomingEnabled()){e.preventDefault(),n.data.wheelZooming=!0,clearTimeout(n.data.wheelTimeout),n.data.wheelTimeout=setTimeout(function(){n.data.wheelZooming=!1,n.data.canvasNeedsRedraw[t.NODE]=!0,n.redraw()},150);var o=e.deltaY/-250||e.wheelDeltaY/1e3||e.wheelDelta/1e3;o*=n.wheelSensitivity;var s=1===e.deltaMode;s&&(o*=33),r.zoom({level:r.zoom()*Math.pow(10,o),renderedPosition:{x:a[0],y:a[1]}})}}};n.registerBinding(n.data.container,"wheel",c,!0),n.registerBinding(window,"scroll",function(){n.scrollingPage=!0,clearTimeout(n.scrollingPageTimeout),n.scrollingPageTimeout=setTimeout(function(){n.scrollingPage=!1},250)},!0),n.registerBinding(n.data.container,"mouseout",function(t){var r=n.projectIntoViewport(t.clientX,t.clientY);n.data.cy.trigger(new e.Event(t,{type:"mouseout",cyPosition:{x:r[0],y:r[1]}}))},!1),n.registerBinding(n.data.container,"mouseover",function(t){var r=n.projectIntoViewport(t.clientX,t.clientY);n.data.cy.trigger(new e.Event(t,{type:"mouseover",cyPosition:{x:r[0],y:r[1]}}))},!1);var d,p,h,f,v,g,y,m,b,x,w,_,E,S=function(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))},k=function(e,t,n,r){return(n-e)*(n-e)+(r-t)*(r-t)};n.registerBinding(n.data.container,"touchstart",function(r){clearTimeout(this.threeFingerSelectTimeout),r.target!==n.data.link&&r.preventDefault(),n.touchData.capture=!0,n.data.bgActivePosistion=void 0;var i=n.data.cy,o=n.getCachedNodes(),s=n.getCachedEdges(),u=n.touchData.now,l=n.touchData.earlier;if(r.touches[0]){var c=n.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);u[0]=c[0],u[1]=c[1]}if(r.touches[1]){var c=n.projectIntoViewport(r.touches[1].clientX,r.touches[1].clientY);u[2]=c[0],u[3]=c[1]}if(r.touches[2]){var c=n.projectIntoViewport(r.touches[2].clientX,r.touches[2].clientY);u[4]=c[0],u[5]=c[1]}if(r.touches[1]){var P=function(e){for(var t=0;t<e.length;t++)e[t]._private.grabbed=!1,e[t]._private.rscratch.inDragLayer=!1,e[t].active()&&e[t].unactivate()};P(o),P(s);var C=n.findContainerClientCoords();b=C[0],x=C[1],w=C[2],_=C[3],d=r.touches[0].clientX-b,p=r.touches[0].clientY-x,h=r.touches[1].clientX-b,f=r.touches[1].clientY-x,E=d>=0&&w>=d&&h>=0&&w>=h&&p>=0&&_>=p&&f>=0&&_>=f;var D=i.pan(),T=i.zoom();v=S(d,p,h,f),g=k(d,p,h,f),y=[(d+h)/2,(p+f)/2],m=[(y[0]-D.x)/T,(y[1]-D.y)/T];var N=200,M=N*N;if(M>g&&!r.touches[2]){var B=n.findNearestElement(u[0],u[1],!0),I=n.findNearestElement(u[2],u[3],!0);return B&&B.isNode()?(B.activate().trigger(new e.Event(r,{type:"cxttapstart",cyPosition:{x:u[0],y:u[1]}})),n.touchData.start=B):I&&I.isNode()?(I.activate().trigger(new e.Event(r,{type:"cxttapstart",cyPosition:{x:u[0],y:u[1]}})),n.touchData.start=I):(i.trigger(new e.Event(r,{type:"cxttapstart",cyPosition:{x:u[0],y:u[1]}})),n.touchData.start=null),n.touchData.start&&(n.touchData.start._private.grabbed=!1),n.touchData.cxt=!0,n.touchData.cxtDragged=!1,n.data.bgActivePosistion=void 0,void n.redraw()}}if(r.touches[2]);else if(r.touches[1]);else if(r.touches[0]){var A=n.findNearestElement(u[0],u[1],!0);if(null!=A){if(A.activate(),n.touchData.start=A,A.isNode()&&n.nodeIsDraggable(A)){var L=n.dragData.touchDragEles=[];if(n.data.canvasNeedsRedraw[t.NODE]=!0,n.data.canvasNeedsRedraw[t.DRAG]=!0,A.selected())for(var O=i.$(function(){return this.isNode()&&this.selected()}),z=0;z<O.length;z++){var j=O[z];n.nodeIsDraggable(j)&&a(j,{addToList:L})}else a(A,{addToList:L});A.trigger(new e.Event(r,{type:"grab",cyPosition:{x:u[0],y:u[1]}}))}A.trigger(new e.Event(r,{type:"touchstart",cyPosition:{x:u[0],y:u[1]}})).trigger(new e.Event(r,{type:"tapstart",cyPosition:{x:u[0],y:u[1]}})).trigger(new e.Event(r,{type:"vmousdown",cyPosition:{x:u[0],y:u[1]}}))}null==A&&(i.trigger(new e.Event(r,{type:"touchstart",cyPosition:{x:u[0],y:u[1]}})).trigger(new e.Event(r,{type:"tapstart",cyPosition:{x:u[0],y:u[1]}})).trigger(new e.Event(r,{type:"vmousedown",cyPosition:{x:u[0],y:u[1]}})),n.data.bgActivePosistion={x:c[0],y:c[1]},n.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,n.redraw());for(var R=0;R<u.length;R++)l[R]=u[R],n.touchData.startPosition[R]=u[R];n.touchData.singleTouchMoved=!1,n.touchData.singleTouchStartTime=+new Date,clearTimeout(n.touchData.tapholdTimeout),n.touchData.tapholdTimeout=setTimeout(function(){n.touchData.singleTouchMoved!==!1||n.pinching||(n.touchData.start?n.touchData.start.trigger(new e.Event(r,{type:"taphold",cyPosition:{x:u[0],y:u[1]}})):(n.data.cy.trigger(new e.Event(r,{type:"taphold",cyPosition:{x:u[0],y:u[1]}})),i.$(":selected").unselect()))},n.tapholdDuration)}},!1),n.registerBinding(window,"touchmove",e.util.throttle(function(r){var i=n.data.select,o=n.touchData.capture;o&&r.preventDefault();var s=n.data.cy,u=n.touchData.now,l=n.touchData.earlier,c=s.zoom();if(r.touches[0]){var y=n.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);u[0]=y[0],u[1]=y[1]}if(r.touches[1]){var y=n.projectIntoViewport(r.touches[1].clientX,r.touches[1].clientY);u[2]=y[0],u[3]=y[1]}if(r.touches[2]){var y=n.projectIntoViewport(r.touches[2].clientX,r.touches[2].clientY);u[4]=y[0],u[5]=y[1]}for(var w=[],_=0;_<u.length;_++)w[_]=u[_]-l[_];var P=n.touchData.startPosition,C=u[0]-P[0],D=C*C,T=u[1]-P[1],N=T*T,M=D+N,B=M*c*c;if(o&&n.touchData.cxt){var I=r.touches[0].clientX-b,A=r.touches[0].clientY-x,L=r.touches[1].clientX-b,O=r.touches[1].clientY-x,z=k(I,A,L,O),j=z/g,R=150,Y=R*R,X=1.5,V=X*X;if(j>=V||z>=Y){n.touchData.cxt=!1,n.touchData.start&&(n.touchData.start.unactivate(),n.touchData.start=null),n.data.bgActivePosistion=void 0,n.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;var q=new e.Event(r,{type:"cxttapend",cyPosition:{x:u[0],y:u[1]}});n.touchData.start?n.touchData.start.trigger(q):s.trigger(q)}}if(o&&n.touchData.cxt){var q=new e.Event(r,{type:"cxtdrag",cyPosition:{x:u[0],y:u[1]}});n.data.bgActivePosistion=void 0,n.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,n.touchData.start?n.touchData.start.trigger(q):s.trigger(q),n.touchData.start&&(n.touchData.start._private.grabbed=!1),n.touchData.cxtDragged=!0;var F=n.findNearestElement(u[0],u[1],!0);n.touchData.cxtOver&&F===n.touchData.cxtOver||(n.touchData.cxtOver&&n.touchData.cxtOver.trigger(new e.Event(r,{type:"cxtdragout",cyPosition:{x:u[0],y:u[1]}})),n.touchData.cxtOver=F,F&&F.trigger(new e.Event(r,{type:"cxtdragover",cyPosition:{x:u[0],y:u[1]}})))}else if(o&&r.touches[2]&&s.boxSelectionEnabled())n.data.bgActivePosistion=void 0,clearTimeout(this.threeFingerSelectTimeout),this.lastThreeTouch=+new Date,n.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,i&&0!==i.length&&void 0!==i[0]?(i[2]=(u[0]+u[2]+u[4])/3,i[3]=(u[1]+u[3]+u[5])/3):(i[0]=(u[0]+u[2]+u[4])/3,i[1]=(u[1]+u[3]+u[5])/3,i[2]=(u[0]+u[2]+u[4])/3+1,i[3]=(u[1]+u[3]+u[5])/3+1),i[4]=1,n.redraw();else if(o&&r.touches[1]&&s.zoomingEnabled()&&s.panningEnabled()&&s.userZoomingEnabled()&&s.userPanningEnabled()){n.data.bgActivePosistion=void 0,n.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;var Z=n.dragData.touchDragEles;if(Z){n.data.canvasNeedsRedraw[t.DRAG]=!0;for(var W=0;W<Z.length;W++)Z[W]._private.grabbed=!1,Z[W]._private.rscratch.inDragLayer=!1}var I=r.touches[0].clientX-b,A=r.touches[0].clientY-x,L=r.touches[1].clientX-b,O=r.touches[1].clientY-x,H=S(I,A,L,O),U=H/v;if(1!=U&&E){var $=I-d,K=A-p,G=L-h,J=O-f,Q=($+G)/2,et=(K+J)/2,tt=s.zoom(),nt=tt*U,rt=s.pan(),it=m[0]*tt+rt.x,at=m[1]*tt+rt.y,ot={x:-nt/tt*(it-rt.x-Q)+it,y:-nt/tt*(at-rt.y-et)+at};if(n.touchData.start){var Z=n.dragData.touchDragEles;if(Z)for(var W=0;W<Z.length;W++)Z[W]._private.grabbed=!1,Z[W]._private.rscratch.inDragLayer=!1;n.touchData.start._private.active=!1,n.touchData.start._private.grabbed=!1,n.touchData.start._private.rscratch.inDragLayer=!1,n.data.canvasNeedsRedraw[t.DRAG]=!0,n.touchData.start.trigger("free").trigger("unactivate")}s.viewport({zoom:nt,pan:ot,cancelOnFailedZoom:!0}),v=H,d=I,p=A,h=L,f=O,n.pinching=!0}if(r.touches[0]){var y=n.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);u[0]=y[0],u[1]=y[1]}if(r.touches[1]){var y=n.projectIntoViewport(r.touches[1].clientX,r.touches[1].clientY);u[2]=y[0],u[3]=y[1]}if(r.touches[2]){var y=n.projectIntoViewport(r.touches[2].clientX,r.touches[2].clientY);u[4]=y[0],u[5]=y[1]}}else if(r.touches[0]){var st=n.touchData.start,ut=n.touchData.last,F=F||n.findNearestElement(u[0],u[1],!0);if(null!=st&&"nodes"==st._private.group&&n.nodeIsDraggable(st))if(B>=n.tapThreshold2){for(var Z=n.dragData.touchDragEles,lt=0;lt<Z.length;lt++){var ct=Z[lt];if(n.nodeIsDraggable(ct)&&ct.isNode()&&ct.grabbed()){n.dragData.didDrag=!0;var dt=ct._private.position,pt=!n.hoverData.draggingEles;if(e.is.number(w[0])&&e.is.number(w[1])&&(dt.x+=w[0],dt.y+=w[1]),pt){a(ct,{inDragLayer:!0});var ht=n.touchData.dragDelta;e.is.number(ht[0])&&e.is.number(ht[1])&&(dt.x+=ht[0],dt.y+=ht[1])}}}var ft=new e.Collection(s,ct);ft.updateCompoundBounds(),ft.trigger("position drag"),n.hoverData.draggingEles=!0,n.data.canvasNeedsRedraw[t.DRAG]=!0,n.touchData.startPosition[0]==l[0]&&n.touchData.startPosition[1]==l[1]&&(n.data.canvasNeedsRedraw[t.NODE]=!0),n.redraw()}else{var ht=n.touchData.dragDelta=n.touchData.dragDelta||[];0===ht.length?(ht.push(0),ht.push(0)):(ht[0]+=w[0],ht[1]+=w[1])}null!=st&&(st.trigger(new e.Event(r,{type:"touchmove",cyPosition:{x:u[0],y:u[1]}})),st.trigger(new e.Event(r,{type:"tapdrag",cyPosition:{x:u[0],y:u[1]}})),st.trigger(new e.Event(r,{type:"vmousemove",cyPosition:{x:u[0],y:u[1]}}))),null==st&&(null!=F&&(F.trigger(new e.Event(r,{type:"touchmove",cyPosition:{x:u[0],y:u[1]}})),F.trigger(new e.Event(r,{type:"tapdrag",cyPosition:{x:u[0],y:u[1]}})),F.trigger(new e.Event(r,{type:"vmousemove",cyPosition:{x:u[0],y:u[1]}}))),null==F&&(s.trigger(new e.Event(r,{type:"touchmove",cyPosition:{x:u[0],y:u[1]}})),s.trigger(new e.Event(r,{type:"tapdrag",cyPosition:{x:u[0],y:u[1]}})),s.trigger(new e.Event(r,{type:"vmousemove",cyPosition:{x:u[0],y:u[1]}})))),F!=ut&&(ut&&ut.trigger(new e.Event(r,{type:"tapdragout",cyPosition:{x:u[0],y:u[1]}})),F&&F.trigger(new e.Event(r,{type:"tapdragover",cyPosition:{x:u[0],y:u[1]}}))),n.touchData.last=F;for(var W=0;W<u.length;W++)u[W]&&n.touchData.startPosition[W]&&Math.abs(u[W]-n.touchData.startPosition[W])>4&&(n.touchData.singleTouchMoved=!0);if(o&&(null==st||st.isEdge())&&s.panningEnabled()&&s.userPanningEnabled()){n.swipePanning?s.panBy({x:w[0]*c,y:w[1]*c}):B>=n.tapThreshold2&&(n.swipePanning=!0,s.panBy({x:C*c,y:T*c})),st&&(st.unactivate(),n.data.bgActivePosistion||(n.data.bgActivePosistion={x:u[0],y:u[1]}),n.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,n.touchData.start=null);var y=n.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);u[0]=y[0],u[1]=y[1]}}for(var _=0;_<u.length;_++)l[_]=u[_]},1e3/30,{trailing:!0}),!1),n.registerBinding(window,"touchcancel",function(){var e=n.touchData.start;n.touchData.capture=!1,e&&e.unactivate()}),n.registerBinding(window,"touchend",function(r){var i=n.touchData.start,a=n.touchData.capture;if(a){n.touchData.capture=!1,r.preventDefault();var s=n.data.select;n.swipePanning=!1,n.hoverData.draggingEles=!1;var u=n.data.cy,l=u.zoom(),c=n.touchData.now,d=n.touchData.earlier;if(r.touches[0]){var p=n.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);c[0]=p[0],c[1]=p[1]}if(r.touches[1]){var p=n.projectIntoViewport(r.touches[1].clientX,r.touches[1].clientY);c[2]=p[0],c[3]=p[1]}if(r.touches[2]){var p=n.projectIntoViewport(r.touches[2].clientX,r.touches[2].clientY);c[4]=p[0],c[5]=p[1]}i&&i.unactivate();var h;if(n.touchData.cxt){if(h=new e.Event(r,{type:"cxttapend",cyPosition:{x:c[0],y:c[1]}}),i?i.trigger(h):u.trigger(h),!n.touchData.cxtDragged){var f=new e.Event(r,{type:"cxttap",cyPosition:{x:c[0],y:c[1]}});i?i.trigger(f):u.trigger(f)}return n.touchData.start&&(n.touchData.start._private.grabbed=!1),n.touchData.cxt=!1,n.touchData.start=null,void n.redraw()}if(!r.touches[2]&&u.boxSelectionEnabled()){clearTimeout(this.threeFingerSelectTimeout);var v=[],g=n.getAllInBox(s[0],s[1],s[2],s[3]);s[0]=void 0,s[1]=void 0,s[2]=void 0,s[3]=void 0,s[4]=0,n.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;for(var y=0;y<g.length;y++)g[y]._private.selectable&&v.push(g[y]);var m=new e.Collection(u,v);"single"===u.selectionType()&&u.$(":selected").not(m).unselect(),m.select(),m.length>0?n.data.canvasNeedsRedraw[t.NODE]=!0:n.redraw()}var b=!1;if(null!=i&&(i._private.active=!1,b=!0,i.unactivate()),r.touches[2])n.data.bgActivePosistion=void 0,n.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;else if(r.touches[1]);else if(r.touches[0]);else if(!r.touches[0]){if(n.data.bgActivePosistion=void 0,n.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,null!=i){i._private.grabbed&&(i._private.grabbed=!1,i.trigger("free"),i._private.rscratch.inDragLayer=!1);for(var x=i._private.edges,w=0;w<x.length;w++)x[w]._private.rscratch.inDragLayer=!1;if(o(i,!1),i.selected())for(var _=u.$("node:selected"),E=0;E<_.length;E++){var S=_[E];S._private.rscratch.inDragLayer=!1,S._private.grabbed=!1;for(var x=S._private.edges,w=0;w<x.length;w++)x[w]._private.rscratch.inDragLayer=!1;o(S,!1)}n.data.canvasNeedsRedraw[t.DRAG]=!0,n.data.canvasNeedsRedraw[t.NODE]=!0,i.trigger(new e.Event(r,{type:"touchend",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(r,{type:"tapend",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(r,{type:"vmouseup",cyPosition:{x:c[0],y:c[1]}})),i.unactivate(),n.touchData.start=null}else{var k=n.findNearestElement(c[0],c[1],!0);null!=k&&k.trigger(new e.Event(r,{type:"touchend",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(r,{type:"tapend",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(r,{type:"vmouseup",cyPosition:{x:c[0],y:c[1]}})),null==k&&u.trigger(new e.Event(r,{type:"touchend",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(r,{type:"tapend",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(r,{type:"vmouseup",cyPosition:{x:c[0],y:c[1]}}))}var P=n.touchData.startPosition[0]-c[0],C=P*P,D=n.touchData.startPosition[1]-c[1],T=D*D,N=C+T,M=N*l*l;null!=i&&!n.dragData.didDrag&&i._private.selectable&&M<n.tapThreshold2&&!n.pinching&&("single"===u.selectionType()?(u.$(":selected").not(i).unselect(),i.select()):i.selected()?i.unselect():i.select(),b=!0,n.data.canvasNeedsRedraw[t.NODE]=!0),n.touchData.singleTouchMoved===!1&&(i?i.trigger(new e.Event(r,{type:"tap",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(r,{type:"vclick",cyPosition:{x:c[0],y:c[1]}})):u.trigger(new e.Event(r,{type:"tap",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(r,{type:"vclick",cyPosition:{x:c[0],y:c[1]}}))),n.touchData.singleTouchMoved=!0}for(var w=0;w<c.length;w++)d[w]=c[w];n.dragData.didDrag=!1,r.touches[0]&&(n.touchData.dragDelta=[]),b&&i&&i.updateStyle(!1),r.touches.length<2&&(n.pinching=!1,n.data.canvasNeedsRedraw[t.NODE]=!0,n.redraw())}},!1)}}(n),function(e){"use strict";for(var t=e("renderer","canvas"),n=t.prototype,r=t.usePaths(),i=t.nodeShapes={},a=Math.sin(0),o=Math.cos(0),s={},u={},l=.1,c=0*Math.PI;c<2*Math.PI;c+=l)s[c]=Math.sin(c),u[c]=Math.cos(c);i.ellipse={draw:function(e,t,n,r,a){i.ellipse.drawPath(e,t,n,r,a),e.fill()},drawPath:function(e,t,n,i,c){if(r){e.beginPath&&e.beginPath();for(var d,p,h=i/2,f=c/2,v=0*Math.PI;v<2*Math.PI;v+=l)d=t-h*s[v]*a+h*u[v]*o,p=n+f*u[v]*a+f*s[v]*o,0===v?e.moveTo(d,p):e.lineTo(d,p);e.closePath()}else e.beginPath&&e.beginPath(),e.translate(t,n),e.scale(i/2,c/2),e.arc(0,0,1,0,2*Math.PI*.999,!1),e.closePath(),e.scale(2/i,2/c),e.translate(-t,-n)},intersectLine:function(t,n,r,i,a,o,s){var u=e.math.intersectLineEllipse(a,o,t,n,r/2+s,i/2+s);return u},intersectBox:function(t,n,r,i,a,o,s,u,l){return e.math.boxIntersectEllipse(t,n,r,i,l,a,o,s,u)},checkPoint:function(e,t,n,r,i,a,o){return e-=a,t-=o,e/=r/2+n,t/=i/2+n,Math.pow(e,2)+Math.pow(t,2)<=1}},i.triangle={points:e.math.generateUnitNgonPointsFitToSquare(3,0),draw:function(e,t,r,a,o){n.drawPolygon(e,t,r,a,o,i.triangle.points)},drawPath:function(e,t,r,a,o){n.drawPolygonPath(e,t,r,a,o,i.triangle.points)},intersectLine:function(t,n,r,a,o,s,u){return e.math.polygonIntersectLine(o,s,i.triangle.points,t,n,r/2,a/2,u)},intersectBox:function(t,n,r,a,o,s,u,l,c){var d=i.triangle.points;return e.math.boxIntersectPolygon(t,n,r,a,d,o,s,u,l,[0,-1],c)},checkPoint:function(t,n,r,a,o,s,u){return e.math.pointInsidePolygon(t,n,i.triangle.points,s,u,a,o,[0,-1],r)}},i.square={points:e.math.generateUnitNgonPointsFitToSquare(4,0),draw:function(e,t,r,a,o){n.drawPolygon(e,t,r,a,o,i.square.points)},drawPath:function(e,t,r,a,o){n.drawPolygonPath(e,t,r,a,o,i.square.points)},intersectLine:function(t,n,r,a,o,s,u){return e.math.polygonIntersectLine(o,s,i.square.points,t,n,r/2,a/2,u)},intersectBox:function(t,n,r,a,o,s,u,l,c){var d=i.square.points;return e.math.boxIntersectPolygon(t,n,r,a,d,o,s,u,l,[0,-1],c)},checkPoint:function(t,n,r,a,o,s,u){return e.math.pointInsidePolygon(t,n,i.square.points,s,u,a,o,[0,-1],r)}},i.rectangle=i.square,i.octogon={},i.roundrectangle={points:e.math.generateUnitNgonPointsFitToSquare(4,0),draw:function(e,t,r,i,a){n.drawRoundRectangle(e,t,r,i,a,10)},drawPath:function(e,t,r,i,a){n.drawRoundRectanglePath(e,t,r,i,a,10)},intersectLine:function(t,n,r,i,a,o,s){return e.math.roundRectangleIntersectLine(a,o,t,n,r,i,s)},intersectBox:function(t,n,r,i,a,o,s,u,l){return e.math.roundRectangleIntersectBox(t,n,r,i,a,o,s,u,l)},checkPoint:function(t,n,r,a,o,s,u){var l=e.math.getRoundRectangleRadius(a,o);if(e.math.pointInsidePolygon(t,n,i.roundrectangle.points,s,u,a,o-2*l,[0,-1],r))return!0;if(e.math.pointInsidePolygon(t,n,i.roundrectangle.points,s,u,a-2*l,o,[0,-1],r))return!0;var c=function(e,t,n,r,i,a,o){return e-=n,t-=r,e/=i/2+o,t/=a/2+o,Math.pow(e,2)+Math.pow(t,2)<=1};return c(t,n,s-a/2+l,u-o/2+l,2*l,2*l,r)?!0:c(t,n,s+a/2-l,u-o/2+l,2*l,2*l,r)?!0:c(t,n,s+a/2-l,u+o/2-l,2*l,2*l,r)?!0:c(t,n,s-a/2+l,u+o/2-l,2*l,2*l,r)?!0:!1}},i.pentagon={points:e.math.generateUnitNgonPointsFitToSquare(5,0),draw:function(e,t,r,a,o){n.drawPolygon(e,t,r,a,o,i.pentagon.points)},drawPath:function(e,t,r,a,o){n.drawPolygonPath(e,t,r,a,o,i.pentagon.points)},intersectLine:function(e,t,r,a,o,s,u){return n.polygonIntersectLine(o,s,i.pentagon.points,e,t,r/2,a/2,u)},intersectBox:function(t,n,r,a,o,s,u,l,c){var d=i.pentagon.points;return e.math.boxIntersectPolygon(t,n,r,a,d,o,s,u,l,[0,-1],c)},checkPoint:function(t,n,r,a,o,s,u){return e.math.pointInsidePolygon(t,n,i.pentagon.points,s,u,a,o,[0,-1],r)}},i.hexagon={points:e.math.generateUnitNgonPointsFitToSquare(6,0),draw:function(e,t,r,a,o){n.drawPolygon(e,t,r,a,o,i.hexagon.points)},drawPath:function(e,t,r,a,o){n.drawPolygonPath(e,t,r,a,o,i.hexagon.points)},intersectLine:function(t,n,r,a,o,s,u){return e.math.polygonIntersectLine(o,s,i.hexagon.points,t,n,r/2,a/2,u)},intersectBox:function(t,n,r,a,o,s,u,l,c){var d=i.hexagon.points;return e.math.boxIntersectPolygon(t,n,r,a,d,o,s,u,l,[0,-1],c)},checkPoint:function(t,n,r,a,o,s,u){return e.math.pointInsidePolygon(t,n,i.hexagon.points,s,u,a,o,[0,-1],r)}},i.heptagon={points:e.math.generateUnitNgonPointsFitToSquare(7,0),draw:function(e,t,r,a,o){n.drawPolygon(e,t,r,a,o,i.heptagon.points)},drawPath:function(e,t,r,a,o){n.drawPolygonPath(e,t,r,a,o,i.heptagon.points)},intersectLine:function(e,t,r,a,o,s,u){return n.polygonIntersectLine(o,s,i.heptagon.points,e,t,r/2,a/2,u)},intersectBox:function(e,t,r,a,o,s,u,l,c){var d=i.heptagon.points;return n.boxIntersectPolygon(e,t,r,a,d,o,s,u,l,[0,-1],c)},checkPoint:function(t,n,r,a,o,s,u){return e.math.pointInsidePolygon(t,n,i.heptagon.points,s,u,a,o,[0,-1],r)}},i.octagon={points:e.math.generateUnitNgonPointsFitToSquare(8,0),draw:function(e,t,r,a,o){n.drawPolygon(e,t,r,a,o,i.octagon.points)},drawPath:function(e,t,r,a,o){n.drawPolygonPath(e,t,r,a,o,i.octagon.points)},intersectLine:function(e,t,r,a,o,s,u){return n.polygonIntersectLine(o,s,i.octagon.points,e,t,r/2,a/2,u)},intersectBox:function(e,t,r,a,o,s,u,l,c){var d=i.octagon.points;return n.boxIntersectPolygon(e,t,r,a,d,o,s,u,l,[0,-1],c)},checkPoint:function(t,n,r,a,o,s,u){return e.math.pointInsidePolygon(t,n,i.octagon.points,s,u,a,o,[0,-1],r)}};var d=new Array(20),p=e.math.generateUnitNgonPoints(5,0),h=e.math.generateUnitNgonPoints(5,Math.PI/5),f=.5*(3-Math.sqrt(5));f*=1.57;for(var c=0;c<h.length/2;c++)h[2*c]*=f,h[2*c+1]*=f;for(var c=0;5>c;c++)d[4*c]=p[2*c],d[4*c+1]=p[2*c+1],d[4*c+2]=h[2*c],d[4*c+3]=h[2*c+1];d=e.math.fitPolygonToSquare(d),i.star5=i.star={points:d,draw:function(e,t,r,a,o){n.drawPolygon(e,t,r,a,o,i.star5.points)},drawPath:function(e,t,r,a,o){n.drawPolygonPath(e,t,r,a,o,i.star5.points)},intersectLine:function(e,t,r,a,o,s,u){return n.polygonIntersectLine(o,s,i.star5.points,e,t,r/2,a/2,u)},intersectBox:function(e,t,r,a,o,s,u,l,c){var d=i.star5.points;return n.boxIntersectPolygon(e,t,r,a,d,o,s,u,l,[0,-1],c)},checkPoint:function(t,n,r,a,o,s,u){return e.math.pointInsidePolygon(t,n,i.star5.points,s,u,a,o,[0,-1],r)}}}(n),function(e){"use strict";function t(t){this._private={},this._private.options=e.util.extend({},n,t)}var n={animate:!0,maxSimulationTime:4e3,fit:!0,padding:30,boundingBox:void 0,ungrabifyWhileSimulating:!1,ready:void 0,stop:void 0,repulsion:void 0,stiffness:void 0,friction:void 0,gravity:!0,fps:void 0,precision:void 0,nodeMass:void 0,edgeLength:void 0,stepSize:.1,stableEnergy:function(e){var t=e;return t.max<=.5||t.mean<=.3},infinite:!1};t.prototype.run=function(){var t=this,n=this._private.options;return e.util.require("arbor",function(r){function i(e,t){return null==t?void 0:"function"==typeof t?t.apply(e,[e._private.data,{nodes:l.length,edges:c.length,element:e}]):t}function a(e){if(!e.isFullAutoParent()){var t=e._private.data.id,r=i(e,n.nodeMass),a=e._private.locked,o=e.position(),s=h.fromScreen({x:o.x,y:o.y});e.scratch().arbor=h.addNode(t,{element:e,mass:r,fixed:a,x:a?s.x:void 0,y:a?s.y:void 0})}}function o(e){var t=e.source().id(),r=e.target().id(),a=i(e,n.edgeLength);e.scratch().arbor=h.addEdge(t,r,{length:a})}var s=n.cy,u=n.eles,l=u.nodes().not(":parent"),c=u.edges(),d=e.util.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:s.width(),h:s.height()}),p=!1;if(t.trigger({type:"layoutstart",layout:t}),void 0!==n.liveUpdate&&(n.animate=n.liveUpdate),s.nodes().size()<=1)return n.fit&&s.reset(),s.nodes().position({x:Math.round((d.x1+d.x2)/2),y:Math.round((d.y1+d.y2)/2)}),t.one("layoutready",n.ready),t.trigger({type:"layoutready",layout:t}),t.one("layoutstop",n.stop),void t.trigger({type:"layoutstop",layout:t});var h=t._private.system=r.ParticleSystem();h.parameters({repulsion:n.repulsion,stiffness:n.stiffness,friction:n.friction,gravity:n.gravity,fps:n.fps,dt:n.dt,precision:n.precision}),n.animate&&n.fit&&s.fit(d,n.padding);var f,v=250,g=!1,y=+new Date,m={init:function(){},redraw:function(){var e=h.energy();if(!n.infinite&&null!=n.stableEnergy&&null!=e&&e.n>0&&n.stableEnergy(e))return void t.stop();n.infinite||1/0==v||(clearTimeout(f),f=setTimeout(k,v));var r=s.collection();h.eachNode(function(e,t){var n=e.data,i=n.element;null!=i&&(i.locked()||i.grabbed()||(i.silentPosition({x:d.x1+t.x,y:d.y1+t.y}),r.merge(i)))}),n.animate&&r.length>0&&(p=!0,r.rtrigger("position"),n.fit&&s.fit(n.padding),y=+new Date,p=!1),g||(g=!0,t.one("layoutready",n.ready),t.trigger({type:"layoutready",layout:t}))}};h.renderer=m,h.screenSize(d.w,d.h),h.screenPadding(n.padding,n.padding,n.padding,n.padding),h.screenStep(n.stepSize);var b;l.on("grab free position",b=function(e){if(!p){var t=this.position(),i=h.fromScreen(t);if(i){var a=r.Point(i.x,i.y),o=n.padding;switch(d.x1+o<=t.x&&t.x<=d.x2-o&&d.y1+o<=t.y&&t.y<=d.y2-o&&(this.scratch().arbor.p=a),e.type){case"grab":this.scratch().arbor.fixed=!0;break;case"free":this.scratch().arbor.fixed=!1}}}});var x;l.on("lock unlock",x=function(){node.scratch().arbor.fixed=node.locked()});var w;u.on("remove",w=function(){});var _;s.on("add","*",_=function(){});var E;s.on("resize",E=function(){if(null==n.boundingBox&&null!=t._private.system){var e=s.width(),r=s.height();h.screenSize(e,r)}}),l.each(function(e,t){a(t)}),c.each(function(e,t){o(t)});var S=l.filter(":grabbable");n.ungrabifyWhileSimulating&&S.ungrabify();var k=t._private.doneHandler=function(){t._private.doneHandler=null,n.animate||(n.fit&&s.reset(),l.rtrigger("position")),l.off("grab free position",b),l.off("lock unlock",x),u.off("remove",w),s.off("add","*",_),s.off("resize",E),n.ungrabifyWhileSimulating&&S.grabify(),t.one("layoutstop",n.stop),t.trigger({type:"layoutstop",layout:t})};h.start(),!n.infinite&&null!=n.maxSimulationTime&&n.maxSimulationTime>0&&1/0!==n.maxSimulationTime&&setTimeout(function(){t.stop()},n.maxSimulationTime)}),this},t.prototype.stop=function(){return null!=this._private.system&&this._private.system.stop(),this._private.doneHandler&&this._private.doneHandler(),this},e("layout","arbor",t)}(n),function(e){"use strict";function t(t){this.options=e.util.extend({},n,t)}var n={fit:!0,directed:!1,padding:30,circle:!1,boundingBox:void 0,avoidOverlap:!0,roots:void 0,maximalAdjustments:0,animate:!1,animationDuration:500,ready:void 0,stop:void 0};t.prototype.run=function(){var t,n=this.options,r=n,i=n.cy,a=r.eles,o=a.nodes().not(":parent"),s=a,u=e.util.makeBoundingBox(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:i.width(),h:i.height()});if(e.is.elementOrCollection(r.roots))t=r.roots;else if(e.is.array(r.roots)){for(var l=[],c=0;c<r.roots.length;c++){var d=r.roots[c],p=i.getElementById(d);l.push(p)}t=new e.Collection(i,l)}else if(e.is.string(r.roots))t=i.$(r.roots);else if(r.directed)t=o.roots();else{for(var h=[],f=o;f.length>0;){var v=i.collection();a.bfs({roots:f[0],visit:function(e,t,n){v=v.add(n)},directed:!1}),f=f.not(v),h.push(v)}t=i.collection();for(var c=0;c<h.length;c++){var g=h[c],y=g.maxDegree(!1),m=g.filter(function(){return this.degree(!1)===y});t=t.add(m)}}var b=[],x={},w={},_={},E={},S={};s.bfs({roots:t,directed:r.directed,visit:function(e,t,n,r,i){var a=this[0],o=a.id();if(b[t]||(b[t]=[]),b[t].push(a),x[o]=!0,w[o]=t,_[o]=i,E[o]=r,i){var s=i.id(),u=S[s]=S[s]||[];u.push(n)}}});for(var k=[],c=0;c<o.length;c++){var p=o[c];x[p.id()]||k.push(p)}for(var P=3*k.length,C=0;0!==k.length&&P>C;){for(var D=k.shift(),T=D.neighborhood().nodes(),N=!1,c=0;c<T.length;c++){var M=w[T[c].id()];if(void 0!==M){b[M].push(D),N=!0;break}}N||k.push(D),C++}for(;0!==k.length;){var D=k.shift(),N=!1;N||(0===b.length&&b.push([]),b[0].push(D))}var B=function(){for(var e=0;e<b.length;e++)for(var t=b[e],n=0;n<t.length;n++){var r=t[n];r._private.scratch.breadthfirst={depth:e,index:n}}};B();for(var I=function(e){for(var t,n=e.connectedEdges(function(){return this.data("target")===e.id()}),r=e._private.scratch.breadthfirst,i=0,a=0;a<n.length;a++){var o=n[a],s=o.source()[0],u=s._private.scratch.breadthfirst;
r.depth<=u.depth&&i<u.depth&&(i=u.depth,t=s)}return t},A=0;A<r.maximalAdjustments;A++){for(var L=b.length,O=[],c=0;L>c;c++)for(var M=b[c],z=M.length,j=0;z>j;j++){var p=M[j],R=p._private.scratch.breadthfirst,Y=I(p);Y&&(R.intEle=Y,O.push(p))}for(var c=0;c<O.length;c++){var p=O[c],R=p._private.scratch.breadthfirst,Y=R.intEle,X=Y._private.scratch.breadthfirst;b[R.depth].splice(R.index,1);for(var V=X.depth+1;V>b.length-1;)b.push([]);b[V].push(p),R.depth=V,R.index=b[V].length-1}B()}var q=0;if(r.avoidOverlap){for(var c=0;c<o.length;c++){var F=o[c].outerWidth(),Z=o[c].outerHeight();q=Math.max(q,F,Z)}q*=1.75}for(var W={},H=function(e){if(W[e.id()])return W[e.id()];for(var t=e._private.scratch.breadthfirst.depth,n=e.neighborhood().nodes(),r=0,i=0,a=0;a<n.length;a++){var o=n[a],s=o._private.scratch.breadthfirst.index,u=o._private.scratch.breadthfirst.depth,l=b[u].length;(t>u||0===t)&&(r+=s/l,i++)}return i=Math.max(1,i),r/=i,0===i&&(r=void 0),W[e.id()]=r,r},U=function(e,t){var n=H(e),r=H(t);return n-r},$=0;3>$;$++){for(var c=0;c<b.length;c++)b[c]=b[c].sort(U);B()}for(var K=0,c=0;c<b.length;c++)K=Math.max(b[c].length,K);for(var G={x:u.x1+u.w/2,y:u.x1+u.h/2},J=function(e,t){var n=e._private.scratch.breadthfirst,i=n.depth,a=n.index,o=b[i].length;r.strictHierarchy&&(o=K);var s=Math.max(u.w/(o+1),q),l=Math.max(u.h/(b.length+1),q),c=Math.min(u.w/2/b.length,u.h/2/b.length);if(c=Math.max(c,q),r.strictHierarchy&&!r.circle){var d={x:G.x+(a+1-(o+1)/2)*s,y:(i+1)*l};if(t)return d;var p=S[e.id()];if(p){d.x=0;for(var h=0;h<p.length;h++){var f=Q[p[h].id()];d.x+=f.x}d.x/=p.length}return d}if(r.circle){var v=c*i+c-(b.length>0&&b[0].length<=3?c/2:0),g=2*Math.PI/b[i].length*a;return 0===i&&1===b[0].length&&(v=1),{x:G.x+v*Math.cos(g),y:G.y+v*Math.sin(g)}}return{x:G.x+(a+1-(o+1)/2)*s,y:(i+1)*l}},Q={},c=b.length-1;c>=0;c--)for(var M=b[c],j=0;j<M.length;j++){var D=M[j];Q[D.id()]=J(D,c===b.length-1)}return o.layoutPositions(this,r,function(){return Q[this.id()]}),this},e("layout","breadthfirst",t)}(n),function(e){"use strict";function t(t){this.options=e.util.extend({},n,t)}var n={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,radius:void 0,startAngle:1.5*Math.PI,counterclockwise:!1,animate:!1,animationDuration:500,ready:void 0,stop:void 0};t.prototype.run=function(){for(var t,n=this.options,r=n,i=n.cy,a=r.eles,o=a.nodes().not(":parent"),s=e.util.makeBoundingBox(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:i.width(),h:i.height()}),u={x:s.x1+s.w/2,y:s.y1+s.h/2},l=r.startAngle,c=2*Math.PI/o.length,d=0,p=0;p<o.length;p++){var h=o[p].outerWidth(),f=o[p].outerHeight();d=Math.max(d,h,f)}if(t=e.is.number(r.radius)?r.radius:o.length<=1?0:Math.min(s.h,s.w)/2-d,o.length>1&&r.avoidOverlap){d*=1.75;var c=2*Math.PI/o.length,v=Math.cos(c)-Math.cos(0),g=Math.sin(c)-Math.sin(0),y=Math.sqrt(d*d/(v*v+g*g));t=Math.max(y,t)}var m=function(){var e=t*Math.cos(l),n=t*Math.sin(l),i={x:u.x+e,y:u.y+n};return l=r.counterclockwise?l-c:l+c,i};return o.layoutPositions(this,r,m),this},e("layout","circle",t)}(n),function(e){"use strict";function t(t){this.options=e.util.extend(!0,{},n,t)}var n={animate:!0,refresh:1,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,ready:function(){},stop:function(){},randomize:!1,avoidOverlap:!0,handleDisconnected:!0,nodeSpacing:function(){return 10},flow:void 0,alignment:void 0,edgeLength:void 0,edgeSymDiffLength:void 0,edgeJaccardLength:void 0,unconstrIter:void 0,userConstIter:void 0,allConstIter:void 0,infinite:!1};t.prototype.run=function(){var t=this,n=this.options;return e.util.require("cola",function(r){var i=n.cy,a=n.eles,o=a.nodes(),s=a.edges(),u=!1,l=e.util.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:i.width(),h:i.height()}),c=function(t,n){if(e.is.fn(t)){var r=t;return r.apply(n,[n])}return t},d=function(){for(var e={min:1/0,max:-1/0},t={min:1/0,max:-1/0},r=0;r<o.length;r++){var a=o[r],s=a._private.scratch.cola;e.min=Math.min(e.min,s.x),e.max=Math.max(e.max,s.x),t.min=Math.min(t.min,s.y),t.max=Math.max(t.max,s.y)}o.positions(function(n,r){var i=r._private.position,a=r._private.scratch.cola;r.grabbed()||(i.x=l.x1+a.x-e.min,i.y=l.y1+a.y-t.min)}),u||(h(),u=!0),n.fit&&i.fit(n.padding)},p=function(){t.manuallyStopped=!1,n.ungrabifyWhileSimulating&&y.grabify(),o.off("grab free position",m),o.off("lock unlock",b),t.one("layoutstop",n.stop),t.trigger({type:"layoutstop",layout:t})},h=function(){t.one("layoutready",n.ready),t.trigger({type:"layoutready",layout:t})},f=n.refresh,v=1;n.refresh<0?(v=Math.abs(n.refresh),f=1):f=Math.max(1,f);var g=r.adaptor({trigger:function(e){switch(e.type){case"tick":n.animate&&d();break;case"end":d(),(!n.infinite||t.manuallyStopped)&&p()}},kick:function(t){var r=0,i=function(){var e=t();return e&&n.infinite&&g.resume(),e},a=function(){var e,t=r;if(r=(r+1)%v,0!==t)return!1;for(var n=0;f>n&&!e;n++)e=e||i();return e};if(n.animate){var o=function(){a()||e.util.requestAnimationFrame(o)};e.util.requestAnimationFrame(o)}else for(;!i(););},on:function(){},drag:function(){}});t.adaptor=g;var y=o.filter(":grabbable");n.ungrabifyWhileSimulating&&y.ungrabify();var m;o.on("grab free position",m=function(t){var n=this,r=n._private.scratch.cola,i=n._private.position;switch(n.grabbed()?(r.x=i.x-l.x1,r.y=i.y-l.y1,g.dragstart(r)):e.is.number(r.x)&&e.is.number(r.y)&&(i.x=r.x+l.x1,i.y=r.y+l.y1),t.type){case"grab":g.dragstart(r),g.resume();break;case"free":g.dragend(r)}});var b;o.on("lock unlock",b=function(){var e=this,t=e._private.scratch.cola;e.locked()?g.dragstart(t):g.dragend(t)});var x=o.stdFilter(function(e){return!e.isParent()});if(g.nodes(x.map(function(e,t){var r=c(n.nodeSpacing,e),i=e.position(),a=e._private.scratch.cola={x:n.randomize?Math.round(Math.random()*l.w):i.x,y:n.randomize?Math.round(Math.random()*l.h):i.y,width:e.outerWidth()+2*r,height:e.outerHeight()+2*r,index:t};return a})),n.alignment){var w=[],_=[];x.forEach(function(e){var t=c(n.alignment,e),r=e._private.scratch.cola,i=r.index;t&&(null!=t.x&&w.push({node:i,offset:t.x}),null!=t.y&&_.push({node:i,offset:t.y}))});var E=[];w.length>0&&E.push({type:"alignment",axis:"x",offsets:w}),_.length>0&&E.push({type:"alignment",axis:"y",offsets:_}),g.constraints(E)}g.groups(o.stdFilter(function(e){return e.isParent()}).map(function(e,t){return e._private.scratch.cola={index:t,leaves:e.children().stdFilter(function(e){return!e.isParent()}).map(function(e){return e[0]._private.scratch.cola.index})},e}).map(function(e){return e._private.scratch.cola.groups=e.children().stdFilter(function(e){return e.isParent()}).map(function(e){return e._private.scratch.cola.index}),e._private.scratch.cola}));var S,k;null!=n.edgeLength?(S=n.edgeLength,k="linkDistance"):null!=n.edgeSymDiffLength?(S=n.edgeSymDiffLength,k="symmetricDiffLinkLengths"):null!=n.edgeJaccardLength?(S=n.edgeJaccardLength,k="jaccardLinkLengths"):(S=100,k="linkDistance");var P=function(e){return e.calcLength};if(g.links(s.stdFilter(function(e){return!e.source().isParent()&&!e.target().isParent()}).map(function(e){var t=e._private.scratch.cola={source:e.source()[0]._private.scratch.cola.index,target:e.target()[0]._private.scratch.cola.index};return null!=S&&(t.calcLength=c(S,e)),t})),g.size([l.w,l.h]),null!=S&&g[k](P),n.flow){var C,D="y",T=50;e.is.string(n.flow)?C={axis:n.flow,minSeparation:T}:e.is.number(n.flow)?C={axis:D,minSeparation:n.flow}:e.is.plainObject(n.flow)?(C=n.flow,C.axis=C.axis||D,C.minSeparation=null!=C.minSeparation?C.minSeparation:T):C={axis:D,minSeparation:T},g.flowLayout(C.axis,C.minSeparation)}g.avoidOverlaps(n.avoidOverlap).handleDisconnected(n.handleDisconnected).start(n.unconstrIter,n.userConstIter,n.allConstIter),t.trigger({type:"layoutstart",layout:t}),n.infinite||setTimeout(function(){g.stop()},n.maxSimulationTime)}),this},t.prototype.stop=function(){return this.adaptor&&(this.manuallyStopped=!0,this.adaptor.stop()),this},e("layout","cola",t)}(n),function(e){"use strict";function t(t){this.options=e.util.extend({},n,t)}var n={fit:!0,padding:30,startAngle:1.5*Math.PI,counterclockwise:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,height:void 0,width:void 0,concentric:function(){return this.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,ready:void 0,stop:void 0};t.prototype.run=function(){for(var t=this.options,n=t,r=t.cy,i=n.eles,a=i.nodes().not(":parent"),o=e.util.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},u=[],l=n.startAngle,c=0,d=0;d<a.length;d++){var p,h=a[d];p=n.concentric.call(h),u.push({value:p,node:h}),h._private.layoutData.concentric=p}a.updateStyle();for(var d=0;d<a.length;d++){var h=a[d];c=Math.max(c,h.outerWidth(),h.outerHeight())}u.sort(function(e,t){return t.value-e.value});for(var f=n.levelWidth(a),v=[[]],g=v[0],d=0;d<u.length;d++){var y=u[d];if(g.length>0){var m=Math.abs(g[0].value-y.value);m>=f&&(g=[],v.push(g))}g.push(y)}var b={},x=0,w=c+n.minNodeSpacing;if(!n.avoidOverlap){var _=v.length>0&&v[0].length>1,E=Math.min(o.w,o.h)/2-w,S=E/(v.length+_?1:0);w=Math.min(w,S)}for(var d=0;d<v.length;d++){var k=v[d],P=2*Math.PI/k.length;if(k.length>1&&n.avoidOverlap){var C=Math.cos(P)-Math.cos(0),D=Math.sin(P)-Math.sin(0),T=Math.sqrt(w*w/(C*C+D*D));x=Math.max(T,x)}for(var N=0;N<k.length;N++){var y=k[N],l=n.startAngle+(n.counterclockwise?1:-1)*P*N,M={x:s.x+x*Math.cos(l),y:s.y+x*Math.sin(l)};b[y.node.id()]=M}x+=w}return a.layoutPositions(this,n,function(){var e=this.id();return b[e]}),this},e("layout","concentric",t)}(n),function(e){"use strict";function t(t){this.options=e.util.extend({},r,t)}var n,r={ready:function(){},stop:function(){},animate:!0,refresh:4,fit:!0,padding:30,boundingBox:void 0,randomize:!0,debug:!1,nodeRepulsion:4e5,nodeOverlap:10,idealEdgeLength:10,edgeElasticity:100,nestingFactor:5,gravity:250,numIter:100,initialTemp:200,coolingFactor:.95,minTemp:1};t.prototype.run=function(){var t=this.options,r=t.cy,a=this;a.stopped=!1,a.trigger({type:"layoutstart",layout:a}),n=!0===t.debug?!0:!1;var o=new Date,d=i(r,a,t);n&&s(d),!0===t.randomize&&u(d,r),m(d,r,t);var p=function(e){return a.stopped?(w("Layout manually stopped. Stopping computation in step "+e),!1):(c(d,r,t,e),d.temperature=d.temperature*t.coolingFactor,w("New temperature: "+d.temperature),d.temperature<t.minTemp?(w("Temperature drop below minimum threshold. Stopping computation in step "+e),!1):!0)},h=function(){l(d,r,t),!0===t.fit&&r.fit(t.padding);var e=new Date;console.info("Layout took "+(e-o)+" ms"),a.one("layoutstop",t.stop),a.trigger({type:"layoutstop",layout:a})};if(t.animate){var f=0,v=function(){for(var n,i=0;i<t.refresh&&f<t.numIter;){var n=p(f);if(n===!1)break;i++,f++}l(d,r,t),t.fit&&r.fit(t.padding),n!==!1&&f+1<t.numIter?e.util.requestAnimationFrame(v):h()};e.util.requestAnimationFrame(v)}else{for(var f=0;f<t.numIter&&p(f)!==!1;f++);h()}return this},t.prototype.stop=function(){return this.stopped=!0,this};var i=function(t,n,r){for(var i=r.eles.edges(),o=r.eles.nodes(),s={layout:n,layoutNodes:[],idToIndex:{},nodeSize:o.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:i.size(),temperature:r.initialTemp,clientWidth:t.width(),clientHeight:t.width(),boundingBox:e.util.makeBoundingBox(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()})},u=0;u<s.nodeSize;u++){var l={};l.id=o[u].data("id"),l.parentId=o[u].data("parent"),l.children=[],l.positionX=o[u].position("x"),l.positionY=o[u].position("y"),l.offsetX=0,l.offsetY=0,l.height=o[u].height(),l.width=o[u].width(),l.maxX=l.positionX+l.width/2,l.minX=l.positionX-l.width/2,l.maxY=l.positionY+l.height/2,l.minY=l.positionY-l.height/2,l.padLeft=o[u]._private.style["padding-left"].pxValue,l.padRight=o[u]._private.style["padding-right"].pxValue,l.padTop=o[u]._private.style["padding-top"].pxValue,l.padBottom=o[u]._private.style["padding-bottom"].pxValue,s.layoutNodes.push(l),s.idToIndex[l.id]=u}for(var c=[],d=0,p=-1,h=[],u=0;u<s.nodeSize;u++){var f=s.layoutNodes[u],v=f.parentId;null!=v?s.layoutNodes[s.idToIndex[v]].children.push(f.id):(c[++p]=f.id,h.push(f.id))}for(s.graphSet.push(h);p>=d;){var g=c[d++],y=s.idToIndex[g],m=s.layoutNodes[y],b=m.children;if(b.length>0){s.graphSet.push(b);for(var u=0;u<b.length;u++)c[++p]=b[u]}}for(var u=0;u<s.graphSet.length;u++)for(var x=s.graphSet[u],_=0;_<x.length;_++){var E=s.idToIndex[x[_]];s.indexToGraph[E]=u}for(var u=0;u<s.edgeSize;u++){var S=i[u],k={};k.id=S.data("id"),k.sourceId=S.data("source"),k.targetId=S.data("target");var P=r.idealEdgeLength,C=s.idToIndex[k.sourceId],D=s.idToIndex[k.targetId],T=s.indexToGraph[C],N=s.indexToGraph[D];if(T!=N){for(var M=a(k.sourceId,k.targetId,s),B=s.graphSet[M],I=0,l=s.layoutNodes[C];-1===$.inArray(l.id,B);)l=s.layoutNodes[s.idToIndex[l.parentId]],I++;for(l=s.layoutNodes[D];-1===$.inArray(l.id,B);)l=s.layoutNodes[s.idToIndex[l.parentId]],I++;w("LCA of nodes "+k.sourceId+" and "+k.targetId+". Index: "+M+" Contents: "+B.toString()+". Depth: "+I),P*=I*r.nestingFactor}k.idealLength=P,s.layoutEdges.push(k)}return s},a=function(e,t,n){var r=o(e,t,0,n);return 2>r.count?0:r.graph},o=function(e,t,n,r){var i=r.graphSet[n];if(-1<$.inArray(e,i)&&-1<$.inArray(t,i))return{count:2,graph:n};for(var a=0,s=0;s<i.length;s++){var u=i[s],l=r.idToIndex[u],c=r.layoutNodes[l].children;if(0!==c.length){var d=r.indexToGraph[r.idToIndex[c[0]]],p=o(e,t,d,r);if(0!==p.count){if(1!==p.count)return p;if(a++,2===a)break}}}return{count:a,graph:n}},s=function(e){if(n){console.debug("layoutNodes:");for(var t=0;t<e.nodeSize;t++){var r=e.layoutNodes[t],i="\nindex: "+t+"\nId: "+r.id+"\nChildren: "+r.children.toString()+"\nparentId: "+r.parentId+"\npositionX: "+r.positionX+"\npositionY: "+r.positionY+"\nOffsetX: "+r.offsetX+"\nOffsetY: "+r.offsetY+"\npadLeft: "+r.padLeft+"\npadRight: "+r.padRight+"\npadTop: "+r.padTop+"\npadBottom: "+r.padBottom;console.debug(i)}console.debug("idToIndex");for(var t in e.idToIndex)console.debug("Id: "+t+"\nIndex: "+e.idToIndex[t]);console.debug("Graph Set");for(var a=e.graphSet,t=0;t<a.length;t++)console.debug("Set : "+t+": "+a[t].toString());for(var i="IndexToGraph",t=0;t<e.indexToGraph.length;t++)i+="\nIndex : "+t+" Graph: "+e.indexToGraph[t];console.debug(i),i="Layout Edges";for(var t=0;t<e.layoutEdges.length;t++){var o=e.layoutEdges[t];i+="\nEdge Index: "+t+" ID: "+o.id+" SouceID: "+o.sourceId+" TargetId: "+o.targetId+" Ideal Length: "+o.idealLength}console.debug(i),i="nodeSize: "+e.nodeSize,i+="\nedgeSize: "+e.edgeSize,i+="\ntemperature: "+e.temperature,console.debug(i)}},u=function(e){for(var t=e.clientWidth,n=e.clientHeight,r=0;r<e.nodeSize;r++){var i=e.layoutNodes[r];i.positionX=Math.random()*t,i.positionY=Math.random()*n}},l=function(e,t,n){var r="Refreshing positions";w(r);var i=e.layout,a=n.eles.nodes(),o=e.boundingBox,s={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};n.boundingBox&&(a.forEach(function(t){var n=e.layoutNodes[e.idToIndex[t.data("id")]];s.x1=Math.min(s.x1,n.positionX),s.x2=Math.max(s.x2,n.positionX),s.y1=Math.min(s.y1,n.positionY),s.y2=Math.max(s.y2,n.positionY)}),s.w=s.x2-s.x1,s.h=s.y2-s.y1),a.positions(function(t,i){var a=e.layoutNodes[e.idToIndex[i.data("id")]];if(r="Node: "+a.id+". Refreshed position: ("+a.positionX+", "+a.positionY+").",w(r),n.boundingBox){var u=(a.positionX-s.x1)/s.w,l=(a.positionY-s.y1)/s.h;return{x:o.x1+u*o.w,y:o.y1+l*o.h}}return{x:a.positionX,y:a.positionY}}),!0!==e.ready&&(r="Triggering layoutready",w(r),e.ready=!0,i.one("layoutready",n.ready),i.trigger({type:"layoutready",layout:this}))},c=function(e,t,n,r){var i="\n\n###############################";i+="\nSTEP: "+r,i+="\n###############################\n",w(i),d(e,t,n),v(e,t,n),g(e,t,n),y(e,t,n),m(e,t,n)},d=function(e,t,n){var r="calculateNodeForces";w(r);for(var i=0;i<e.graphSet.length;i++){var a=e.graphSet[i],o=a.length;r="Set: "+a.toString(),w(r);for(var s=0;o>s;s++)for(var u=e.layoutNodes[e.idToIndex[a[s]]],l=s+1;o>l;l++){var c=e.layoutNodes[e.idToIndex[a[l]]];p(u,c,e,t,n)}}},p=function(e,t,n,r,i){var a="Node repulsion. Node1: "+e.id+" Node2: "+t.id,o=t.positionX-e.positionX,s=t.positionY-e.positionY;if(a+="\ndirectionX: "+o+", directionY: "+s,0===o&&0===s)return void(a+="\nNodes have the same position.");var u=f(e,t,o,s);if(u>0){a+="\nNodes DO overlap.",a+="\nOverlap: "+u;var l=i.nodeOverlap*u,c=Math.sqrt(o*o+s*s);a+="\nDistance: "+c;var d=l*o/c,p=l*s/c}else{a+="\nNodes do NOT overlap.";var v=h(e,o,s),g=h(t,-1*o,-1*s),y=g.x-v.x,m=g.y-v.y,b=y*y+m*m,c=Math.sqrt(b);a+="\nDistance: "+c;var l=i.nodeRepulsion/b,d=l*y/c,p=l*m/c}e.offsetX-=d,e.offsetY-=p,t.offsetX+=d,t.offsetY+=p,a+="\nForceX: "+d+" ForceY: "+p,w(a)},h=function(e,t,n){var r=e.positionX,i=e.positionY,a=e.height,o=e.width,s=n/t,u=a/o,l="Computing clipping point of node "+e.id+" . Height:  "+a+", Width: "+o+"\nDirection "+t+", "+n,c={};do{if(0===t&&n>0){c.x=r,l+="\nUp direction",c.y=i+a/2;break}if(0===t&&0>n){c.x=r,c.y=i+a/2,l+="\nDown direction";break}if(t>0&&s>=-1*u&&u>=s){c.x=r+o/2,c.y=i+o*n/2/t,l+="\nRightborder";break}if(0>t&&s>=-1*u&&u>=s){c.x=r-o/2,c.y=i-o*n/2/t,l+="\nLeftborder";break}if(n>0&&(-1*u>=s||s>=u)){c.x=r+a*t/2/n,c.y=i+a/2,l+="\nTop border";break}if(0>n&&(-1*u>=s||s>=u)){c.x=r-a*t/2/n,c.y=i-a/2,l+="\nBottom border";break}}while(!1);return l+="\nClipping point found at "+c.x+", "+c.y,w(l),c},f=function(e,t,n,r){if(n>0)var i=e.maxX-t.minX;else var i=t.maxX-e.minX;if(r>0)var a=e.maxY-t.minY;else var a=t.maxY-e.minY;return i>=0&&a>=0?Math.sqrt(i*i+a*a):0},v=function(e,t,n){for(var r=0;r<e.edgeSize;r++){var i=e.layoutEdges[r],a=e.idToIndex[i.sourceId],o=e.layoutNodes[a],s=e.idToIndex[i.targetId],u=e.layoutNodes[s],l=u.positionX-o.positionX,c=u.positionY-o.positionY;if(0===l&&0===c)return;var d=h(o,l,c),p=h(u,-1*l,-1*c),f=p.x-d.x,v=p.y-d.y,g=Math.sqrt(f*f+v*v),y=Math.pow(i.idealLength-g,2)/n.edgeElasticity;if(0!==g)var m=y*f/g,b=y*v/g;else var m=0,b=0;o.offsetX+=m,o.offsetY+=b,u.offsetX-=m,u.offsetY-=b;var x="Edge force between nodes "+o.id+" and "+u.id;x+="\nDistance: "+g+" Force: ("+m+", "+b+")",w(x)}},g=function(e,t,n){var r="calculateGravityForces";w(r);for(var i=0;i<e.graphSet.length;i++){var a=e.graphSet[i],o=a.length;if(r="Set: "+a.toString(),w(r),0===i)var s=e.clientHeight/2,u=e.clientWidth/2;else var l=e.layoutNodes[e.idToIndex[a[0]]],c=e.layoutNodes[e.idToIndex[l.parentId]],s=c.positionX,u=c.positionY;r="Center found at: "+s+", "+u,w(r);for(var d=0;o>d;d++){var p=e.layoutNodes[e.idToIndex[a[d]]];r="Node: "+p.id;var h=s-p.positionX,f=u-p.positionY,v=Math.sqrt(h*h+f*f);if(v>1){var g=n.gravity*h/v,y=n.gravity*f/v;p.offsetX+=g,p.offsetY+=y,r+=": Applied force: "+g+", "+y}else r+=": skypped since it's too close to center";w(r)}}},y=function(e){var t=[],n=0,r=-1;for(w("propagateForces"),t.push.apply(t,e.graphSet[0]),r+=e.graphSet[0].length;r>=n;){var i=t[n++],a=e.idToIndex[i],o=e.layoutNodes[a],s=o.children;if(0<s.length){var u=o.offsetX,l=o.offsetY,c="Propagating offset from parent node : "+o.id+". OffsetX: "+u+". OffsetY: "+l;c+="\n Children: "+s.toString(),w(c);for(var d=0;d<s.length;d++){var p=e.layoutNodes[e.idToIndex[s[d]]];p.offsetX+=u,p.offsetY+=l,t[++r]=s[d]}o.offsetX=0,o.offsetY=0}}},m=function(e){var t="Updating positions";w(t);for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];0<r.children.length&&(w("Resetting boundaries of compound node: "+r.id),r.maxX=void 0,r.minX=void 0,r.maxY=void 0,r.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];if(0<r.children.length)w("Skipping position update of node: "+r.id);else{t="Node: "+r.id+" Previous position: ("+r.positionX+", "+r.positionY+").";var i=b(r.offsetX,r.offsetY,e.temperature);r.positionX+=i.x,r.positionY+=i.y,r.offsetX=0,r.offsetY=0,r.minX=r.positionX-r.width,r.maxX=r.positionX+r.width,r.minY=r.positionY-r.height,r.maxY=r.positionY+r.height,t+=" New Position: ("+r.positionX+", "+r.positionY+").",w(t),x(r,e)}}for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];0<r.children.length&&(r.positionX=(r.maxX+r.minX)/2,r.positionY=(r.maxY+r.minY)/2,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,t="Updating position, size of compound node "+r.id,t+="\nPositionX: "+r.positionX+", PositionY: "+r.positionY,t+="\nWidth: "+r.width+", Height: "+r.height,w(t))}},b=function(e,t,n){var r="Limiting force: ("+e+", "+t+"). Max: "+n,i=Math.sqrt(e*e+t*t);if(i>n)var a={x:n*e/i,y:n*t/i};else var a={x:e,y:t};return r+=".\nResult: ("+a.x+", "+a.y+")",w(r),a},x=function(e,t){var n="Propagating new position/size of node "+e.id,r=e.parentId;if(null==r)return n+=". No parent node.",void w(n);var i=t.layoutNodes[t.idToIndex[r]],a=!1;return(null==i.maxX||e.maxX+i.padRight>i.maxX)&&(i.maxX=e.maxX+i.padRight,a=!0,n+="\nNew maxX for parent node "+i.id+": "+i.maxX),(null==i.minX||e.minX-i.padLeft<i.minX)&&(i.minX=e.minX-i.padLeft,a=!0,n+="\nNew minX for parent node "+i.id+": "+i.minX),(null==i.maxY||e.maxY+i.padBottom>i.maxY)&&(i.maxY=e.maxY+i.padBottom,a=!0,n+="\nNew maxY for parent node "+i.id+": "+i.maxY),(null==i.minY||e.minY-i.padTop<i.minY)&&(i.minY=e.minY-i.padTop,a=!0,n+="\nNew minY for parent node "+i.id+": "+i.minY),a?(w(n),x(i,t)):(n+=". No changes in boundaries/position of parent node "+i.id,void w(n))},w=function(e){n&&console.debug(e)};e("layout","cose",t)}(n),function(e){"use strict";function t(t){this.options=e.util.extend(!0,{},n,t)}var n={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,minLen:function(){return 1},fit:!0,padding:30,animate:!1,animationDuration:500,boundingBox:void 0,ready:function(){},stop:function(){}};t.prototype.run=function(){var t=this.options,n=this;return e.util.require("dagre",function(r){for(var i=t.cy,a=t.eles,o=e.util.makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:i.width(),h:i.height()}),s=new r.Digraph,u=a.nodes().not(":parent"),l=0;l<u.length;l++){var c=u[l];s.addNode(c.id(),{width:c.width(),height:c.height()})}for(var d=a.edges(),l=0;l<d.length;l++){var p=d[l];s.addEdge(p.id(),p.source().id(),p.target().id(),{minLen:e.is.fn(t.minLen)?t.minLen.apply(p,[p]):t.minLen})}var h=r.layout();t.nodeSep&&h.nodeSep(t.nodeSep),t.edgeSep&&h.edgeSep(t.edgeSep),t.rankSep&&h.rankSep(t.rankSep),t.rankDir&&h.rankDir(t.rankDir),h=h.run(s),h.eachNode(function(e,t){i.getElementById(e).scratch().dagre=t});var f;t.boundingBox?(f={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0},u.forEach(function(e){var t=e.scratch().dagre;f.x1=Math.min(f.x1,t.x),f.x2=Math.max(f.x2,t.x),f.y1=Math.min(f.y1,t.y),f.y2=Math.max(f.y2,t.y)}),f.w=f.x2-f.x1,f.h=f.y2-f.y1):f=o;var v=function(e){if(t.boundingBox){var n=(e.x-f.x1)/f.w,r=(e.y-f.y1)/f.h;return{x:o.x1+n*o.w,y:o.y1+r*o.h}}return e};u.layoutPositions(n,t,function(){var e=this.scratch().dagre;return v({x:e.x,y:e.y})})}),this},e("layout","dagre",t)}(n),function(e){"use strict";function t(t){this.options=e.util.extend({},n,t)}var n={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,rows:void 0,columns:void 0,position:function(){},animate:!1,animationDuration:500,ready:void 0,stop:void 0};t.prototype.run=function(){var t=this.options,n=t,r=t.cy,i=n.eles,a=i.nodes().not(":parent"),o=e.util.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(0===o.h||0===o.w)a.layoutPositions(this,n,function(){return{x:o.x1,y:o.y1}});else{var s=a.size(),u=Math.sqrt(s*o.h/o.w),l=Math.round(u),c=Math.round(o.w/o.h*u),d=function(e){if(null==e)return Math.min(l,c);var t=Math.min(l,c);t==l?l=e:c=e},p=function(e){if(null==e)return Math.max(l,c);var t=Math.max(l,c);t==l?l=e:c=e};if(null!=n.rows&&null!=n.columns)l=n.rows,c=n.columns;else if(null!=n.rows&&null==n.columns)l=n.rows,c=Math.ceil(s/l);else if(null==n.rows&&null!=n.columns)c=n.columns,l=Math.ceil(s/c);else if(c*l>s){var h=d(),f=p();(h-1)*f>=s?d(h-1):(f-1)*h>=s&&p(f-1)}else for(;s>c*l;){var h=d(),f=p();(f+1)*h>=s?p(f+1):d(h+1)}var v=o.w/c,g=o.h/l;if(n.avoidOverlap)for(var y=0;y<a.length;y++){var m=a[y],b=m.outerWidth(),x=m.outerHeight();v=Math.max(v,b),g=Math.max(g,x)}for(var w={},_=function(e,t){return w["c-"+e+"-"+t]?!0:!1},E=function(e,t){w["c-"+e+"-"+t]=!0},S=0,k=0,P=function(){k++,k>=c&&(k=0,S++)},C={},y=0;y<a.length;y++){var m=a[y],D=n.position(m);if(D&&(void 0!==D.row||void 0!==D.col)){var T={row:D.row,col:D.col};if(void 0===T.col)for(T.col=0;_(T.row,T.col);)T.col++;else if(void 0===T.row)for(T.row=0;_(T.row,T.col);)T.row++;C[m.id()]=T,E(T.row,T.col)}}var N=function(e,t){var n,r;if(t.locked()||t.isFullAutoParent())return!1;var i=C[t.id()];if(i)n=i.col*v+v/2+o.x1,r=i.row*g+g/2+o.y1;else{for(;_(S,k);)P();n=k*v+v/2+o.x1,r=S*g+g/2+o.y1,E(S,k),P()}return{x:n,y:r}};a.layoutPositions(this,n,N)}return this},e("layout","grid",t)}(n),function(e){"use strict";function t(t){this.options=e.util.extend(!0,{},n,t)}var n={ready:function(){},stop:function(){}};t.prototype.run=function(){{var e=this.options,t=e.eles,n=this;e.cy}return n.trigger("layoutstart"),t.nodes().positions(function(){return{x:0,y:0}}),n.one("layoutready",e.ready),n.trigger("layoutready"),n.one("layoutstop",e.stop),n.trigger("layoutstop"),this},t.prototype.stop=function(){return this},e("layout","null",t)}(n),function(e){"use strict";function t(t){this.options=e.util.extend(!0,{},n,t)}var n={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,ready:void 0,stop:void 0};t.prototype.run=function(){function t(e){if(null==n.positions)return null;if(a)return n.positions.apply(e,[e]);var t=n.positions[e._private.data.id];return null==t?null:t}var n=this.options,r=n.eles,i=r.nodes(),a=e.is.fn(n.positions);return i.layoutPositions(this,n,function(e,n){var r=t(n);return n.locked()||null==r?!1:r}),this},e("layout","preset",t)}(n),function(e){"use strict";function t(t){this.options=e.util.extend(!0,{},n,t)}var n={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,ready:void 0,stop:void 0};t.prototype.run=function(){var t=this.options,n=t.cy,r=t.eles,i=r.nodes().not(":parent"),a=e.util.makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),o=function(){return{x:a.x1+Math.round(Math.random()*a.w),y:a.y1+Math.round(Math.random()*a.h)}};return i.layoutPositions(this,t,o),this},e("layout","random",t)}(n),function(e){"use strict";function t(t){this.options=e.util.extend(!0,{},n,t)}var n={animate:!0,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,random:!1,infinite:!1,ready:void 0,stop:void 0,stiffness:400,repulsion:400,damping:.5};t.prototype.run=function(){var t=this,n=this,r=this.options;return e.util.require("Springy",function(i){function a(e){var t=e.scratch("springy").model.id,n=w.layout.nodePoints[t].p,r=e.position(),i=null!=r.x&&null!=r.y?y(e.position()):{x:4*Math.random()-2,y:4*Math.random()-2};n.x=i.x,n.y=i.y}function o(){r.ungrabifyWhileSimulating&&E.ungrabify(),w.start()}var s=!1,u=r.cy;t.trigger({type:"layoutstart",layout:t});var l=r.eles,c=l.nodes().not(":parent"),d=l.edges(),p=e.util.makeBoundingBox(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:u.width(),h:u.height()}),h=new i.Graph;c.each(function(e,t){t.scratch("springy",{model:h.newNode({element:t})})}),d.each(function(e,t){var n=t.source().scratch("springy").model,r=t.target().scratch("springy").model;t.scratch("springy",{model:h.newEdge(n,r,{element:t})})});var f=window.sim=new i.Layout.ForceDirected(h,r.stiffness,r.repulsion,r.damping);r.infinite&&(f.minEnergyThreshold=-1/0);var v=f.getBoundingBox(),g=function(e){v=f.getBoundingBox();var t=v.topright.subtract(v.bottomleft),n=e.subtract(v.bottomleft).divide(t.x).x*p.w+p.x1,r=e.subtract(v.bottomleft).divide(t.y).y*p.h+p.x1;return new i.Vector(n,r)},y=function(e){v=f.getBoundingBox();var t=v.topright.subtract(v.bottomleft),n=(e.x-p.x1)/p.w*t.x+v.bottomleft.x,r=(e.y-p.y1)/p.h*t.y+v.bottomleft.y;return new i.Vector(n,r)},m=u.collection(),b=u.nodes().size(),x=1,w=new i.Renderer(f,function(){m.length>0&&r.animate&&(s=!0,m.rtrigger("position"),r.fit&&u.fit(r.padding),m=u.collection(),s=!1)},function(){},function(e,n){var i=g(n),a=e.data.element;a.locked()||a.grabbed()||(a._private.position={x:i.x,y:i.y},m.merge(a)),x==b&&(t.one("layoutready",r.ready),t.trigger({type:"layoutready",layout:t})),x++});c.each(function(e,t){r.random||a(t)});var _;c.on("position",_=function(){s||a(this)});var E=c.filter(":grabbable");n.stopSystem=function(){h.filterNodes(function(){return!1}),r.ungrabifyWhileSimulating&&E.grabify(),r.fit&&u.fit(r.padding),c.off("drag position",_),t.one("layoutstop",r.stop),t.trigger({type:"layoutstop",layout:t}),n.stopSystem=null},o(),r.infinite||setTimeout(function(){n.stop()},r.maxSimulationTime)}),this},t.prototype.stop=function(){return null!=this.stopSystem&&this.stopSystem(),this},e("layout","springy",t)}(n),function(e){"use strict";function t(e){this.options=e}t.prototype.recalculateRenderedStyle=function(){},t.prototype.notify=function(){},e("renderer","null",t)}(n)}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/cytoscape/dist/cytoscape.js","/../node_modules/cytoscape/dist")},{"1YiZ5S":18,buffer:15}],15:[function(e,t,n){(function(t,r,i){function i(e,t,n){if(!(this instanceof i))return new i(e,t,n);var r=typeof e;if("base64"===t&&"string"===r)for(e=T(e);e.length%4!==0;)e+="=";var a;if("number"===r)a=M(e);else if("string"===r)a=i.byteLength(e,t);else{if("object"!==r)throw new Error("First argument needs to be a number, array or string.");a=M(e.length)}var o;i._useTypedArrays?o=i._augment(new Uint8Array(a)):(o=this,o.length=a,o._isBuffer=!0);var s;if(i._useTypedArrays&&"number"==typeof e.byteLength)o._set(e);else if(I(e))for(s=0;a>s;s++)o[s]=i.isBuffer(e)?e.readUInt8(s):e[s];else if("string"===r)o.write(e,0,t);else if("number"===r&&!i._useTypedArrays&&!n)for(s=0;a>s;s++)o[s]=0;return o}function a(e,t,n,r){n=Number(n)||0;var a=e.length-n;r?(r=Number(r),r>a&&(r=a)):r=a;var o=t.length;F(o%2===0,"Invalid hex string"),r>o/2&&(r=o/2);for(var s=0;r>s;s++){var u=parseInt(t.substr(2*s,2),16);F(!isNaN(u),"Invalid hex string"),e[n+s]=u}return i._charsWritten=2*s,s}function o(e,t,n,r){var a=i._charsWritten=R(L(t),e,n,r);return a}function s(e,t,n,r){var a=i._charsWritten=R(O(t),e,n,r);return a}function u(e,t,n,r){return s(e,t,n,r)}function l(e,t,n,r){var a=i._charsWritten=R(j(t),e,n,r);return a}function c(e,t,n,r){var a=i._charsWritten=R(z(t),e,n,r);return a}function d(e,t,n){return Z.fromByteArray(0===t&&n===e.length?e:e.slice(t,n))}function p(e,t,n){var r="",i="";n=Math.min(e.length,n);for(var a=t;n>a;a++)e[a]<=127?(r+=Y(i)+String.fromCharCode(e[a]),i=""):i+="%"+e[a].toString(16);return r+Y(i)}function h(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(e[i]);return r}function f(e,t,n){return h(e,t,n)}function v(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var i="",a=t;n>a;a++)i+=A(e[a]);return i}function g(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function y(e,t,n,r){r||(F("boolean"==typeof n,"missing or invalid endian"),F(void 0!==t&&null!==t,"missing offset"),F(t+1<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var a;return n?(a=e[t],i>t+1&&(a|=e[t+1]<<8)):(a=e[t]<<8,i>t+1&&(a|=e[t+1])),a}}function m(e,t,n,r){r||(F("boolean"==typeof n,"missing or invalid endian"),F(void 0!==t&&null!==t,"missing offset"),F(t+3<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var a;return n?(i>t+2&&(a=e[t+2]<<16),i>t+1&&(a|=e[t+1]<<8),a|=e[t],i>t+3&&(a+=e[t+3]<<24>>>0)):(i>t+1&&(a=e[t+1]<<16),i>t+2&&(a|=e[t+2]<<8),i>t+3&&(a|=e[t+3]),a+=e[t]<<24>>>0),a}}function b(e,t,n,r){r||(F("boolean"==typeof n,"missing or invalid endian"),F(void 0!==t&&null!==t,"missing offset"),F(t+1<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var a=y(e,t,n,!0),o=32768&a;return o?-1*(65535-a+1):a}}function x(e,t,n,r){r||(F("boolean"==typeof n,"missing or invalid endian"),F(void 0!==t&&null!==t,"missing offset"),F(t+3<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var a=m(e,t,n,!0),o=2147483648&a;return o?-1*(4294967295-a+1):a}}function w(e,t,n,r){return r||(F("boolean"==typeof n,"missing or invalid endian"),F(t+3<e.length,"Trying to read beyond buffer length")),W.read(e,t,n,23,4)
}function _(e,t,n,r){return r||(F("boolean"==typeof n,"missing or invalid endian"),F(t+7<e.length,"Trying to read beyond buffer length")),W.read(e,t,n,52,8)}function E(e,t,n,r,i){i||(F(void 0!==t&&null!==t,"missing value"),F("boolean"==typeof r,"missing or invalid endian"),F(void 0!==n&&null!==n,"missing offset"),F(n+1<e.length,"trying to write beyond buffer length"),X(t,65535));var a=e.length;if(!(n>=a))for(var o=0,s=Math.min(a-n,2);s>o;o++)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function S(e,t,n,r,i){i||(F(void 0!==t&&null!==t,"missing value"),F("boolean"==typeof r,"missing or invalid endian"),F(void 0!==n&&null!==n,"missing offset"),F(n+3<e.length,"trying to write beyond buffer length"),X(t,4294967295));var a=e.length;if(!(n>=a))for(var o=0,s=Math.min(a-n,4);s>o;o++)e[n+o]=t>>>8*(r?o:3-o)&255}function k(e,t,n,r,i){i||(F(void 0!==t&&null!==t,"missing value"),F("boolean"==typeof r,"missing or invalid endian"),F(void 0!==n&&null!==n,"missing offset"),F(n+1<e.length,"Trying to write beyond buffer length"),V(t,32767,-32768));var a=e.length;n>=a||(t>=0?E(e,t,n,r,i):E(e,65535+t+1,n,r,i))}function P(e,t,n,r,i){i||(F(void 0!==t&&null!==t,"missing value"),F("boolean"==typeof r,"missing or invalid endian"),F(void 0!==n&&null!==n,"missing offset"),F(n+3<e.length,"Trying to write beyond buffer length"),V(t,2147483647,-2147483648));var a=e.length;n>=a||(t>=0?S(e,t,n,r,i):S(e,4294967295+t+1,n,r,i))}function C(e,t,n,r,i){i||(F(void 0!==t&&null!==t,"missing value"),F("boolean"==typeof r,"missing or invalid endian"),F(void 0!==n&&null!==n,"missing offset"),F(n+3<e.length,"Trying to write beyond buffer length"),q(t,3.4028234663852886e38,-3.4028234663852886e38));var a=e.length;n>=a||W.write(e,t,n,r,23,4)}function D(e,t,n,r,i){i||(F(void 0!==t&&null!==t,"missing value"),F("boolean"==typeof r,"missing or invalid endian"),F(void 0!==n&&null!==n,"missing offset"),F(n+7<e.length,"Trying to write beyond buffer length"),q(t,1.7976931348623157e308,-1.7976931348623157e308));var a=e.length;n>=a||W.write(e,t,n,r,52,8)}function T(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function N(e,t,n){return"number"!=typeof e?n:(e=~~e,e>=t?t:e>=0?e:(e+=t,e>=0?e:0))}function M(e){return e=~~Math.ceil(+e),0>e?0:e}function B(e){return(Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)})(e)}function I(e){return B(e)||i.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function A(e){return 16>e?"0"+e.toString(16):e.toString(16)}function L(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(127>=r)t.push(e.charCodeAt(n));else{var i=n;r>=55296&&57343>=r&&n++;for(var a=encodeURIComponent(e.slice(i,n+1)).substr(1).split("%"),o=0;o<a.length;o++)t.push(parseInt(a[o],16))}}return t}function O(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}function z(e){for(var t,n,r,i=[],a=0;a<e.length;a++)t=e.charCodeAt(a),n=t>>8,r=t%256,i.push(r),i.push(n);return i}function j(e){return Z.toByteArray(e)}function R(e,t,n,r){for(var i=0;r>i&&!(i+n>=t.length||i>=e.length);i++)t[i+n]=e[i];return i}function Y(e){try{return decodeURIComponent(e)}catch(t){return String.fromCharCode(65533)}}function X(e,t){F("number"==typeof e,"cannot write a non-number as a number"),F(e>=0,"specified a negative value for writing an unsigned value"),F(t>=e,"value is larger than maximum value for type"),F(Math.floor(e)===e,"value has a fractional component")}function V(e,t,n){F("number"==typeof e,"cannot write a non-number as a number"),F(t>=e,"value larger than maximum allowed value"),F(e>=n,"value smaller than minimum allowed value"),F(Math.floor(e)===e,"value has a fractional component")}function q(e,t,n){F("number"==typeof e,"cannot write a non-number as a number"),F(t>=e,"value larger than maximum allowed value"),F(e>=n,"value smaller than minimum allowed value")}function F(e,t){if(!e)throw new Error(t||"Failed assertion")}var Z=e("base64-js"),W=e("ieee754");n.Buffer=i,n.SlowBuffer=i,n.INSPECT_MAX_BYTES=50,i.poolSize=8192,i._useTypedArrays=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray}catch(n){return!1}}(),i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.isBuffer=function(e){return!(null===e||void 0===e||!e._isBuffer)},i.byteLength=function(e,t){var n;switch(e+="",t||"utf8"){case"hex":n=e.length/2;break;case"utf8":case"utf-8":n=L(e).length;break;case"ascii":case"binary":case"raw":n=e.length;break;case"base64":n=j(e).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*e.length;break;default:throw new Error("Unknown encoding")}return n},i.concat=function(e,t){if(F(B(e),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===e.length)return new i(0);if(1===e.length)return e[0];var n;if("number"!=typeof t)for(t=0,n=0;n<e.length;n++)t+=e[n].length;var r=new i(t),a=0;for(n=0;n<e.length;n++){var o=e[n];o.copy(r,a),a+=o.length}return r},i.prototype.write=function(e,t,n,r){if(isFinite(t))isFinite(n)||(r=n,n=void 0);else{var i=r;r=t,t=n,n=i}t=Number(t)||0;var d=this.length-t;n?(n=Number(n),n>d&&(n=d)):n=d,r=String(r||"utf8").toLowerCase();var p;switch(r){case"hex":p=a(this,e,t,n);break;case"utf8":case"utf-8":p=o(this,e,t,n);break;case"ascii":p=s(this,e,t,n);break;case"binary":p=u(this,e,t,n);break;case"base64":p=l(this,e,t,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":p=c(this,e,t,n);break;default:throw new Error("Unknown encoding")}return p},i.prototype.toString=function(e,t,n){var r=this;if(e=String(e||"utf8").toLowerCase(),t=Number(t)||0,n=void 0!==n?Number(n):n=r.length,n===t)return"";var i;switch(e){case"hex":i=v(r,t,n);break;case"utf8":case"utf-8":i=p(r,t,n);break;case"ascii":i=h(r,t,n);break;case"binary":i=f(r,t,n);break;case"base64":i=d(r,t,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":i=g(r,t,n);break;default:throw new Error("Unknown encoding")}return i},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},i.prototype.copy=function(e,t,n,r){var a=this;if(n||(n=0),r||0===r||(r=this.length),t||(t=0),r!==n&&0!==e.length&&0!==a.length){F(r>=n,"sourceEnd < sourceStart"),F(t>=0&&t<e.length,"targetStart out of bounds"),F(n>=0&&n<a.length,"sourceStart out of bounds"),F(r>=0&&r<=a.length,"sourceEnd out of bounds"),r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o=r-n;if(100>o||!i._useTypedArrays)for(var s=0;o>s;s++)e[s+t]=this[s+n];else e._set(this.subarray(n,n+o),t)}},i.prototype.slice=function(e,t){var n=this.length;if(e=N(e,n,0),t=N(t,n,n),i._useTypedArrays)return i._augment(this.subarray(e,t));for(var r=t-e,a=new i(r,void 0,!0),o=0;r>o;o++)a[o]=this[o+e];return a},i.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},i.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},i.prototype.readUInt8=function(e,t){return t||(F(void 0!==e&&null!==e,"missing offset"),F(e<this.length,"Trying to read beyond buffer length")),e>=this.length?void 0:this[e]},i.prototype.readUInt16LE=function(e,t){return y(this,e,!0,t)},i.prototype.readUInt16BE=function(e,t){return y(this,e,!1,t)},i.prototype.readUInt32LE=function(e,t){return m(this,e,!0,t)},i.prototype.readUInt32BE=function(e,t){return m(this,e,!1,t)},i.prototype.readInt8=function(e,t){if(t||(F(void 0!==e&&null!==e,"missing offset"),F(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length)){var n=128&this[e];return n?-1*(255-this[e]+1):this[e]}},i.prototype.readInt16LE=function(e,t){return b(this,e,!0,t)},i.prototype.readInt16BE=function(e,t){return b(this,e,!1,t)},i.prototype.readInt32LE=function(e,t){return x(this,e,!0,t)},i.prototype.readInt32BE=function(e,t){return x(this,e,!1,t)},i.prototype.readFloatLE=function(e,t){return w(this,e,!0,t)},i.prototype.readFloatBE=function(e,t){return w(this,e,!1,t)},i.prototype.readDoubleLE=function(e,t){return _(this,e,!0,t)},i.prototype.readDoubleBE=function(e,t){return _(this,e,!1,t)},i.prototype.writeUInt8=function(e,t,n){n||(F(void 0!==e&&null!==e,"missing value"),F(void 0!==t&&null!==t,"missing offset"),F(t<this.length,"trying to write beyond buffer length"),X(e,255)),t>=this.length||(this[t]=e)},i.prototype.writeUInt16LE=function(e,t,n){E(this,e,t,!0,n)},i.prototype.writeUInt16BE=function(e,t,n){E(this,e,t,!1,n)},i.prototype.writeUInt32LE=function(e,t,n){S(this,e,t,!0,n)},i.prototype.writeUInt32BE=function(e,t,n){S(this,e,t,!1,n)},i.prototype.writeInt8=function(e,t,n){n||(F(void 0!==e&&null!==e,"missing value"),F(void 0!==t&&null!==t,"missing offset"),F(t<this.length,"Trying to write beyond buffer length"),V(e,127,-128)),t>=this.length||(e>=0?this.writeUInt8(e,t,n):this.writeUInt8(255+e+1,t,n))},i.prototype.writeInt16LE=function(e,t,n){k(this,e,t,!0,n)},i.prototype.writeInt16BE=function(e,t,n){k(this,e,t,!1,n)},i.prototype.writeInt32LE=function(e,t,n){P(this,e,t,!0,n)},i.prototype.writeInt32BE=function(e,t,n){P(this,e,t,!1,n)},i.prototype.writeFloatLE=function(e,t,n){C(this,e,t,!0,n)},i.prototype.writeFloatBE=function(e,t,n){C(this,e,t,!1,n)},i.prototype.writeDoubleLE=function(e,t,n){D(this,e,t,!0,n)},i.prototype.writeDoubleBE=function(e,t,n){D(this,e,t,!1,n)},i.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),"string"==typeof e&&(e=e.charCodeAt(0)),F("number"==typeof e&&!isNaN(e),"value is not a number"),F(n>=t,"end < start"),n!==t&&0!==this.length){F(t>=0&&t<this.length,"start out of bounds"),F(n>=0&&n<=this.length,"end out of bounds");for(var r=t;n>r;r++)this[r]=e}},i.prototype.inspect=function(){for(var e=[],t=this.length,r=0;t>r;r++)if(e[r]=A(this[r]),r===n.INSPECT_MAX_BYTES){e[r+1]="...";break}return"<Buffer "+e.join(" ")+">"},i.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(i._useTypedArrays)return new i(this).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;n>t;t+=1)e[t]=this[t];return e.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var H=i.prototype;i._augment=function(e){return e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=H.get,e.set=H.set,e.write=H.write,e.toString=H.toString,e.toLocaleString=H.toString,e.toJSON=H.toJSON,e.copy=H.copy,e.slice=H.slice,e.readUInt8=H.readUInt8,e.readUInt16LE=H.readUInt16LE,e.readUInt16BE=H.readUInt16BE,e.readUInt32LE=H.readUInt32LE,e.readUInt32BE=H.readUInt32BE,e.readInt8=H.readInt8,e.readInt16LE=H.readInt16LE,e.readInt16BE=H.readInt16BE,e.readInt32LE=H.readInt32LE,e.readInt32BE=H.readInt32BE,e.readFloatLE=H.readFloatLE,e.readFloatBE=H.readFloatBE,e.readDoubleLE=H.readDoubleLE,e.readDoubleBE=H.readDoubleBE,e.writeUInt8=H.writeUInt8,e.writeUInt16LE=H.writeUInt16LE,e.writeUInt16BE=H.writeUInt16BE,e.writeUInt32LE=H.writeUInt32LE,e.writeUInt32BE=H.writeUInt32BE,e.writeInt8=H.writeInt8,e.writeInt16LE=H.writeInt16LE,e.writeInt16BE=H.writeInt16BE,e.writeInt32LE=H.writeInt32LE,e.writeInt32BE=H.writeInt32BE,e.writeFloatLE=H.writeFloatLE,e.writeFloatBE=H.writeFloatBE,e.writeDoubleLE=H.writeDoubleLE,e.writeDoubleBE=H.writeDoubleBE,e.fill=H.fill,e.inspect=H.inspect,e.toArrayBuffer=H.toArrayBuffer,e}}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/gulp-browserify/node_modules/browserify/node_modules/buffer/index.js","/../node_modules/gulp-browserify/node_modules/browserify/node_modules/buffer")},{"1YiZ5S":18,"base64-js":16,buffer:15,ieee754:17}],16:[function(e,t,n){(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function n(e){var t=e.charCodeAt(0);return t===o||t===d?62:t===s||t===p?63:u>t?-1:u+10>t?t-u+26+26:c+26>t?t-c:l+26>t?t-l+26:void 0}function r(e){function t(e){l[d++]=e}var r,i,o,s,u,l;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=e.length;u="="===e.charAt(c-2)?2:"="===e.charAt(c-1)?1:0,l=new a(3*e.length/4-u),o=u>0?e.length-4:e.length;var d=0;for(r=0,i=0;o>r;r+=4,i+=3)s=n(e.charAt(r))<<18|n(e.charAt(r+1))<<12|n(e.charAt(r+2))<<6|n(e.charAt(r+3)),t((16711680&s)>>16),t((65280&s)>>8),t(255&s);return 2===u?(s=n(e.charAt(r))<<2|n(e.charAt(r+1))>>4,t(255&s)):1===u&&(s=n(e.charAt(r))<<10|n(e.charAt(r+1))<<4|n(e.charAt(r+2))>>2,t(s>>8&255),t(255&s)),l}function i(t){function n(t){return e.charAt(t)}function r(e){return n(e>>18&63)+n(e>>12&63)+n(e>>6&63)+n(63&e)}var i,a,o,s=t.length%3,u="";for(i=0,o=t.length-s;o>i;i+=3)a=(t[i]<<16)+(t[i+1]<<8)+t[i+2],u+=r(a);switch(s){case 1:a=t[t.length-1],u+=n(a>>2),u+=n(a<<4&63),u+="==";break;case 2:a=(t[t.length-2]<<8)+t[t.length-1],u+=n(a>>10),u+=n(a>>4&63),u+=n(a<<2&63),u+="="}return u}var a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="+".charCodeAt(0),s="/".charCodeAt(0),u="0".charCodeAt(0),l="a".charCodeAt(0),c="A".charCodeAt(0),d="-".charCodeAt(0),p="_".charCodeAt(0);t.toByteArray=r,t.fromByteArray=i}("undefined"==typeof n?this.base64js={}:n)}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/gulp-browserify/node_modules/browserify/node_modules/buffer/node_modules/base64-js/lib/b64.js","/../node_modules/gulp-browserify/node_modules/browserify/node_modules/buffer/node_modules/base64-js/lib")},{"1YiZ5S":18,buffer:15}],17:[function(e,t,n){(function(){n.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,d=n?i-1:0,p=n?-1:1,h=e[t+d];for(d+=p,a=h&(1<<-c)-1,h>>=-c,c+=s;c>0;a=256*a+e[t+d],d+=p,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+e[t+d],d+=p,c-=8);if(0===a)a=1-l;else{if(a===u)return o?0/0:1/0*(h?-1:1);o+=Math.pow(2,r),a-=l}return(h?-1:1)*o*Math.pow(2,a-r)},n.write=function(e,t,n,r,i,a){var o,s,u,l=8*a-i-1,c=(1<<l)-1,d=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,f=r?1:-1,v=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||1/0===t?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),t+=o+d>=1?p/u:p*Math.pow(2,1-d),t*u>=2&&(o++,u/=2),o+d>=c?(s=0,o=c):o+d>=1?(s=(t*u-1)*Math.pow(2,i),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;e[n+h]=255&s,h+=f,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;e[n+h]=255&o,h+=f,o/=256,l-=8);e[n+h-f]|=128*v}}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/gulp-browserify/node_modules/browserify/node_modules/buffer/node_modules/ieee754/index.js","/../node_modules/gulp-browserify/node_modules/browserify/node_modules/buffer/node_modules/ieee754")},{"1YiZ5S":18,buffer:15}],18:[function(e,t){(function(e){function n(){}var e=t.exports={};e.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),e.title="browser",e.browser=!0,e.env={},e.argv=[],e.on=n,e.addListener=n,e.once=n,e.off=n,e.removeListener=n,e.removeAllListeners=n,e.emit=n,e.binding=function(){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(){throw new Error("process.chdir is not supported")}}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/gulp-browserify/node_modules/browserify/node_modules/process/browser.js","/../node_modules/gulp-browserify/node_modules/browserify/node_modules/process")},{"1YiZ5S":18,buffer:15}],19:[function(e,t,n){(function(){(function(){function e(e){function t(t,n,r,i,a,o){for(;a>=0&&o>a;a+=e){var s=i?i[a]:a;r=n(r,t[s],s,t)}return r}return function(n,r,i,a){r=x(r,a,4);var o=!k(n)&&b.keys(n),s=(o||n).length,u=e>0?0:s-1;return arguments.length<3&&(i=n[o?o[u]:u],u+=e),t(n,r,i,o,u,s)}}function r(e){return function(t,n,r){n=w(n,r);for(var i=null!=t&&t.length,a=e>0?0:i-1;a>=0&&i>a;a+=e)if(n(t[a],a,t))return a;return-1}}function i(e,t){var n=N.length,r=e.constructor,i=b.isFunction(r)&&r.prototype||u,a="constructor";for(b.has(e,a)&&!b.contains(t,a)&&t.push(a);n--;)a=N[n],a in e&&e[a]!==i[a]&&!b.contains(t,a)&&t.push(a)}var a=this,o=a._,s=Array.prototype,u=Object.prototype,l=Function.prototype,c=s.push,d=s.slice,p=u.toString,h=u.hasOwnProperty,f=Array.isArray,v=Object.keys,g=l.bind,y=Object.create,m=function(){},b=function(e){return e instanceof b?e:this instanceof b?void(this._wrapped=e):new b(e)};"undefined"!=typeof n?("undefined"!=typeof t&&t.exports&&(n=t.exports=b),n._=b):a._=b,b.VERSION="1.8.2";var x=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,a){return e.call(t,n,r,i,a)}}return function(){return e.apply(t,arguments)}},w=function(e,t,n){return null==e?b.identity:b.isFunction(e)?x(e,t,n):b.isObject(e)?b.matcher(e):b.property(e)};b.iteratee=function(e,t){return w(e,t,1/0)};var _=function(e,t){return function(n){var r=arguments.length;if(2>r||null==n)return n;for(var i=1;r>i;i++)for(var a=arguments[i],o=e(a),s=o.length,u=0;s>u;u++){var l=o[u];t&&void 0!==n[l]||(n[l]=a[l])}return n}},E=function(e){if(!b.isObject(e))return{};if(y)return y(e);m.prototype=e;var t=new m;return m.prototype=null,t},S=Math.pow(2,53)-1,k=function(e){var t=e&&e.length;return"number"==typeof t&&t>=0&&S>=t};b.each=b.forEach=function(e,t,n){t=x(t,n);var r,i;if(k(e))for(r=0,i=e.length;i>r;r++)t(e[r],r,e);else{var a=b.keys(e);for(r=0,i=a.length;i>r;r++)t(e[a[r]],a[r],e)}return e},b.map=b.collect=function(e,t,n){t=w(t,n);for(var r=!k(e)&&b.keys(e),i=(r||e).length,a=Array(i),o=0;i>o;o++){var s=r?r[o]:o;a[o]=t(e[s],s,e)}return a},b.reduce=b.foldl=b.inject=e(1),b.reduceRight=b.foldr=e(-1),b.find=b.detect=function(e,t,n){var r;return r=k(e)?b.findIndex(e,t,n):b.findKey(e,t,n),void 0!==r&&-1!==r?e[r]:void 0},b.filter=b.select=function(e,t,n){var r=[];return t=w(t,n),b.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},b.reject=function(e,t,n){return b.filter(e,b.negate(w(t)),n)},b.every=b.all=function(e,t,n){t=w(t,n);for(var r=!k(e)&&b.keys(e),i=(r||e).length,a=0;i>a;a++){var o=r?r[a]:a;if(!t(e[o],o,e))return!1}return!0},b.some=b.any=function(e,t,n){t=w(t,n);for(var r=!k(e)&&b.keys(e),i=(r||e).length,a=0;i>a;a++){var o=r?r[a]:a;if(t(e[o],o,e))return!0}return!1},b.contains=b.includes=b.include=function(e,t,n){return k(e)||(e=b.values(e)),b.indexOf(e,t,"number"==typeof n&&n)>=0},b.invoke=function(e,t){var n=d.call(arguments,2),r=b.isFunction(t);return b.map(e,function(e){var i=r?t:e[t];return null==i?i:i.apply(e,n)})},b.pluck=function(e,t){return b.map(e,b.property(t))},b.where=function(e,t){return b.filter(e,b.matcher(t))},b.findWhere=function(e,t){return b.find(e,b.matcher(t))},b.max=function(e,t,n){var r,i,a=-1/0,o=-1/0;if(null==t&&null!=e){e=k(e)?e:b.values(e);for(var s=0,u=e.length;u>s;s++)r=e[s],r>a&&(a=r)}else t=w(t,n),b.each(e,function(e,n,r){i=t(e,n,r),(i>o||i===-1/0&&a===-1/0)&&(a=e,o=i)});return a},b.min=function(e,t,n){var r,i,a=1/0,o=1/0;if(null==t&&null!=e){e=k(e)?e:b.values(e);for(var s=0,u=e.length;u>s;s++)r=e[s],a>r&&(a=r)}else t=w(t,n),b.each(e,function(e,n,r){i=t(e,n,r),(o>i||1/0===i&&1/0===a)&&(a=e,o=i)});return a},b.shuffle=function(e){for(var t,n=k(e)?e:b.values(e),r=n.length,i=Array(r),a=0;r>a;a++)t=b.random(0,a),t!==a&&(i[a]=i[t]),i[t]=n[a];return i},b.sample=function(e,t,n){return null==t||n?(k(e)||(e=b.values(e)),e[b.random(e.length-1)]):b.shuffle(e).slice(0,Math.max(0,t))},b.sortBy=function(e,t,n){return t=w(t,n),b.pluck(b.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index-t.index}),"value")};var P=function(e){return function(t,n,r){var i={};return n=w(n,r),b.each(t,function(r,a){var o=n(r,a,t);e(i,r,o)}),i}};b.groupBy=P(function(e,t,n){b.has(e,n)?e[n].push(t):e[n]=[t]}),b.indexBy=P(function(e,t,n){e[n]=t}),b.countBy=P(function(e,t,n){b.has(e,n)?e[n]++:e[n]=1}),b.toArray=function(e){return e?b.isArray(e)?d.call(e):k(e)?b.map(e,b.identity):b.values(e):[]},b.size=function(e){return null==e?0:k(e)?e.length:b.keys(e).length},b.partition=function(e,t,n){t=w(t,n);var r=[],i=[];return b.each(e,function(e,n,a){(t(e,n,a)?r:i).push(e)}),[r,i]},b.first=b.head=b.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:b.initial(e,e.length-t)},b.initial=function(e,t,n){return d.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},b.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:b.rest(e,Math.max(0,e.length-t))},b.rest=b.tail=b.drop=function(e,t,n){return d.call(e,null==t||n?1:t)},b.compact=function(e){return b.filter(e,b.identity)};var C=function(e,t,n,r){for(var i=[],a=0,o=r||0,s=e&&e.length;s>o;o++){var u=e[o];if(k(u)&&(b.isArray(u)||b.isArguments(u))){t||(u=C(u,t,n));var l=0,c=u.length;for(i.length+=c;c>l;)i[a++]=u[l++]}else n||(i[a++]=u)}return i};b.flatten=function(e,t){return C(e,t,!1)},b.without=function(e){return b.difference(e,d.call(arguments,1))},b.uniq=b.unique=function(e,t,n,r){if(null==e)return[];b.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=w(n,r));for(var i=[],a=[],o=0,s=e.length;s>o;o++){var u=e[o],l=n?n(u,o,e):u;t?(o&&a===l||i.push(u),a=l):n?b.contains(a,l)||(a.push(l),i.push(u)):b.contains(i,u)||i.push(u)}return i},b.union=function(){return b.uniq(C(arguments,!0,!0))},b.intersection=function(e){if(null==e)return[];for(var t=[],n=arguments.length,r=0,i=e.length;i>r;r++){var a=e[r];if(!b.contains(t,a)){for(var o=1;n>o&&b.contains(arguments[o],a);o++);o===n&&t.push(a)}}return t},b.difference=function(e){var t=C(arguments,!0,!0,1);return b.filter(e,function(e){return!b.contains(t,e)})},b.zip=function(){return b.unzip(arguments)},b.unzip=function(e){for(var t=e&&b.max(e,"length").length||0,n=Array(t),r=0;t>r;r++)n[r]=b.pluck(e,r);return n},b.object=function(e,t){for(var n={},r=0,i=e&&e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},b.indexOf=function(e,t,n){var r=0,i=e&&e.length;if("number"==typeof n)r=0>n?Math.max(0,i+n):n;else if(n&&i)return r=b.sortedIndex(e,t),e[r]===t?r:-1;if(t!==t)return b.findIndex(d.call(e,r),b.isNaN);for(;i>r;r++)if(e[r]===t)return r;return-1},b.lastIndexOf=function(e,t,n){var r=e?e.length:0;if("number"==typeof n&&(r=0>n?r+n+1:Math.min(r,n+1)),t!==t)return b.findLastIndex(d.call(e,0,r),b.isNaN);for(;--r>=0;)if(e[r]===t)return r;return-1},b.findIndex=r(1),b.findLastIndex=r(-1),b.sortedIndex=function(e,t,n,r){n=w(n,r,1);for(var i=n(t),a=0,o=e.length;o>a;){var s=Math.floor((a+o)/2);n(e[s])<i?a=s+1:o=s}return a},b.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),a=0;r>a;a++,e+=n)i[a]=e;return i};var D=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var a=E(e.prototype),o=e.apply(a,i);return b.isObject(o)?o:a};b.bind=function(e,t){if(g&&e.bind===g)return g.apply(e,d.call(arguments,1));if(!b.isFunction(e))throw new TypeError("Bind must be called on a function");var n=d.call(arguments,2),r=function(){return D(e,r,t,this,n.concat(d.call(arguments)))};return r},b.partial=function(e){var t=d.call(arguments,1),n=function(){for(var r=0,i=t.length,a=Array(i),o=0;i>o;o++)a[o]=t[o]===b?arguments[r++]:t[o];for(;r<arguments.length;)a.push(arguments[r++]);return D(e,n,this,this,a)};return n},b.bindAll=function(e){var t,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(t=1;r>t;t++)n=arguments[t],e[n]=b.bind(e[n],e);return e},b.memoize=function(e,t){var n=function(r){var i=n.cache,a=""+(t?t.apply(this,arguments):r);return b.has(i,a)||(i[a]=e.apply(this,arguments)),i[a]};return n.cache={},n},b.delay=function(e,t){var n=d.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},b.defer=b.partial(b.delay,b,1),b.throttle=function(e,t,n){var r,i,a,o=null,s=0;n||(n={});var u=function(){s=n.leading===!1?0:b.now(),o=null,a=e.apply(r,i),o||(r=i=null)};return function(){var l=b.now();s||n.leading!==!1||(s=l);var c=t-(l-s);return r=this,i=arguments,0>=c||c>t?(o&&(clearTimeout(o),o=null),s=l,a=e.apply(r,i),o||(r=i=null)):o||n.trailing===!1||(o=setTimeout(u,c)),a}},b.debounce=function(e,t,n){var r,i,a,o,s,u=function(){var l=b.now()-o;t>l&&l>=0?r=setTimeout(u,t-l):(r=null,n||(s=e.apply(a,i),r||(a=i=null)))};return function(){a=this,i=arguments,o=b.now();var l=n&&!r;return r||(r=setTimeout(u,t)),l&&(s=e.apply(a,i),a=i=null),s}},b.wrap=function(e,t){return b.partial(t,e)},b.negate=function(e){return function(){return!e.apply(this,arguments)}},b.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},b.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},b.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}},b.once=b.partial(b.before,2);var T=!{toString:null}.propertyIsEnumerable("toString"),N=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];b.keys=function(e){if(!b.isObject(e))return[];if(v)return v(e);var t=[];for(var n in e)b.has(e,n)&&t.push(n);return T&&i(e,t),t},b.allKeys=function(e){if(!b.isObject(e))return[];var t=[];for(var n in e)t.push(n);return T&&i(e,t),t},b.values=function(e){for(var t=b.keys(e),n=t.length,r=Array(n),i=0;n>i;i++)r[i]=e[t[i]];return r},b.mapObject=function(e,t,n){t=w(t,n);for(var r,i=b.keys(e),a=i.length,o={},s=0;a>s;s++)r=i[s],o[r]=t(e[r],r,e);return o},b.pairs=function(e){for(var t=b.keys(e),n=t.length,r=Array(n),i=0;n>i;i++)r[i]=[t[i],e[t[i]]];return r},b.invert=function(e){for(var t={},n=b.keys(e),r=0,i=n.length;i>r;r++)t[e[n[r]]]=n[r];return t},b.functions=b.methods=function(e){var t=[];for(var n in e)b.isFunction(e[n])&&t.push(n);return t.sort()},b.extend=_(b.allKeys),b.extendOwn=b.assign=_(b.keys),b.findKey=function(e,t,n){t=w(t,n);for(var r,i=b.keys(e),a=0,o=i.length;o>a;a++)if(r=i[a],t(e[r],r,e))return r},b.pick=function(e,t,n){var r,i,a={},o=e;if(null==o)return a;b.isFunction(t)?(i=b.allKeys(o),r=x(t,n)):(i=C(arguments,!1,!1,1),r=function(e,t,n){return t in n},o=Object(o));for(var s=0,u=i.length;u>s;s++){var l=i[s],c=o[l];r(c,l,o)&&(a[l]=c)}return a},b.omit=function(e,t,n){if(b.isFunction(t))t=b.negate(t);else{var r=b.map(C(arguments,!1,!1,1),String);t=function(e,t){return!b.contains(r,t)}}return b.pick(e,t,n)},b.defaults=_(b.allKeys,!0),b.clone=function(e){return b.isObject(e)?b.isArray(e)?e.slice():b.extend({},e):e},b.tap=function(e,t){return t(e),e},b.isMatch=function(e,t){var n=b.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),a=0;r>a;a++){var o=n[a];if(t[o]!==i[o]||!(o in i))return!1}return!0};var M=function(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof b&&(e=e._wrapped),t instanceof b&&(t=t._wrapped);var i=p.call(e);if(i!==p.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var a="[object Array]"===i;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var o=e.constructor,s=t.constructor;if(o!==s&&!(b.isFunction(o)&&o instanceof o&&b.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===e)return r[u]===t;if(n.push(e),r.push(t),a){if(u=e.length,u!==t.length)return!1;for(;u--;)if(!M(e[u],t[u],n,r))return!1}else{var l,c=b.keys(e);if(u=c.length,b.keys(t).length!==u)return!1;for(;u--;)if(l=c[u],!b.has(t,l)||!M(e[l],t[l],n,r))return!1}return n.pop(),r.pop(),!0};b.isEqual=function(e,t){return M(e,t)},b.isEmpty=function(e){return null==e?!0:k(e)&&(b.isArray(e)||b.isString(e)||b.isArguments(e))?0===e.length:0===b.keys(e).length},b.isElement=function(e){return!(!e||1!==e.nodeType)},b.isArray=f||function(e){return"[object Array]"===p.call(e)},b.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},b.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){b["is"+e]=function(t){return p.call(t)==="[object "+e+"]"}}),b.isArguments(arguments)||(b.isArguments=function(e){return b.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(b.isFunction=function(e){return"function"==typeof e||!1}),b.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},b.isNaN=function(e){return b.isNumber(e)&&e!==+e},b.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===p.call(e)},b.isNull=function(e){return null===e},b.isUndefined=function(e){return void 0===e},b.has=function(e,t){return null!=e&&h.call(e,t)},b.noConflict=function(){return a._=o,this},b.identity=function(e){return e},b.constant=function(e){return function(){return e}},b.noop=function(){},b.property=function(e){return function(t){return null==t?void 0:t[e]}},b.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},b.matcher=b.matches=function(e){return e=b.extendOwn({},e),function(t){return b.isMatch(t,e)}},b.times=function(e,t,n){var r=Array(Math.max(0,e));t=x(t,n,1);for(var i=0;e>i;i++)r[i]=t(i);return r},b.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},b.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},I=b.invert(B),A=function(e){var t=function(t){return e[t]},n="(?:"+b.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};b.escape=A(B),b.unescape=A(I),b.result=function(e,t,n){var r=null==e?void 0:e[t];return void 0===r&&(r=n),b.isFunction(r)?r.call(e):r};var L=0;b.uniqueId=function(e){var t=++L+"";return e?e+t:t},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var O=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\u2028|\u2029/g,R=function(e){return"\\"+z[e]};b.template=function(e,t,n){!t&&n&&(t=n),t=b.defaults({},t,b.templateSettings);var r=RegExp([(t.escape||O).source,(t.interpolate||O).source,(t.evaluate||O).source].join("|")+"|$","g"),i=0,a="__p+='";e.replace(r,function(t,n,r,o,s){return a+=e.slice(i,s).replace(j,R),i=s+t.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":o&&(a+="';\n"+o+"\n__p+='"),t}),a+="';\n",t.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var o=new Function(t.variable||"obj","_",a)}catch(s){throw s.source=a,s}var u=function(e){return o.call(this,e,b)},l=t.variable||"obj";return u.source="function("+l+"){\n"+a+"}",u},b.chain=function(e){var t=b(e);return t._chain=!0,t};var Y=function(e,t){return e._chain?b(t).chain():t};b.mixin=function(e){b.each(b.functions(e),function(t){var n=b[t]=e[t];b.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),Y(this,n.apply(b,e))}})},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=s[e];b.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],Y(this,n)
}}),b.each(["concat","join","slice"],function(e){var t=s[e];b.prototype[e]=function(){return Y(this,t.apply(this._wrapped,arguments))}}),b.prototype.value=function(){return this._wrapped},b.prototype.valueOf=b.prototype.toJSON=b.prototype.value,b.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return b})}).call(this)}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/underscore/underscore.js","/../node_modules/underscore")},{"1YiZ5S":18,buffer:15}]},{},[1]);